(function(){function a(a,b,c){c=(c||0)-1;for(var d=a?a.length:0;++c<d;)if(a[c]===b)return c;return-1}function b(b,c){var d=typeof c;if(b=b.l,"boolean"==d||null==c)return b[c]?0:-1;"number"!=d&&"string"!=d&&(d="object");var e="number"==d?c:r+c;return b=(b=b[d])&&b[e],"object"==d?b&&-1<a(b,c)?0:-1:b?0:-1}function c(a){var b=this.l,c=typeof a;if("boolean"==c||null==a)b[a]=!0;else{"number"!=c&&"string"!=c&&(c="object");var d="number"==c?a:r+a,b=b[c]||(b[c]={});"object"==c?(b[d]||(b[d]=[])).push(a):b[d]=!0}}function d(a){return a.charCodeAt(0)}function e(a,b){for(var c=a.m,d=b.m,e=-1,f=c.length;++e<f;){var g=c[e],h=d[e];if(g!==h){if(g>h||"undefined"==typeof g)return 1;if(h>g||"undefined"==typeof h)return-1}}return a.n-b.n}function f(a){var b=-1,d=a.length,e=a[0],f=a[d/2|0],g=a[d-1];if(e&&"object"==typeof e&&f&&"object"==typeof f&&g&&"object"==typeof g)return!1;for(e=i(),e["false"]=e["null"]=e["true"]=e.undefined=!1,f=i(),f.k=a,f.l=e,f.push=c;++b<d;)f.push(a[b]);return f}function g(a){return"\\"+U[a]}function h(){return o.pop()||[]}function i(){return p.pop()||{k:null,l:null,m:null,"false":!1,n:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,o:null}}function j(a){a.length=0,o.length<t&&o.push(a)}function k(a){var b=a.l;b&&k(b),a.k=a.l=a.m=a.object=a.number=a.string=a.o=null,p.length<t&&p.push(a)}function l(a,b,c){b||(b=0),"undefined"==typeof c&&(c=a?a.length:0);var d=-1;c=c-b||0;for(var e=Array(0>c?0:c);++d<c;)e[d]=a[b+d];return e}function m(c){function o(a,b,c){if(!a||!T[typeof a])return a;b=b&&"undefined"==typeof c?b:bb(b,c,3);for(var d=-1,e=T[typeof a]&&Kc(a),f=e?e.length:0;++d<f&&(c=e[d],!1!==b(a[c],c,a)););return a}function p(a,b,c){var d;if(!a||!T[typeof a])return a;b=b&&"undefined"==typeof c?b:bb(b,c,3);for(d in a)if(!1===b(a[d],d,a))break;return a}function t(a,b,c){var d,e=a,f=e;if(!e)return f;for(var g=arguments,h=0,i="number"==typeof c?2:g.length;++h<i;)if((e=g[h])&&T[typeof e])for(var j=-1,k=T[typeof e]&&Kc(e),l=k?k.length:0;++j<l;)d=k[j],"undefined"==typeof f[d]&&(f[d]=e[d]);return f}function U(a,b,c){var d,e=a,f=e;if(!e)return f;var g=arguments,h=0,i="number"==typeof c?2:g.length;if(i>3&&"function"==typeof g[i-2])var j=bb(g[--i-1],g[i--],2);else i>2&&"function"==typeof g[i-1]&&(j=g[--i]);for(;++h<i;)if((e=g[h])&&T[typeof e])for(var k=-1,l=T[typeof e]&&Kc(e),m=l?l.length:0;++k<m;)d=l[k],f[d]=j?j(f[d],e[d]):e[d];return f}function W(a){var b,c=[];if(!a||!T[typeof a])return c;for(b in a)rc.call(a,b)&&c.push(b);return c}function X(a){return a&&"object"==typeof a&&!Jc(a)&&rc.call(a,"__wrapped__")?a:new Y(a)}function Y(a,b){this.__chain__=!!b,this.__wrapped__=a}function Z(a){function b(){if(d){var a=l(d);sc.apply(a,arguments)}if(this instanceof b){var f=ab(c.prototype),a=c.apply(f,a||arguments);return vb(a)?a:f}return c.apply(e,a||arguments)}var c=a[0],d=a[2],e=a[4];return Ic(b,a),b}function _(a,b,c,d,e){if(c){var f=c(a);if("undefined"!=typeof f)return f}if(!vb(a))return a;var g=kc.call(a);if(!Q[g])return a;var i=Gc[g];switch(g){case J:case K:return new i(+a);case M:case P:return new i(a);case O:return f=i(a.source,z.exec(a)),f.lastIndex=a.lastIndex,f}if(g=Jc(a),b){var k=!d;d||(d=h()),e||(e=h());for(var m=d.length;m--;)if(d[m]==a)return e[m];f=g?i(a.length):{}}else f=g?l(a):U({},a);return g&&(rc.call(a,"index")&&(f.index=a.index),rc.call(a,"input")&&(f.input=a.input)),b?(d.push(a),e.push(f),(g?Db:o)(a,function(a,g){f[g]=_(a,b,c,d,e)}),k&&(j(d),j(e)),f):f}function ab(a){return vb(a)?xc(a):{}}function bb(a,b,c){if("function"!=typeof a)return Ub;if("undefined"==typeof b||!("prototype"in a))return a;var d=a.__bindData__;if("undefined"==typeof d&&(Hc.funcNames&&(d=!a.name),d=d||!Hc.funcDecomp,!d)){var e=pc.call(a);Hc.funcNames||(d=!A.test(e)),d||(d=E.test(e),Ic(a,d))}if(!1===d||!0!==d&&1&d[1])return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return Sb(a,b)}function cb(a){function b(){var a=i?g:this;if(e){var o=l(e);sc.apply(o,arguments)}return(f||k)&&(o||(o=l(arguments)),f&&sc.apply(o,f),k&&o.length<h)?(d|=16,cb([c,m?d:-4&d,o,null,g,h])):(o||(o=arguments),j&&(c=a[n]),this instanceof b?(a=ab(c.prototype),o=c.apply(a,o),vb(o)?o:a):c.apply(a,o))}var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],i=1&d,j=2&d,k=4&d,m=8&d,n=c;return Ic(b,a),b}function db(c,d){var e=-1,g=mb(),h=c?c.length:0,i=h>=s&&g===a,j=[];if(i){var l=f(d);l?(g=b,d=l):i=!1}for(;++e<h;)l=c[e],0>g(d,l)&&j.push(l);return i&&k(d),j}function eb(a,b,c,d){d=(d||0)-1;for(var e=a?a.length:0,f=[];++d<e;){var g=a[d];if(g&&"object"==typeof g&&"number"==typeof g.length&&(Jc(g)||qb(g))){b||(g=eb(g,b,c));var h=-1,i=g.length,j=f.length;for(f.length+=i;++h<i;)f[j++]=g[h]}else c||f.push(g)}return f}function fb(a,b,c,d,e,f){if(c){var g=c(a,b);if("undefined"!=typeof g)return!!g}if(a===b)return 0!==a||1/a==1/b;if(a===a&&!(a&&T[typeof a]||b&&T[typeof b]))return!1;if(null==a||null==b)return a===b;var i=kc.call(a),k=kc.call(b);if(i==H&&(i=N),k==H&&(k=N),i!=k)return!1;switch(i){case J:case K:return+a==+b;case M:return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case O:case P:return a==fc(b)}if(k=i==I,!k){var l=rc.call(a,"__wrapped__"),m=rc.call(b,"__wrapped__");if(l||m)return fb(l?a.__wrapped__:a,m?b.__wrapped__:b,c,d,e,f);if(i!=N)return!1;if(i=a.constructor,l=b.constructor,i!=l&&!(ub(i)&&i instanceof i&&ub(l)&&l instanceof l)&&"constructor"in a&&"constructor"in b)return!1}for(i=!e,e||(e=h()),f||(f=h()),l=e.length;l--;)if(e[l]==a)return f[l]==b;var n=0,g=!0;if(e.push(a),f.push(b),k){if(l=a.length,n=b.length,(g=n==l)||d)for(;n--;)if(k=l,m=b[n],d)for(;k--&&!(g=fb(a[k],m,c,d,e,f)););else if(!(g=fb(a[n],m,c,d,e,f)))break}else p(b,function(b,h,i){return rc.call(i,h)?(n++,g=rc.call(a,h)&&fb(a[h],b,c,d,e,f)):void 0}),g&&!d&&p(a,function(a,b,c){return rc.call(c,b)?g=-1<--n:void 0});return e.pop(),f.pop(),i&&(j(e),j(f)),g}function gb(a,b,c,d,e){(Jc(b)?Db:o)(b,function(b,f){var g,h,i=b,j=a[f];if(b&&((h=Jc(b))||Pc(b))){for(i=d.length;i--;)if(g=d[i]==b){j=e[i];break}if(!g){var k;c&&(i=c(j,b),k="undefined"!=typeof i)&&(j=i),k||(j=h?Jc(j)?j:[]:Pc(j)?j:{}),d.push(b),e.push(j),k||gb(j,b,c,d,e)}}else c&&(i=c(j,b),"undefined"==typeof i&&(i=b)),"undefined"!=typeof i&&(j=i);a[f]=j})}function hb(a,b){return a+oc(Fc()*(b-a+1))}function ib(c,d,e){var g=-1,i=mb(),l=c?c.length:0,m=[],n=!d&&l>=s&&i===a,o=e||n?h():m;for(n&&(o=f(o),i=b);++g<l;){var p=c[g],q=e?e(p,g,c):p;(d?!g||o[o.length-1]!==q:0>i(o,q))&&((e||n)&&o.push(q),m.push(p))}return n?(j(o.k),k(o)):e&&j(o),m}function jb(a){return function(b,c,d){var e={};c=X.createCallback(c,d,3),d=-1;var f=b?b.length:0;if("number"==typeof f)for(;++d<f;){var g=b[d];a(e,g,c(g,d,b),b)}else o(b,function(b,d,f){a(e,b,c(b,d,f),f)});return e}}function kb(a,b,c,d,e,f){var g=1&b,h=4&b,i=16&b,j=32&b;if(!(2&b||ub(a)))throw new gc;i&&!c.length&&(b&=-17,i=c=!1),j&&!d.length&&(b&=-33,j=d=!1);var k=a&&a.__bindData__;return k&&!0!==k?(k=l(k),k[2]&&(k[2]=l(k[2])),k[3]&&(k[3]=l(k[3])),!g||1&k[1]||(k[4]=e),!g&&1&k[1]&&(b|=8),!h||4&k[1]||(k[5]=f),i&&sc.apply(k[2]||(k[2]=[]),c),j&&vc.apply(k[3]||(k[3]=[]),d),k[1]|=b,kb.apply(null,k)):(1==b||17===b?Z:cb)([a,b,c,d,e,f])}function lb(a){return Lc[a]}function mb(){var b=(b=X.indexOf)===Mb?a:b;return b}function nb(a){return"function"==typeof a&&lc.test(a)}function ob(a){var b,c;return a&&kc.call(a)==N&&(b=a.constructor,!ub(b)||b instanceof b)?(p(a,function(a,b){c=b}),"undefined"==typeof c||rc.call(a,c)):!1}function pb(a){return Mc[a]}function qb(a){return a&&"object"==typeof a&&"number"==typeof a.length&&kc.call(a)==H||!1}function rb(a,b,c){var d=Kc(a),e=d.length;for(b=bb(b,c,3);e--&&(c=d[e],!1!==b(a[c],c,a)););return a}function sb(a){var b=[];return p(a,function(a,c){ub(a)&&b.push(c)}),b.sort()}function tb(a){for(var b=-1,c=Kc(a),d=c.length,e={};++b<d;){var f=c[b];e[a[f]]=f}return e}function ub(a){return"function"==typeof a}function vb(a){return!(!a||!T[typeof a])}function wb(a){return"number"==typeof a||a&&"object"==typeof a&&kc.call(a)==M||!1}function xb(a){return"string"==typeof a||a&&"object"==typeof a&&kc.call(a)==P||!1}function yb(a){for(var b=-1,c=Kc(a),d=c.length,e=Zb(d);++b<d;)e[b]=a[c[b]];return e}function zb(a,b,c){var d=-1,e=mb(),f=a?a.length:0,g=!1;return c=(0>c?Cc(0,f+c):c)||0,Jc(a)?g=-1<e(a,b,c):"number"==typeof f?g=-1<(xb(a)?a.indexOf(b,c):e(a,b,c)):o(a,function(a){return++d<c?void 0:!(g=a===b)}),g}function Ab(a,b,c){var d=!0;b=X.createCallback(b,c,3),c=-1;var e=a?a.length:0;if("number"==typeof e)for(;++c<e&&(d=!!b(a[c],c,a)););else o(a,function(a,c,e){return d=!!b(a,c,e)});return d}function Bb(a,b,c){var d=[];b=X.createCallback(b,c,3),c=-1;var e=a?a.length:0;if("number"==typeof e)for(;++c<e;){var f=a[c];b(f,c,a)&&d.push(f)}else o(a,function(a,c,e){b(a,c,e)&&d.push(a)});return d}function Cb(a,b,c){b=X.createCallback(b,c,3),c=-1;var d=a?a.length:0;if("number"!=typeof d){var e;return o(a,function(a,c,d){return b(a,c,d)?(e=a,!1):void 0}),e}for(;++c<d;){var f=a[c];if(b(f,c,a))return f}}function Db(a,b,c){var d=-1,e=a?a.length:0;if(b=b&&"undefined"==typeof c?b:bb(b,c,3),"number"==typeof e)for(;++d<e&&!1!==b(a[d],d,a););else o(a,b);return a}function Eb(a,b,c){var d=a?a.length:0;if(b=b&&"undefined"==typeof c?b:bb(b,c,3),"number"==typeof d)for(;d--&&!1!==b(a[d],d,a););else{var e=Kc(a),d=e.length;o(a,function(a,c,f){return c=e?e[--d]:--d,b(f[c],c,f)})}return a}function Fb(a,b,c){var d=-1,e=a?a.length:0;if(b=X.createCallback(b,c,3),"number"==typeof e)for(var f=Zb(e);++d<e;)f[d]=b(a[d],d,a);else f=[],o(a,function(a,c,e){f[++d]=b(a,c,e)});return f}function Gb(a,b,c){var e=-1/0,f=e;if("function"!=typeof b&&c&&c[b]===a&&(b=null),null==b&&Jc(a)){c=-1;for(var g=a.length;++c<g;){var h=a[c];h>f&&(f=h)}}else b=null==b&&xb(a)?d:X.createCallback(b,c,3),Db(a,function(a,c,d){c=b(a,c,d),c>e&&(e=c,f=a)});return f}function Hb(a,b,c,d){if(!a)return c;var e=3>arguments.length;b=X.createCallback(b,d,4);var f=-1,g=a.length;if("number"==typeof g)for(e&&(c=a[++f]);++f<g;)c=b(c,a[f],f,a);else o(a,function(a,d,f){c=e?(e=!1,a):b(c,a,d,f)});return c}function Ib(a,b,c,d){var e=3>arguments.length;return b=X.createCallback(b,d,4),Eb(a,function(a,d,f){c=e?(e=!1,a):b(c,a,d,f)}),c}function Jb(a){var b=-1,c=a?a.length:0,d=Zb("number"==typeof c?c:0);return Db(a,function(a){var c=hb(0,++b);d[b]=d[c],d[c]=a}),d}function Kb(a,b,c){var d;b=X.createCallback(b,c,3),c=-1;var e=a?a.length:0;if("number"==typeof e)for(;++c<e&&!(d=b(a[c],c,a)););else o(a,function(a,c,e){return!(d=b(a,c,e))});return!!d}function Lb(a,b,c){var d=0,e=a?a.length:0;if("number"!=typeof b&&null!=b){var f=-1;for(b=X.createCallback(b,c,3);++f<e&&b(a[f],f,a);)d++}else if(d=b,null==d||c)return a?a[0]:n;return l(a,0,Dc(Cc(0,d),e))}function Mb(b,c,d){if("number"==typeof d){var e=b?b.length:0;d=0>d?Cc(0,e+d):d||0}else if(d)return d=Ob(b,c),b[d]===c?d:-1;return a(b,c,d)}function Nb(a,b,c){if("number"!=typeof b&&null!=b){var d=0,e=-1,f=a?a.length:0;for(b=X.createCallback(b,c,3);++e<f&&b(a[e],e,a);)d++}else d=null==b||c?1:Cc(0,b);return l(a,d)}function Ob(a,b,c,d){var e=0,f=a?a.length:e;for(c=c?X.createCallback(c,d,1):Ub,b=c(b);f>e;)d=e+f>>>1,c(a[d])<b?e=d+1:f=d;return e}function Pb(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c="function"!=typeof b&&d&&d[b]===a?null:b,b=!1),null!=c&&(c=X.createCallback(c,d,3)),ib(a,b,c)}function Qb(){for(var a=1<arguments.length?arguments:arguments[0],b=-1,c=a?Gb(Tc(a,"length")):0,d=Zb(0>c?0:c);++b<c;)d[b]=Tc(a,b);return d}function Rb(a,b){var c=-1,d=a?a.length:0,e={};for(b||!d||Jc(a[0])||(b=[]);++c<d;){var f=a[c];b?e[f]=b[c]:f&&(e[f[0]]=f[1])}return e}function Sb(a,b){return 2<arguments.length?kb(a,17,l(arguments,2),null,b):kb(a,1,null,null,b)}function Tb(a,b,c){function d(){k&&nc(k),g=k=l=n,(p||o!==b)&&(m=Uc(),h=a.apply(j,f),k||g||(f=j=null))}function e(){var c=b-(Uc()-i);c>0?k=tc(e,c):(g&&nc(g),c=l,g=k=l=n,c&&(m=Uc(),h=a.apply(j,f),k||g||(f=j=null)))}var f,g,h,i,j,k,l,m=0,o=!1,p=!0;if(!ub(a))throw new gc;if(b=Cc(0,b)||0,!0===c)var q=!0,p=!1;else vb(c)&&(q=c.leading,o="maxWait"in c&&(Cc(b,c.maxWait)||0),p="trailing"in c?c.trailing:p);return function(){if(f=arguments,i=Uc(),j=this,l=p&&(k||!q),!1===o)var c=q&&!k;else{g||q||(m=i);var n=o-(i-m),r=0>=n;r?(g&&(g=nc(g)),m=i,h=a.apply(j,f)):g||(g=tc(d,n))}return r&&k?k=nc(k):k||b===o||(k=tc(e,b)),c&&(r=!0,h=a.apply(j,f)),!r||k||g||(f=j=null),h}}function Ub(a){return a}function Vb(a,b,c){var d=!0,e=b&&sb(b);b&&(c||e.length)||(null==c&&(c=b),f=Y,b=a,a=X,e=sb(b)),!1===c?d=!1:vb(c)&&"chain"in c&&(d=c.chain);var f=a,g=ub(f);Db(e,function(c){var e=a[c]=b[c];g&&(f.prototype[c]=function(){var b=this.__chain__,c=this.__wrapped__,g=[c];if(sc.apply(g,arguments),g=e.apply(a,g),d||b){if(c===g&&vb(g))return this;g=new f(g),g.__chain__=b}return g})})}function Wb(){}function Xb(a){return function(b){return b[a]}}function Yb(){return this.__wrapped__}c=c?$.defaults(V.Object(),c,$.pick(V,G)):V;var Zb=c.Array,$b=c.Boolean,_b=c.Date,ac=c.Function,bc=c.Math,cc=c.Number,dc=c.Object,ec=c.RegExp,fc=c.String,gc=c.TypeError,hc=[],ic=dc.prototype,jc=c._,kc=ic.toString,lc=ec("^"+fc(kc).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),mc=bc.ceil,nc=c.clearTimeout,oc=bc.floor,pc=ac.prototype.toString,qc=nb(qc=dc.getPrototypeOf)&&qc,rc=ic.hasOwnProperty,sc=hc.push,tc=c.setTimeout,uc=hc.splice,vc=hc.unshift,wc=function(){try{var a={},b=nb(b=dc.defineProperty)&&b,c=b(a,a,a)&&b}catch(d){}return c}(),xc=nb(xc=dc.create)&&xc,yc=nb(yc=Zb.isArray)&&yc,zc=c.isFinite,Ac=c.isNaN,Bc=nb(Bc=dc.keys)&&Bc,Cc=bc.max,Dc=bc.min,Ec=c.parseInt,Fc=bc.random,Gc={};Gc[I]=Zb,Gc[J]=$b,Gc[K]=_b,Gc[L]=ac,Gc[N]=dc,Gc[M]=cc,Gc[O]=ec,Gc[P]=fc,Y.prototype=X.prototype;var Hc=X.support={};Hc.funcDecomp=!nb(c.a)&&E.test(m),Hc.funcNames="string"==typeof ac.name,X.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:B,variable:"",imports:{_:X}},xc||(ab=function(){function a(){}return function(b){if(vb(b)){a.prototype=b;var d=new a;a.prototype=null}return d||c.Object()}}());var Ic=wc?function(a,b){S.value=b,wc(a,"__bindData__",S)}:Wb,Jc=yc||function(a){return a&&"object"==typeof a&&"number"==typeof a.length&&kc.call(a)==I||!1},Kc=Bc?function(a){return vb(a)?Bc(a):[]}:W,Lc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Mc=tb(Lc),Nc=ec("("+Kc(Mc).join("|")+")","g"),Oc=ec("["+Kc(Lc).join("")+"]","g"),Pc=qc?function(a){if(!a||kc.call(a)!=N)return!1;var b=a.valueOf,c=nb(b)&&(c=qc(b))&&qc(c);return c?a==c||qc(a)==c:ob(a)}:ob,Qc=jb(function(a,b,c){rc.call(a,c)?a[c]++:a[c]=1}),Rc=jb(function(a,b,c){(rc.call(a,c)?a[c]:a[c]=[]).push(b)}),Sc=jb(function(a,b,c){a[c]=b}),Tc=Fb,Uc=nb(Uc=_b.now)&&Uc||function(){return(new _b).getTime()},Vc=8==Ec(u+"08")?Ec:function(a,b){return Ec(xb(a)?a.replace(C,""):a,b||0)};return X.after=function(a,b){if(!ub(b))throw new gc;return function(){return 1>--a?b.apply(this,arguments):void 0}},X.assign=U,X.at=function(a){for(var b=arguments,c=-1,d=eb(b,!0,!1,1),b=b[2]&&b[2][b[1]]===a?1:d.length,e=Zb(b);++c<b;)e[c]=a[d[c]];return e},X.bind=Sb,X.bindAll=function(a){for(var b=1<arguments.length?eb(arguments,!0,!1,1):sb(a),c=-1,d=b.length;++c<d;){var e=b[c];a[e]=kb(a[e],1,null,null,a)}return a},X.bindKey=function(a,b){return 2<arguments.length?kb(b,19,l(arguments,2),null,a):kb(b,3,null,null,a)},X.chain=function(a){return a=new Y(a),a.__chain__=!0,a},X.compact=function(a){for(var b=-1,c=a?a.length:0,d=[];++b<c;){var e=a[b];e&&d.push(e)}return d},X.compose=function(){for(var a=arguments,b=a.length;b--;)if(!ub(a[b]))throw new gc;return function(){for(var b=arguments,c=a.length;c--;)b=[a[c].apply(this,b)];return b[0]}},X.constant=function(a){return function(){return a}},X.countBy=Qc,X.create=function(a,b){var c=ab(a);return b?U(c,b):c},X.createCallback=function(a,b,c){var d=typeof a;if(null==a||"function"==d)return bb(a,b,c);if("object"!=d)return Xb(a);var e=Kc(a),f=e[0],g=a[f];return 1!=e.length||g!==g||vb(g)?function(b){for(var c=e.length,d=!1;c--&&(d=fb(b[e[c]],a[e[c]],null,!0)););return d}:function(a){return a=a[f],g===a&&(0!==g||1/g==1/a)}},X.curry=function(a,b){return b="number"==typeof b?b:+b||a.length,kb(a,4,null,null,null,b)},X.debounce=Tb,X.defaults=t,X.defer=function(a){if(!ub(a))throw new gc;var b=l(arguments,1);return tc(function(){a.apply(n,b)},1)},X.delay=function(a,b){if(!ub(a))throw new gc;var c=l(arguments,2);return tc(function(){a.apply(n,c)},b)},X.difference=function(a){return db(a,eb(arguments,!0,!0,1))},X.filter=Bb,X.flatten=function(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c="function"!=typeof b&&d&&d[b]===a?null:b,b=!1),null!=c&&(a=Fb(a,c,d)),eb(a,b)},X.forEach=Db,X.forEachRight=Eb,X.forIn=p,X.forInRight=function(a,b,c){var d=[];p(a,function(a,b){d.push(b,a)});var e=d.length;for(b=bb(b,c,3);e--&&!1!==b(d[e--],d[e],a););return a},X.forOwn=o,X.forOwnRight=rb,X.functions=sb,X.groupBy=Rc,X.indexBy=Sc,X.initial=function(a,b,c){var d=0,e=a?a.length:0;if("number"!=typeof b&&null!=b){var f=e;for(b=X.createCallback(b,c,3);f--&&b(a[f],f,a);)d++}else d=null==b||c?1:b||d;return l(a,0,Dc(Cc(0,e-d),e))},X.intersection=function(){for(var c=[],d=-1,e=arguments.length,g=h(),i=mb(),l=i===a,m=h();++d<e;){var n=arguments[d];(Jc(n)||qb(n))&&(c.push(n),g.push(l&&n.length>=s&&f(d?c[d]:m)))}var l=c[0],o=-1,p=l?l.length:0,q=[];a:for(;++o<p;){var r=g[0],n=l[o];if(0>(r?b(r,n):i(m,n))){for(d=e,(r||m).push(n);--d;)if(r=g[d],0>(r?b(r,n):i(c[d],n)))continue a;q.push(n)}}for(;e--;)(r=g[e])&&k(r);return j(g),j(m),q},X.invert=tb,X.invoke=function(a,b){var c=l(arguments,2),d=-1,e="function"==typeof b,f=a?a.length:0,g=Zb("number"==typeof f?f:0);return Db(a,function(a){g[++d]=(e?b:a[b]).apply(a,c)}),g},X.keys=Kc,X.map=Fb,X.mapValues=function(a,b,c){var d={};return b=X.createCallback(b,c,3),o(a,function(a,c,e){d[c]=b(a,c,e)}),d},X.max=Gb,X.memoize=function(a,b){function c(){var d=c.cache,e=b?b.apply(this,arguments):r+arguments[0];return rc.call(d,e)?d[e]:d[e]=a.apply(this,arguments)}if(!ub(a))throw new gc;return c.cache={},c},X.merge=function(a){var b=arguments,c=2;if(!vb(a))return a;if("number"!=typeof b[2]&&(c=b.length),c>3&&"function"==typeof b[c-2])var d=bb(b[--c-1],b[c--],2);else c>2&&"function"==typeof b[c-1]&&(d=b[--c]);for(var b=l(arguments,1,c),e=-1,f=h(),g=h();++e<c;)gb(a,b[e],d,f,g);return j(f),j(g),a},X.min=function(a,b,c){var e=1/0,f=e;if("function"!=typeof b&&c&&c[b]===a&&(b=null),null==b&&Jc(a)){c=-1;for(var g=a.length;++c<g;){var h=a[c];f>h&&(f=h)}}else b=null==b&&xb(a)?d:X.createCallback(b,c,3),Db(a,function(a,c,d){c=b(a,c,d),e>c&&(e=c,f=a)});return f},X.omit=function(a,b,c){var d={};if("function"!=typeof b){var e=[];p(a,function(a,b){e.push(b)});for(var e=db(e,eb(arguments,!0,!1,1)),f=-1,g=e.length;++f<g;){var h=e[f];d[h]=a[h]}}else b=X.createCallback(b,c,3),p(a,function(a,c,e){b(a,c,e)||(d[c]=a)});return d},X.once=function(a){var b,c;if(!ub(a))throw new gc;return function(){return b?c:(b=!0,c=a.apply(this,arguments),a=null,c)}},X.pairs=function(a){for(var b=-1,c=Kc(a),d=c.length,e=Zb(d);++b<d;){var f=c[b];e[b]=[f,a[f]]}return e},X.partial=function(a){return kb(a,16,l(arguments,1))},X.partialRight=function(a){return kb(a,32,null,l(arguments,1))},X.pick=function(a,b,c){var d={};if("function"!=typeof b)for(var e=-1,f=eb(arguments,!0,!1,1),g=vb(a)?f.length:0;++e<g;){var h=f[e];h in a&&(d[h]=a[h])}else b=X.createCallback(b,c,3),p(a,function(a,c,e){b(a,c,e)&&(d[c]=a)});return d},X.pluck=Tc,X.property=Xb,X.pull=function(a){for(var b=arguments,c=0,d=b.length,e=a?a.length:0;++c<d;)for(var f=-1,g=b[c];++f<e;)a[f]===g&&(uc.call(a,f--,1),e--);return a},X.range=function(a,b,c){a=+a||0,c="number"==typeof c?c:+c||1,null==b&&(b=a,a=0);var d=-1;b=Cc(0,mc((b-a)/(c||1)));for(var e=Zb(b);++d<b;)e[d]=a,a+=c;return e},X.reject=function(a,b,c){return b=X.createCallback(b,c,3),Bb(a,function(a,c,d){return!b(a,c,d)})},X.remove=function(a,b,c){var d=-1,e=a?a.length:0,f=[];for(b=X.createCallback(b,c,3);++d<e;)c=a[d],b(c,d,a)&&(f.push(c),uc.call(a,d--,1),e--);return f},X.rest=Nb,X.shuffle=Jb,X.sortBy=function(a,b,c){var d=-1,f=Jc(b),g=a?a.length:0,l=Zb("number"==typeof g?g:0);for(f||(b=X.createCallback(b,c,3)),Db(a,function(a,c,e){var g=l[++d]=i();f?g.m=Fb(b,function(b){return a[b]}):(g.m=h())[0]=b(a,c,e),g.n=d,g.o=a}),g=l.length,l.sort(e);g--;)a=l[g],l[g]=a.o,f||j(a.m),k(a);return l},X.tap=function(a,b){return b(a),a},X.throttle=function(a,b,c){var d=!0,e=!0;if(!ub(a))throw new gc;return!1===c?d=!1:vb(c)&&(d="leading"in c?c.leading:d,e="trailing"in c?c.trailing:e),R.leading=d,R.maxWait=b,R.trailing=e,Tb(a,b,R)},X.times=function(a,b,c){a=-1<(a=+a)?a:0;var d=-1,e=Zb(a);for(b=bb(b,c,1);++d<a;)e[d]=b(d);return e},X.toArray=function(a){return a&&"number"==typeof a.length?l(a):yb(a)},X.transform=function(a,b,c,d){var e=Jc(a);if(null==c)if(e)c=[];else{var f=a&&a.constructor;c=ab(f&&f.prototype)}return b&&(b=X.createCallback(b,d,4),(e?Db:o)(a,function(a,d,e){return b(c,a,d,e)})),c},X.union=function(){return ib(eb(arguments,!0,!0))},X.uniq=Pb,X.values=yb,X.where=Bb,X.without=function(a){return db(a,l(arguments,1))},X.wrap=function(a,b){return kb(b,16,[a])},X.xor=function(){for(var a=-1,b=arguments.length;++a<b;){var c=arguments[a];if(Jc(c)||qb(c))var d=d?ib(db(d,c).concat(db(c,d))):c}return d||[]},X.zip=Qb,X.zipObject=Rb,X.collect=Fb,X.drop=Nb,X.each=Db,X.eachRight=Eb,X.extend=U,X.methods=sb,X.object=Rb,X.select=Bb,X.tail=Nb,X.unique=Pb,X.unzip=Qb,Vb(X),X.clone=function(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c=b,b=!1),_(a,b,"function"==typeof c&&bb(c,d,1))},X.cloneDeep=function(a,b,c){return _(a,!0,"function"==typeof b&&bb(b,c,1))},X.contains=zb,X.escape=function(a){return null==a?"":fc(a).replace(Oc,lb)},X.every=Ab,X.find=Cb,X.findIndex=function(a,b,c){var d=-1,e=a?a.length:0;for(b=X.createCallback(b,c,3);++d<e;)if(b(a[d],d,a))return d;return-1},X.findKey=function(a,b,c){var d;return b=X.createCallback(b,c,3),o(a,function(a,c,e){return b(a,c,e)?(d=c,!1):void 0}),d},X.findLast=function(a,b,c){var d;return b=X.createCallback(b,c,3),Eb(a,function(a,c,e){return b(a,c,e)?(d=a,!1):void 0}),d},X.findLastIndex=function(a,b,c){var d=a?a.length:0;for(b=X.createCallback(b,c,3);d--;)if(b(a[d],d,a))return d;return-1},X.findLastKey=function(a,b,c){var d;return b=X.createCallback(b,c,3),rb(a,function(a,c,e){return b(a,c,e)?(d=c,!1):void 0}),d},X.has=function(a,b){return a?rc.call(a,b):!1},X.identity=Ub,X.indexOf=Mb,X.isArguments=qb,X.isArray=Jc,X.isBoolean=function(a){return!0===a||!1===a||a&&"object"==typeof a&&kc.call(a)==J||!1},X.isDate=function(a){return a&&"object"==typeof a&&kc.call(a)==K||!1},X.isElement=function(a){return a&&1===a.nodeType||!1},X.isEmpty=function(a){var b=!0;if(!a)return b;var c=kc.call(a),d=a.length;return c==I||c==P||c==H||c==N&&"number"==typeof d&&ub(a.splice)?!d:(o(a,function(){return b=!1}),b)},X.isEqual=function(a,b,c,d){return fb(a,b,"function"==typeof c&&bb(c,d,2))},X.isFinite=function(a){return zc(a)&&!Ac(parseFloat(a))},X.isFunction=ub,X.isNaN=function(a){return wb(a)&&a!=+a},X.isNull=function(a){return null===a},X.isNumber=wb,X.isObject=vb,X.isPlainObject=Pc,X.isRegExp=function(a){return a&&"object"==typeof a&&kc.call(a)==O||!1},X.isString=xb,X.isUndefined=function(a){return"undefined"==typeof a},X.lastIndexOf=function(a,b,c){var d=a?a.length:0;for("number"==typeof c&&(d=(0>c?Cc(0,d+c):Dc(c,d-1))+1);d--;)if(a[d]===b)return d;return-1},X.mixin=Vb,X.noConflict=function(){return c._=jc,this},X.noop=Wb,X.now=Uc,X.parseInt=Vc,X.random=function(a,b,c){var d=null==a,e=null==b;return null==c&&("boolean"==typeof a&&e?(c=a,a=1):e||"boolean"!=typeof b||(c=b,e=!0)),d&&e&&(b=1),a=+a||0,e?(b=a,a=0):b=+b||0,c||a%1||b%1?(c=Fc(),Dc(a+c*(b-a+parseFloat("1e-"+((c+"").length-1))),b)):hb(a,b)},X.reduce=Hb,X.reduceRight=Ib,X.result=function(a,b){if(a){var c=a[b];return ub(c)?a[b]():c}},X.runInContext=m,X.size=function(a){var b=a?a.length:0;return"number"==typeof b?b:Kc(a).length},X.some=Kb,X.sortedIndex=Ob,X.template=function(a,b,c){var d=X.templateSettings;a=fc(a||""),c=t({},c,d);var e,f=t({},c.imports,d.imports),d=Kc(f),f=yb(f),h=0,i=c.interpolate||D,j="__p+='",i=ec((c.escape||D).source+"|"+i.source+"|"+(i===B?y:D).source+"|"+(c.evaluate||D).source+"|$","g");a.replace(i,function(b,c,d,f,i,k){return d||(d=f),j+=a.slice(h,k).replace(F,g),c&&(j+="'+__e("+c+")+'"),i&&(e=!0,j+="';"+i+";\n__p+='"),d&&(j+="'+((__t=("+d+"))==null?'':__t)+'"),h=k+b.length,b}),j+="';",i=c=c.variable,i||(c="obj",j="with("+c+"){"+j+"}"),j=(e?j.replace(v,""):j).replace(w,"$1").replace(x,"$1;"),j="function("+c+"){"+(i?"":c+"||("+c+"={});")+"var __t,__p='',__e=_.escape"+(e?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+j+"return __p}";try{var k=ac(d,"return "+j).apply(n,f)}catch(l){throw l.source=j,l}return b?k(b):(k.source=j,k)},X.unescape=function(a){return null==a?"":fc(a).replace(Nc,pb)},X.uniqueId=function(a){var b=++q;return fc(null==a?"":a)+b},X.all=Ab,X.any=Kb,X.detect=Cb,X.findWhere=Cb,X.foldl=Hb,X.foldr=Ib,X.include=zb,X.inject=Hb,Vb(function(){var a={};return o(X,function(b,c){X.prototype[c]||(a[c]=b)}),a}(),!1),X.first=Lb,X.last=function(a,b,c){var d=0,e=a?a.length:0;if("number"!=typeof b&&null!=b){var f=e;for(b=X.createCallback(b,c,3);f--&&b(a[f],f,a);)d++}else if(d=b,null==d||c)return a?a[e-1]:n;return l(a,Cc(0,e-d))},X.sample=function(a,b,c){return a&&"number"!=typeof a.length&&(a=yb(a)),null==b||c?a?a[hb(0,a.length-1)]:n:(a=Jb(a),a.length=Dc(Cc(0,b),a.length),a)},X.take=Lb,X.head=Lb,o(X,function(a,b){var c="sample"!==b;X.prototype[b]||(X.prototype[b]=function(b,d){var e=this.__chain__,f=a(this.__wrapped__,b,d);return e||null!=b&&(!d||c&&"function"==typeof b)?new Y(f,e):f})}),X.VERSION="2.4.1",X.prototype.chain=function(){return this.__chain__=!0,this},X.prototype.toString=function(){return fc(this.__wrapped__)},X.prototype.value=Yb,X.prototype.valueOf=Yb,Db(["join","pop","shift"],function(a){var b=hc[a];X.prototype[a]=function(){var a=this.__chain__,c=b.apply(this.__wrapped__,arguments);return a?new Y(c,a):c}}),Db(["push","reverse","sort","unshift"],function(a){var b=hc[a];X.prototype[a]=function(){return b.apply(this.__wrapped__,arguments),this}}),Db(["concat","slice","splice"],function(a){var b=hc[a];X.prototype[a]=function(){return new Y(b.apply(this.__wrapped__,arguments),this.__chain__)}}),X}var n,o=[],p=[],q=0,r=+new Date+"",s=75,t=40,u=" 	\f ﻿\n\r\u2028\u2029 ᠎             　",v=/\b__p\+='';/g,w=/\b(__p\+=)''\+/g,x=/(__e\(.*?\)|\b__t\))\+'';/g,y=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,z=/\w*$/,A=/^\s*function[ \n\r\t]+\w/,B=/<%=([\s\S]+?)%>/g,C=RegExp("^["+u+"]*0+(?=.$)"),D=/($^)/,E=/\bthis\b/,F=/['\n\r\t\u2028\u2029\\]/g,G="Array Boolean Date Function Math Number Object RegExp String _ attachEvent clearTimeout isFinite isNaN parseInt setTimeout".split(" "),H="[object Arguments]",I="[object Array]",J="[object Boolean]",K="[object Date]",L="[object Function]",M="[object Number]",N="[object Object]",O="[object RegExp]",P="[object String]",Q={};Q[L]=!1,Q[H]=Q[I]=Q[J]=Q[K]=Q[M]=Q[N]=Q[O]=Q[P]=!0;var R={leading:!1,maxWait:0,trailing:!1},S={configurable:!1,enumerable:!1,value:null,writable:!1},T={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},U={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},V=T[typeof window]&&window||this,W=T[typeof exports]&&exports&&!exports.nodeType&&exports,X=T[typeof module]&&module&&!module.nodeType&&module,Y=X&&X.exports===W&&W,Z=T[typeof global]&&global;!Z||Z.global!==Z&&Z.window!==Z||(V=Z);var $=m();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(V._=$,define(function(){return $})):W&&X?Y?(X.exports=$)._=$:W._=$:V._=$}).call(this),function(){function a(a,b){b||(b={});for(var c in a)void 0===b[c]&&(b[c]=a[c]);return b}function b(){this._callbacks=[],this._errCallbacks=[],this._resolved=0,this._result=null}function c(c,d){this.data=c,this.options=a(j,d),this.operation=new b,this.operation.resolve(null,this.data),this.requiredScripts=[],this.requiredFunctions=[]}var d="undefined"!=typeof module&&module.exports,e=!("undefined"!=typeof window&&this===window),f=f||function(a){setTimeout(a,0)},g=e?require(__dirname+"/Worker.js"):self.Worker,h="undefined"!=typeof self?self.URL?self.URL:self.webkitURL:null,i=e||self.Worker?!0:!1;b.prototype.resolve=function(a,b){if(a){this._resolved=2,this._result=a;for(var c=0;c<this._errCallbacks.length;++c)this._errCallbacks[c](b)}else{this._resolved=1,this._result=b;for(var d=0;d<this._callbacks.length;++d)this._callbacks[d](b)}this._callbacks=[],this._errCallbacks=[]},b.prototype.then=function(a,b){return 1===this._resolved?void(a&&a(this._result)):2===this._resolved?void(b&&b(this._result)):(a&&(this._callbacks[this._callbacks.length]=a),b&&(this._errCallbacks[this._errCallbacks.length]=b),this)};var j={evalPath:e?__dirname+"/eval.js":null,maxWorkers:e?require("os").cpus().length:4,synchronous:!0,env:{},envNamespace:"env"};c.isSupported=function(){return i},c.prototype.getWorkerSource=function(a,b){var c="",d=0;for(e||0===this.requiredScripts.length||(c+='importScripts("'+this.requiredScripts.join('","')+'");\r\n'),d=0;d<this.requiredFunctions.length;++d)c+=this.requiredFunctions[d].name?"var "+this.requiredFunctions[d].name+" = "+this.requiredFunctions[d].fn.toString()+";":this.requiredFunctions[d].fn.toString();b=JSON.stringify(b||{});var f=this.options.envNamespace;return e?c+'process.on("message", function(e) {global.'+f+" = "+b+";process.send(JSON.stringify(("+a.toString()+")(JSON.parse(e).data)))})":c+"self.onmessage = function(e) {var global = {}; global."+f+" = "+b+";self.postMessage(("+a.toString()+")(e.data))}"},c.prototype.require=function(){for(var a,b=Array.prototype.slice.call(arguments,0),c=0;c<b.length;c++)a=b[c],"string"==typeof a?this.requiredScripts.push(a):"function"==typeof a?this.requiredFunctions.push({fn:a}):"object"==typeof a&&this.requiredFunctions.push(a);return this},c.prototype._spawnWorker=function(a,b){var c,d=this.getWorkerSource(a,b);if(e)c=new g(this.options.evalPath),c.postMessage(d);else{if(void 0===g)return void 0;try{if(0!==this.requiredScripts.length){if(null===this.options.evalPath)throw new Error("Can't use required scripts without eval.js!");c=new g(this.options.evalPath),c.postMessage(d)}else{if(!h)throw new Error("Can't create a blob URL in this browser!");var f=new Blob([d],{type:"text/javascript"}),i=h.createObjectURL(f);c=new g(i)}}catch(j){if(null===this.options.evalPath)throw j;c=new g(this.options.evalPath),c.postMessage(d)}}return c},c.prototype.spawn=function(c,d){var e=this,g=new b;return d=a(this.options.env,d||{}),this.operation.then(function(){var a=e._spawnWorker(c,d);if(void 0!==a)a.onmessage=function(b){a.terminate(),e.data=b.data,g.resolve(null,e.data)},a.postMessage(e.data);else{if(!e.options.synchronous)throw new Error("Workers do not exist and synchronous operation not allowed!");f(function(){e.data=c(e.data),g.resolve(null,e.data)})}}),this.operation=g,this},c.prototype._spawnMapWorker=function(a,b,c,d){var e=this,g=e._spawnWorker(b,d);if(void 0!==g)g.onmessage=function(b){g.terminate(),e.data[a]=b.data,c()},g.postMessage(e.data[a]);else{if(!e.options.synchronous)throw new Error("Workers do not exist and synchronous operation not allowed!");f(function(){e.data[a]=b(e.data[a]),c()})}},c.prototype.map=function(c,d){function e(){++h===f.data.length?i.resolve(null,f.data):g<f.data.length&&f._spawnMapWorker(g++,c,e,d)}if(d=a(this.options.env,d||{}),!this.data.length)return this.spawn(c,d);var f=this,g=0,h=0,i=new b;return this.operation.then(function(){for(;g-h<f.options.maxWorkers&&g<f.data.length;++g)f._spawnMapWorker(g,c,e,d)}),this.operation=i,this},c.prototype._spawnReduceWorker=function(a,b,c,d){var e=this,g=e._spawnWorker(b,d);if(void 0!==g)g.onmessage=function(a){g.terminate(),e.data[e.data.length]=a.data,c()},g.postMessage(a);else{if(!e.options.synchronous)throw new Error("Workers do not exist and synchronous operation not allowed!");f(function(){e.data[e.data.length]=b(a),c()})}},c.prototype.reduce=function(c,d){function e(){--f,1===g.data.length&&0===f?(g.data=g.data[0],h.resolve(null,g.data)):g.data.length>1&&(++f,g._spawnReduceWorker([g.data[0],g.data[1]],c,e,d),g.data.splice(0,2))
}if(d=a(this.options.env,d||{}),!this.data.length)throw new Error("Can't reduce non-array data");var f=0,g=this,h=new b;return this.operation.then(function(){if(1===g.data.length)h.resolve(null,g.data[0]);else{for(var a=0;a<g.options.maxWorkers&&a<Math.floor(g.data.length/2);++a)++f,g._spawnReduceWorker([g.data[2*a],g.data[2*a+1]],c,e,d);g.data.splice(0,2*a)}}),this.operation=h,this},c.prototype.then=function(a,c){var d=this,e=new b;return this.operation.then(function(){var b=a(d.data);void 0!==b&&(d.data=b),e.resolve(null,d.data)},c),this.operation=e,this},d?module.exports=c:self.Parallel=c}(),function(a,b,c){function d(){var b=a.L;e.noConflict=function(){return a.L=b,this},a.L=e}var e={version:"0.8-dev"};"object"==typeof module&&"object"==typeof module.exports?module.exports=e:"function"==typeof define&&define.amd?define(e):d(),e.Util={extend:function(a){var b,c,d,e;for(c=1,d=arguments.length;d>c;c++){e=arguments[c];for(b in e)a[b]=e[b]}return a},create:Object.create||function(){function a(){}return function(b){return a.prototype=b,new a}}(),bind:function(a,b){var c=Array.prototype.slice;if(a.bind)return a.bind.apply(a,c.call(arguments,1));var d=c.call(arguments,2);return function(){return a.apply(b,d.length?d.concat(c.call(arguments)):arguments)}},stamp:function(a){return a._leaflet_id=a._leaflet_id||++e.Util.lastId,a._leaflet_id},lastId:0,throttle:function(a,b,c){var d,e,f,g;return g=function(){d=!1,e&&(f.apply(c,e),e=!1)},f=function(){d?e=arguments:(a.apply(c,arguments),setTimeout(g,b),d=!0)}},wrapNum:function(a,b,c){var d=b[1],e=b[0],f=d-e;return a===d&&c?a:((a-e)%f+f)%f+e},falseFn:function(){return!1},formatNum:function(a,b){var c=Math.pow(10,b||5);return Math.round(a*c)/c},trim:function(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")},splitWords:function(a){return e.Util.trim(a).split(/\s+/)},setOptions:function(a,b){a.hasOwnProperty("options")||(a.options=a.options?e.Util.create(a.options):{});for(var c in b)a.options[c]=b[c];return a.options},getParamString:function(a,b,c){var d=[];for(var e in a)d.push(encodeURIComponent(c?e.toUpperCase():e)+"="+encodeURIComponent(a[e]));return(b&&-1!==b.indexOf("?")?"&":"?")+d.join("&")},template:function(a,b){return a.replace(e.Util.templateRe,function(a,d){var e=b[d];if(e===c)throw new Error("No value provided for variable "+a);return"function"==typeof e&&(e=e(b)),e})},templateRe:/\{ *([\w_]+) *\}/g,isArray:Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function b(b){return a["webkit"+b]||a["moz"+b]||a["ms"+b]}function c(b){var c=+new Date,e=Math.max(0,16-(c-d));return d=c+e,a.setTimeout(b,e)}var d=0,f=a.requestAnimationFrame||b("RequestAnimationFrame")||c,g=a.cancelAnimationFrame||b("CancelAnimationFrame")||b("CancelRequestAnimationFrame")||function(b){a.clearTimeout(b)};e.Util.requestAnimFrame=function(b,d,g){return g&&f===c?void b.call(d):f.call(a,e.bind(b,d))},e.Util.cancelAnimFrame=function(b){b&&g.call(a,b)}}(),e.extend=e.Util.extend,e.bind=e.Util.bind,e.stamp=e.Util.stamp,e.setOptions=e.Util.setOptions,e.Class=function(){},e.Class.extend=function(a){var b=function(){this.initialize&&this.initialize.apply(this,arguments),this._initHooks.length&&this.callInitHooks()},c=b.__super__=this.prototype,d=e.Util.create(c);d.constructor=b,b.prototype=d;for(var f in this)this.hasOwnProperty(f)&&"prototype"!==f&&(b[f]=this[f]);return a.statics&&(e.extend(b,a.statics),delete a.statics),a.includes&&(e.Util.extend.apply(null,[d].concat(a.includes)),delete a.includes),d.options&&(a.options=e.Util.extend(e.Util.create(d.options),a.options)),e.extend(d,a),d._initHooks=[],d.callInitHooks=function(){if(!this._initHooksCalled){c.callInitHooks&&c.callInitHooks.call(this),this._initHooksCalled=!0;for(var a=0,b=d._initHooks.length;b>a;a++)d._initHooks[a].call(this)}},b},e.Class.include=function(a){e.extend(this.prototype,a)},e.Class.mergeOptions=function(a){e.extend(this.prototype.options,a)},e.Class.addInitHook=function(a){var b=Array.prototype.slice.call(arguments,1),c="function"==typeof a?a:function(){this[a].apply(this,b)};this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c)},e.Evented=e.Class.extend({on:function(a,b,c){if("object"==typeof a)for(var d in a)this._on(d,a[d],b);else{a=e.Util.splitWords(a);for(var f=0,g=a.length;g>f;f++)this._on(a[f],b,c)}return this},off:function(a,b,c){if(a)if("object"==typeof a)for(var d in a)this._off(d,a[d],b);else{a=e.Util.splitWords(a);for(var f=0,g=a.length;g>f;f++)this._off(a[f],b,c)}else delete this._events;return this},_on:function(a,b,c){var d=this._events=this._events||{},f=c&&c!==this&&e.stamp(c);if(f){var g=a+"_idx",h=a+"_len",i=d[g]=d[g]||{},j=e.stamp(b)+"_"+f;i[j]||(i[j]={fn:b,ctx:c},d[h]=(d[h]||0)+1)}else d[a]=d[a]||[],d[a].push({fn:b})},_off:function(a,b,c){var d=this._events,f=a+"_idx",g=a+"_len";if(d){if(!b)return delete d[a],delete d[f],void delete d[g];var h,i,j,k,l,m=c&&c!==this&&e.stamp(c);if(m)l=e.stamp(b)+"_"+m,h=d[f],h&&h[l]&&(k=h[l],delete h[l],d[g]--);else if(h=d[a])for(i=0,j=h.length;j>i;i++)if(h[i].fn===b){k=h[i],h.splice(i,1);break}k&&(k.fn=e.Util.falseFn)}},fire:function(a,b,c){if(!this.listens(a,c))return this;var d=e.Util.extend({},b,{type:a,target:this}),f=this._events;if(f){var g,h,i,j,k=f[a+"_idx"];if(f[a])for(i=f[a].slice(),g=0,h=i.length;h>g;g++)i[g].fn.call(this,d);for(j in k)k[j].fn.call(k[j].ctx,d)}return c&&this._propagateEvent(d),this},listens:function(a,b){var c=this._events;if(c&&(c[a]||c[a+"_len"]))return!0;if(b)for(var d in this._eventParents)if(this._eventParents[d].listens(a,b))return!0;return!1},once:function(a,b,c){if("object"==typeof a){for(var d in a)this.once(d,a[d],b);return this}var f=e.bind(function(){this.off(a,b,c).off(a,f,c)},this);return this.on(a,b,c).on(a,f,c)},addEventParent:function(a){return this._eventParents=this._eventParents||{},this._eventParents[e.stamp(a)]=a,this},removeEventParent:function(a){return this._eventParents&&delete this._eventParents[e.stamp(a)],this},_propagateEvent:function(a){for(var b in this._eventParents)this._eventParents[b].fire(a.type,e.extend({layer:a.target},a),!0)}});var f=e.Evented.prototype;f.addEventListener=f.on,f.removeEventListener=f.clearAllEventListeners=f.off,f.addOneTimeEventListener=f.once,f.fireEvent=f.fire,f.hasEventListeners=f.listens,e.Mixin={Events:f},function(){var c=navigator.userAgent.toLowerCase(),d=b.documentElement,f="ActiveXObject"in a,g=-1!==c.indexOf("webkit"),h=-1!==c.indexOf("phantom"),i=-1!==c.search("android [23]"),j=-1!==c.indexOf("chrome"),k="undefined"!=typeof orientation,l=navigator.msPointerEnabled&&navigator.msMaxTouchPoints&&!a.PointerEvent,m=a.PointerEvent&&navigator.pointerEnabled&&navigator.maxTouchPoints||l,n=f&&"transition"in d.style,o="WebKitCSSMatrix"in a&&"m11"in new a.WebKitCSSMatrix&&!i,p="MozPerspective"in d.style,q="OTransition"in d.style,r="devicePixelRatio"in a&&a.devicePixelRatio>1;if(!r&&"matchMedia"in a){var s=a.matchMedia("(min-resolution:144dpi)");r=s&&s.matches}var t=!a.L_NO_TOUCH&&!h&&(m||"ontouchstart"in a||a.DocumentTouch&&b instanceof a.DocumentTouch);e.Browser={ie:f,ielt9:f&&!b.addEventListener,webkit:g,gecko:-1!==c.indexOf("gecko")&&!g&&!a.opera&&!f,android:-1!==c.indexOf("android"),android23:i,chrome:j,safari:!j&&-1!==c.indexOf("safari"),ie3d:n,webkit3d:o,gecko3d:p,opera3d:q,any3d:!a.L_DISABLE_3D&&(n||o||p||q)&&!h,mobile:k,mobileWebkit:k&&g,mobileWebkit3d:k&&o,mobileOpera:k&&a.opera,touch:!!t,msPointer:!!l,pointer:!!m,retina:!!r}}(),e.Point=function(a,b,c){this.x=c?Math.round(a):a,this.y=c?Math.round(b):b},e.Point.prototype={clone:function(){return new e.Point(this.x,this.y)},add:function(a){return this.clone()._add(e.point(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(e.point(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},distanceTo:function(a){a=e.point(a);var b=a.x-this.x,c=a.y-this.y;return Math.sqrt(b*b+c*c)},equals:function(a){return a=e.point(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=e.point(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+e.Util.formatNum(this.x)+", "+e.Util.formatNum(this.y)+")"}},e.point=function(a,b,d){return a instanceof e.Point?a:e.Util.isArray(a)?new e.Point(a[0],a[1]):a===c||null===a?a:new e.Point(a,b,d)},e.Bounds=function(a,b){if(a)for(var c=b?[a,b]:a,d=0,e=c.length;e>d;d++)this.extend(c[d])},e.Bounds.prototype={extend:function(a){return a=e.point(a),this.min||this.max?(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(a.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(a.y,this.max.y)):(this.min=a.clone(),this.max=a.clone()),this},getCenter:function(a){return new e.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return new e.Point(this.min.x,this.max.y)},getTopRight:function(){return new e.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var b,c;return a="number"==typeof a[0]||a instanceof e.Point?e.point(a):e.bounds(a),a instanceof e.Bounds?(b=a.min,c=a.max):b=c=a,b.x>=this.min.x&&c.x<=this.max.x&&b.y>=this.min.y&&c.y<=this.max.y},intersects:function(a){a=e.bounds(a);var b=this.min,c=this.max,d=a.min,f=a.max,g=f.x>=b.x&&d.x<=c.x,h=f.y>=b.y&&d.y<=c.y;return g&&h},isValid:function(){return!(!this.min||!this.max)}},e.bounds=function(a,b){return!a||a instanceof e.Bounds?a:new e.Bounds(a,b)},e.Transformation=function(a,b,c,d){this._a=a,this._b=b,this._c=c,this._d=d},e.Transformation.prototype={transform:function(a,b){return this._transform(a.clone(),b)},_transform:function(a,b){return b=b||1,a.x=b*(this._a*a.x+this._b),a.y=b*(this._c*a.y+this._d),a},untransform:function(a,b){return b=b||1,new e.Point((a.x/b-this._b)/this._a,(a.y/b-this._d)/this._c)}},e.DomUtil={get:function(a){return"string"==typeof a?b.getElementById(a):a},getStyle:function(a,c){var d=a.style[c]||a.currentStyle&&a.currentStyle[c];if((!d||"auto"===d)&&b.defaultView){var e=b.defaultView.getComputedStyle(a,null);d=e?e[c]:null}return"auto"===d?null:d},create:function(a,c,d){var e=b.createElement(a);return e.className=c,d&&d.appendChild(e),e},remove:function(a){var b=a.parentNode;b&&b.removeChild(a)},empty:function(a){for(;a.firstChild;)a.removeChild(a.firstChild)},toFront:function(a){a.parentNode.appendChild(a)},toBack:function(a){var b=a.parentNode;b.insertBefore(a,b.firstChild)},hasClass:function(a,b){if(a.classList!==c)return a.classList.contains(b);var d=e.DomUtil.getClass(a);return d.length>0&&new RegExp("(^|\\s)"+b+"(\\s|$)").test(d)},addClass:function(a,b){if(a.classList!==c)for(var d=e.Util.splitWords(b),f=0,g=d.length;g>f;f++)a.classList.add(d[f]);else if(!e.DomUtil.hasClass(a,b)){var h=e.DomUtil.getClass(a);e.DomUtil.setClass(a,(h?h+" ":"")+b)}},removeClass:function(a,b){a.classList!==c?a.classList.remove(b):e.DomUtil.setClass(a,e.Util.trim((" "+e.DomUtil.getClass(a)+" ").replace(" "+b+" "," ")))},setClass:function(a,b){a.className.baseVal===c?a.className=b:a.className.baseVal=b},getClass:function(a){return a.className.baseVal===c?a.className:a.className.baseVal},setOpacity:function(a,b){if("opacity"in a.style)a.style.opacity=b;else if("filter"in a.style){var c=!1,d="DXImageTransform.Microsoft.Alpha";try{c=a.filters.item(d)}catch(e){if(1===b)return}b=Math.round(100*b),c?(c.Enabled=100!==b,c.Opacity=b):a.style.filter+=" progid:"+d+"(opacity="+b+")"}},testProp:function(a){for(var c=b.documentElement.style,d=0;d<a.length;d++)if(a[d]in c)return a[d];return!1},setTransform:function(a,b,c){var d=b||new e.Point(0,0);a.style[e.DomUtil.TRANSFORM]="translate3d("+d.x+"px,"+d.y+"px,0)"+(c?" scale("+c+")":"")},setPosition:function(a,b,c){a._leaflet_pos=b,e.Browser.any3d&&!c?e.DomUtil.setTransform(a,b):(a.style.left=b.x+"px",a.style.top=b.y+"px")},getPosition:function(a){return a._leaflet_pos}},function(){e.DomUtil.TRANSFORM=e.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]);var c=e.DomUtil.TRANSITION=e.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);if(e.DomUtil.TRANSITION_END="webkitTransition"===c||"OTransition"===c?c+"End":"transitionend","onselectstart"in b)e.DomUtil.disableTextSelection=function(){e.DomEvent.on(a,"selectstart",e.DomEvent.preventDefault)},e.DomUtil.enableTextSelection=function(){e.DomEvent.off(a,"selectstart",e.DomEvent.preventDefault)};else{var d=e.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);e.DomUtil.disableTextSelection=function(){if(d){var a=b.documentElement.style;this._userSelect=a[d],a[d]="none"}},e.DomUtil.enableTextSelection=function(){d&&(b.documentElement.style[d]=this._userSelect,delete this._userSelect)}}e.DomUtil.disableImageDrag=function(){e.DomEvent.on(a,"dragstart",e.DomEvent.preventDefault)},e.DomUtil.enableImageDrag=function(){e.DomEvent.off(a,"dragstart",e.DomEvent.preventDefault)}}(),e.LatLng=function(a,b,d){if(isNaN(a)||isNaN(b))throw new Error("Invalid LatLng object: ("+a+", "+b+")");this.lat=+a,this.lng=+b,d!==c&&(this.alt=+d)},e.LatLng.prototype={equals:function(a,b){if(!a)return!1;a=e.latLng(a);var d=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return(b===c?1e-9:b)>=d},toString:function(a){return"LatLng("+e.Util.formatNum(this.lat,a)+", "+e.Util.formatNum(this.lng,a)+")"},distanceTo:function(a){return e.CRS.Earth.distance(this,e.latLng(a))},wrap:function(){return e.CRS.Earth.wrapLatLng(this)}},e.latLng=function(a,b){return a instanceof e.LatLng?a:e.Util.isArray(a)&&"object"!=typeof a[0]?3===a.length?new e.LatLng(a[0],a[1],a[2]):new e.LatLng(a[0],a[1]):a===c||null===a?a:"object"==typeof a&&"lat"in a?new e.LatLng(a.lat,"lng"in a?a.lng:a.lon):b===c?null:new e.LatLng(a,b)},e.LatLngBounds=function(a,b){if(a)for(var c=b?[a,b]:a,d=0,e=c.length;e>d;d++)this.extend(c[d])},e.LatLngBounds.prototype={extend:function(a){var b,c,d=this._southWest,f=this._northEast;if(a instanceof e.LatLng)b=a,c=a;else{if(!(a instanceof e.LatLngBounds))return a?this.extend(e.latLng(a)||e.latLngBounds(a)):this;if(b=a._southWest,c=a._northEast,!b||!c)return this}return d||f?(d.lat=Math.min(b.lat,d.lat),d.lng=Math.min(b.lng,d.lng),f.lat=Math.max(c.lat,f.lat),f.lng=Math.max(c.lng,f.lng)):(this._southWest=new e.LatLng(b.lat,b.lng),this._northEast=new e.LatLng(c.lat,c.lng)),this},pad:function(a){var b=this._southWest,c=this._northEast,d=Math.abs(b.lat-c.lat)*a,f=Math.abs(b.lng-c.lng)*a;return new e.LatLngBounds(new e.LatLng(b.lat-d,b.lng-f),new e.LatLng(c.lat+d,c.lng+f))},getCenter:function(){return new e.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new e.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new e.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){a="number"==typeof a[0]||a instanceof e.LatLng?e.latLng(a):e.latLngBounds(a);var b,c,d=this._southWest,f=this._northEast;return a instanceof e.LatLngBounds?(b=a.getSouthWest(),c=a.getNorthEast()):b=c=a,b.lat>=d.lat&&c.lat<=f.lat&&b.lng>=d.lng&&c.lng<=f.lng},intersects:function(a){a=e.latLngBounds(a);var b=this._southWest,c=this._northEast,d=a.getSouthWest(),f=a.getNorthEast(),g=f.lat>=b.lat&&d.lat<=c.lat,h=f.lng>=b.lng&&d.lng<=c.lng;return g&&h},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a){return a?(a=e.latLngBounds(a),this._southWest.equals(a.getSouthWest())&&this._northEast.equals(a.getNorthEast())):!1},isValid:function(){return!(!this._southWest||!this._northEast)}},e.latLngBounds=function(a,b){return!a||a instanceof e.LatLngBounds?a:new e.LatLngBounds(a,b)},e.Projection={},e.Projection.LonLat={project:function(a){return new e.Point(a.lng,a.lat)},unproject:function(a){return new e.LatLng(a.y,a.x)},bounds:e.bounds([-180,-90],[180,90])},e.Projection.SphericalMercator={R:6378137,project:function(a){var b=Math.PI/180,c=1-1e-15,d=Math.max(Math.min(Math.sin(a.lat*b),c),-c);return new e.Point(this.R*a.lng*b,this.R*Math.log((1+d)/(1-d))/2)},unproject:function(a){var b=180/Math.PI;return new e.LatLng((2*Math.atan(Math.exp(a.y/this.R))-Math.PI/2)*b,a.x*b/this.R)},bounds:function(){var a=6378137*Math.PI;return e.bounds([-a,-a],[a,a])}()},e.CRS={latLngToPoint:function(a,b){var c=this.projection.project(a),d=this.scale(b);return this.transformation._transform(c,d)},pointToLatLng:function(a,b){var c=this.scale(b),d=this.transformation.untransform(a,c);return this.projection.unproject(d)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},scale:function(a){return 256*Math.pow(2,a)},getProjectedBounds:function(a){if(this.infinite)return null;var b=this.projection.bounds,c=this.scale(a),d=this.transformation.transform(b.min,c),f=this.transformation.transform(b.max,c);return e.bounds(d,f)},wrapLatLng:function(a){var b=this.wrapLng?e.Util.wrapNum(a.lng,this.wrapLng,!0):a.lng,c=this.wrapLat?e.Util.wrapNum(a.lat,this.wrapLat,!0):a.lat;return e.latLng(c,b)}},e.CRS.Simple=e.extend({},e.CRS,{projection:e.Projection.LonLat,transformation:new e.Transformation(1,0,-1,0),scale:function(a){return Math.pow(2,a)},distance:function(a,b){var c=b.lng-a.lng,d=b.lat-a.lat;return Math.sqrt(c*c+d*d)},infinite:!0}),e.CRS.Earth=e.extend({},e.CRS,{wrapLng:[-180,180],R:6378137,distance:function(a,b){var c=Math.PI/180,d=a.lat*c,e=b.lat*c,f=Math.sin(d)*Math.sin(e)+Math.cos(d)*Math.cos(e)*Math.cos((b.lng-a.lng)*c);return this.R*Math.acos(Math.min(f,1))}}),e.CRS.EPSG3857=e.extend({},e.CRS.Earth,{code:"EPSG:3857",projection:e.Projection.SphericalMercator,transformation:function(){var a=.5/(Math.PI*e.Projection.SphericalMercator.R);return new e.Transformation(a,.5,-a,.5)}()}),e.CRS.EPSG900913=e.extend({},e.CRS.EPSG3857,{code:"EPSG:900913"}),e.CRS.EPSG4326=e.extend({},e.CRS.Earth,{code:"EPSG:4326",projection:e.Projection.LonLat,transformation:new e.Transformation(1/180,1,-1/180,.5)}),e.Map=e.Evented.extend({options:{crs:e.CRS.EPSG3857,fadeAnimation:!0,trackResize:!0,markerZoomAnimation:!0},initialize:function(a,b){b=e.setOptions(this,b),this._initContainer(a),this._initLayout(),this._onResize=e.bind(this._onResize,this),this._initEvents(),b.maxBounds&&this.setMaxBounds(b.maxBounds),b.zoom!==c&&(this._zoom=this._limitZoom(b.zoom)),b.center&&b.zoom!==c&&this.setView(e.latLng(b.center),b.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this.callInitHooks(),this._addLayers(this.options.layers)},setView:function(a,b){return b=b===c?this.getZoom():b,this._resetView(e.latLng(a),this._limitZoom(b)),this},setZoom:function(a,b){return this._loaded?this.setView(this.getCenter(),a,{zoom:b}):(this._zoom=this._limitZoom(a),this)},zoomIn:function(a,b){return this.setZoom(this._zoom+(a||1),b)},zoomOut:function(a,b){return this.setZoom(this._zoom-(a||1),b)},setZoomAround:function(a,b,c){var d=this.getZoomScale(b),f=this.getSize().divideBy(2),g=a instanceof e.Point?a:this.latLngToContainerPoint(a),h=g.subtract(f).multiplyBy(1-1/d),i=this.containerPointToLatLng(f.add(h));return this.setView(i,b,{zoom:c})},fitBounds:function(a,b){b=b||{},a=a.getBounds?a.getBounds():e.latLngBounds(a);var c=e.point(b.paddingTopLeft||b.padding||[0,0]),d=e.point(b.paddingBottomRight||b.padding||[0,0]),f=this.getBoundsZoom(a,!1,c.add(d));f=b.maxZoom?Math.min(b.maxZoom,f):f;var g=d.subtract(c).divideBy(2),h=this.project(a.getSouthWest(),f),i=this.project(a.getNorthEast(),f),j=this.unproject(h.add(i).divideBy(2).add(g),f);return this.setView(j,f,b)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,b){return this.setView(a,this._zoom,{pan:b})},panBy:function(a){return this.fire("movestart"),this._rawPanBy(e.point(a)),this.fire("move"),this.fire("moveend")},setMaxBounds:function(a){return a=e.latLngBounds(a),this.options.maxBounds=a,a?(this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):this.off("moveend",this._panInsideMaxBounds)},panInsideBounds:function(a,b){var c=this.getCenter(),d=this._limitCenter(c,this._zoom,a);return c.equals(d)?this:this.panTo(d,b)},invalidateSize:function(a){if(!this._loaded)return this;a=e.extend({animate:!1,pan:!0},a===!0?{animate:!0}:a);var b=this.getSize();this._sizeChanged=!0,this._initialCenter=null;var c=this.getSize(),d=b.divideBy(2).round(),f=c.divideBy(2).round(),g=d.subtract(f);return g.x||g.y?(a.animate&&a.pan?this.panBy(g):(a.pan&&this._rawPanBy(g),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(e.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:b,newSize:c})):this},addHandler:function(a,b){if(!b)return this;var c=this[a]=new b(this);return this._handlers.push(c),this.options[a]&&c.enable(),this},remove:function(){this._initEvents("off");try{delete this._container._leaflet}catch(a){this._container._leaflet=c}return e.DomUtil.remove(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this._loaded&&this.fire("unload"),this},createPane:function(a,b){var c="leaflet-pane"+(a?" leaflet-"+a.replace("Pane","")+"-pane":""),d=e.DomUtil.create("div",c,b||this._mapPane);return a&&(this._panes[a]=d),d},getCenter:function(){return this._checkIfLoaded(),this._initialCenter&&!this._moved()?this._initialCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),b=this.unproject(a.getBottomLeft()),c=this.unproject(a.getTopRight());return new e.LatLngBounds(b,c)},getMinZoom:function(){return this.options.minZoom===c?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===c?this._layersMaxZoom===c?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,b,c){a=e.latLngBounds(a);var d,f=this.getMinZoom()-(b?1:0),g=this.getMaxZoom(),h=this.getSize(),i=a.getNorthWest(),j=a.getSouthEast(),k=!0;c=e.point(c||[0,0]);do f++,d=this.project(j,f).subtract(this.project(i,f)).add(c),k=b?d.x<h.x||d.y<h.y:h.contains(d);while(k&&g>=f);return k&&b?null:b?f:f-1},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new e.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(){var a=this._getTopLeftPoint();return new e.Bounds(a,a.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._initialTopLeftPoint},getPixelWorldBounds:function(){return this.options.crs.getProjectedBounds(this.getZoom())},getPane:function(a){return"string"==typeof a?this._panes[a]:a},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a){var b=this.options.crs;return b.scale(a)/b.scale(this._zoom)},getScaleZoom:function(a){return this._zoom+Math.log(a)/Math.LN2},project:function(a,b){return b=b===c?this._zoom:b,this.options.crs.latLngToPoint(e.latLng(a),b)},unproject:function(a,b){return b=b===c?this._zoom:b,this.options.crs.pointToLatLng(e.point(a),b)},layerPointToLatLng:function(a){var b=e.point(a).add(this.getPixelOrigin());return this.unproject(b)},latLngToLayerPoint:function(a){var b=this.project(e.latLng(a))._round();return b._subtract(this.getPixelOrigin())},wrapLatLng:function(a){return this.options.crs.wrapLatLng(e.latLng(a))},distance:function(a,b){return this.options.crs.distance(e.latLng(a),e.latLng(b))},containerPointToLayerPoint:function(a){return e.point(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return e.point(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var b=this.containerPointToLayerPoint(e.point(a));return this.layerPointToLatLng(b)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(e.latLng(a)))},mouseEventToContainerPoint:function(a){return e.DomEvent.getMousePosition(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var b=this._container=e.DomUtil.get(a);if(!b)throw new Error("Map container not found.");if(b._leaflet)throw new Error("Map container is already initialized.");b._leaflet=!0},_initLayout:function(){var a=this._container;this._fadeAnimated=this.options.fadeAnimation&&e.Browser.any3d,e.DomUtil.addClass(a,"leaflet-container"+(e.Browser.touch?" leaflet-touch":"")+(e.Browser.retina?" leaflet-retina":"")+(e.Browser.ielt9?" leaflet-oldie":"")+(e.Browser.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var b=e.DomUtil.getStyle(a,"position");"absolute"!==b&&"relative"!==b&&"fixed"!==b&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._mapPane=this.createPane("mapPane",this._container),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(e.DomUtil.addClass(a.markerPane,"leaflet-zoom-hide"),e.DomUtil.addClass(a.shadowPane,"leaflet-zoom-hide"))},_resetView:function(a,b,c,d){var f=this._zoom!==b;d||(this.fire("movestart"),f&&this.fire("zoomstart")),this._zoom=b,this._initialCenter=a,this._initialTopLeftPoint=this._getNewTopLeftPoint(a),c?this._initialTopLeftPoint._add(this._getMapPanePos()):e.DomUtil.setPosition(this._mapPane,new e.Point(0,0));var g=!this._loaded;this._loaded=!0,this.fire("viewreset",{hard:!c}),g&&this.fire("load"),this.fire("move"),(f||d)&&this.fire("zoomend"),this.fire("moveend",{hard:!c})},_rawPanBy:function(a){e.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(b){e.DomEvent&&(b=b||"on",e.DomEvent[b](this._container,"click dblclick mousedown mouseup mouseenter mouseleave mousemove contextmenu",this._handleMouseEvent,this),this.options.trackResize&&e.DomEvent[b](a,"resize",this._onResize,this))},_onResize:function(){e.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=e.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this,!1,this._container)},_handleMouseEvent:function(a){this._loaded&&this._fireMouseEvent(this,a,"mouseenter"===a.type?"mouseover":"mouseleave"===a.type?"mouseout":a.type)},_fireMouseEvent:function(a,b,c,d,f){if(c=c||b.type,!e.DomEvent._skipped(b)){if("click"===c){var g=a.options.draggable===!0?a:this;if(!b._simulated&&(g.dragging&&g.dragging.moved()||this.boxZoom&&this.boxZoom.moved()))return;a.fire("preclick")}if(a.listens(c,d)){"contextmenu"===c&&e.DomEvent.preventDefault(b),("click"===c||"dblclick"===c||"contextmenu"===c)&&e.DomEvent.stopPropagation(b);var h={originalEvent:b,containerPoint:this.mouseEventToContainerPoint(b)};h.layerPoint=this.containerPointToLayerPoint(h.containerPoint),h.latlng=f||this.layerPointToLatLng(h.layerPoint),a.fire(c,h,d)}}},_clearHandlers:function(){for(var a=0,b=this._handlers.length;b>a;a++)this._handlers[a].disable()},whenReady:function(a,b){return this._loaded?a.call(b||this,{target:this}):this.on("load",a,b),this},_getMapPanePos:function(){return e.DomUtil.getPosition(this._mapPane)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(){return this.getPixelOrigin().subtract(this._getMapPanePos())},_getNewTopLeftPoint:function(a,b){var c=this.getSize()._divideBy(2);return this.project(a,b)._subtract(c)._round()},_latLngToNewLayerPoint:function(a,b,c){var d=this._getNewTopLeftPoint(c,b).add(this._getMapPanePos());return this.project(a,b)._subtract(d)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,b,c){if(!c)return a;var d=this.project(a,b),f=this.getSize().divideBy(2),g=new e.Bounds(d.subtract(f),d.add(f)),h=this._getBoundsOffset(g,c,b);return this.unproject(d.add(h),b)},_limitOffset:function(a,b){if(!b)return a;var c=this.getPixelBounds(),d=new e.Bounds(c.min.add(a),c.max.add(a));return a.add(this._getBoundsOffset(d,b))},_getBoundsOffset:function(a,b,c){var d=this.project(b.getNorthWest(),c).subtract(a.min),f=this.project(b.getSouthEast(),c).subtract(a.max),g=this._rebound(d.x,-f.x),h=this._rebound(d.y,-f.y);return new e.Point(g,h)},_rebound:function(a,b){return a+b>0?Math.round(a-b)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(b))},_limitZoom:function(a){var b=this.getMinZoom(),c=this.getMaxZoom();return Math.max(b,Math.min(c,a))}}),e.map=function(a,b){return new e.Map(a,b)},e.Layer=e.Evented.extend({options:{pane:"overlayPane"},addTo:function(a){return a.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){return a&&a.removeLayer(this),this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},_layerAdd:function(a){var b=a.target;b.hasLayer(this)&&(this._map=b,this._zoomAnimated=b._zoomAnimated,this.onAdd(b),this.getAttribution&&this._map.attributionControl&&this._map.attributionControl.addAttribution(this.getAttribution()),this.getEvents&&b.on(this.getEvents(),this),this.fire("add"),b.fire("layeradd",{layer:this}))}}),e.Map.include({addLayer:function(a){var b=e.stamp(a);return this._layers[b]?a:(this._layers[b]=a,a._mapToAdd=this,a.beforeAdd&&a.beforeAdd(this),this.whenReady(a._layerAdd,a),this)},removeLayer:function(a){var b=e.stamp(a);return this._layers[b]?(this._loaded&&a.onRemove(this),a.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(a.getAttribution()),a.getEvents&&this.off(a.getEvents(),a),delete this._layers[b],this._loaded&&(this.fire("layerremove",{layer:a}),a.fire("remove")),a._map=a._mapToAdd=null,this):this},hasLayer:function(a){return!!a&&e.stamp(a)in this._layers},eachLayer:function(a,b){for(var c in this._layers)a.call(b,this._layers[c]);return this},_addLayers:function(a){a=a?e.Util.isArray(a)?a:[a]:[];for(var b=0,c=a.length;c>b;b++)this.addLayer(a[b])},_addZoomLimit:function(a){(isNaN(a.options.maxZoom)||!isNaN(a.options.minZoom))&&(this._zoomBoundLayers[e.stamp(a)]=a,this._updateZoomLevels())},_removeZoomLimit:function(a){var b=e.stamp(a);this._zoomBoundLayers[b]&&(delete this._zoomBoundLayers[b],this._updateZoomLevels())},_updateZoomLevels:function(){var a=1/0,b=-1/0,d=this._getZoomSpan();for(var e in this._zoomBoundLayers){var f=this._zoomBoundLayers[e].options;a=f.minZoom===c?a:Math.min(a,f.minZoom),b=f.maxZoom===c?b:Math.max(b,f.maxZoom)}this._layersMaxZoom=b===-1/0?c:b,this._layersMinZoom=1/0===a?c:a,d!==this._getZoomSpan()&&this.fire("zoomlevelschange")
}}),e.Projection.Mercator={R:6378137,R_MINOR:6356752.314245179,bounds:e.bounds([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(a){var b=Math.PI/180,c=this.R,d=a.lat*b,f=this.R_MINOR/c,g=Math.sqrt(1-f*f),h=g*Math.sin(d),i=Math.tan(Math.PI/4-d/2)/Math.pow((1-h)/(1+h),g/2);return d=-c*Math.log(Math.max(i,1e-10)),new e.Point(a.lng*b*c,d)},unproject:function(a){for(var b,c=180/Math.PI,d=this.R,f=this.R_MINOR/d,g=Math.sqrt(1-f*f),h=Math.exp(-a.y/d),i=Math.PI/2-2*Math.atan(h),j=0,k=.1;15>j&&Math.abs(k)>1e-7;j++)b=g*Math.sin(i),b=Math.pow((1-b)/(1+b),g/2),k=Math.PI/2-2*Math.atan(h*b)-i,i+=k;return new e.LatLng(i*c,a.x*c/d)}},e.CRS.EPSG3395=e.extend({},e.CRS.Earth,{code:"EPSG:3395",projection:e.Projection.Mercator,transformation:function(){var a=.5/(Math.PI*e.Projection.Mercator.R);return new e.Transformation(a,.5,-a,.5)}()}),e.GridLayer=e.Layer.extend({options:{pane:"tilePane",tileSize:256,opacity:1,unloadInvisibleTiles:e.Browser.mobile,updateWhenIdle:e.Browser.mobile,updateInterval:150},initialize:function(a){a=e.setOptions(this,a)},onAdd:function(){this._initContainer(),this.options.updateWhenIdle||(this._update=e.Util.throttle(this._update,this.options.updateInterval,this)),this._reset(),this._update()},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(a){this._clearBgBuffer(),e.DomUtil.remove(this._container),a._removeZoomLimit(this),this._container=null},bringToFront:function(){return this._map&&(e.DomUtil.toFront(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(e.DomUtil.toBack(this._container),this._setAutoZIndex(Math.min)),this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},redraw:function(){return this._map&&(this._reset({hard:!0}),this._update()),this},getEvents:function(){var a={viewreset:this._reset,moveend:this._update};return this.options.updateWhenIdle||(a.move=this._update),this._zoomAnimated&&(a.zoomstart=this._startZoomAnim,a.zoomanim=this._animateZoom,a.zoomend=this._endZoomAnim),a},_updateZIndex:function(){this._container&&this.options.zIndex!==c&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a){for(var b,c=this.getPane().children,d=-a(-1/0,1/0),e=0,f=c.length;f>e;e++)b=c[e].style.zIndex,c[e]!==this._container&&b&&(d=a(d,+b));isFinite(d)&&(this.options.zIndex=d+a(-1,1),this._updateZIndex())},_updateOpacity:function(){var a=this.options.opacity;if(e.Browser.ielt9)for(var b in this._tiles)e.DomUtil.setOpacity(this._tiles[b],a);else e.DomUtil.setOpacity(this._container,a)},_initContainer:function(){if(!this._container){if(this._container=e.DomUtil.create("div","leaflet-layer"),this._updateZIndex(),this._zoomAnimated){var a="leaflet-tile-container leaflet-zoom-animated";this._bgBuffer=e.DomUtil.create("div",a,this._container),this._tileContainer=e.DomUtil.create("div",a,this._container),e.DomUtil.setTransform(this._tileContainer)}else this._tileContainer=this._container;this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container)}},_reset:function(a){for(var b in this._tiles)this.fire("tileunload",{tile:this._tiles[b]});this._abortLoading&&this._abortLoading(),this._tiles={},this._tilesToLoad=0,this._tilesTotal=0,e.DomUtil.empty(this._tileContainer),this._zoomAnimated&&a&&a.hard&&this._clearBgBuffer(),this._tileNumBounds=this._getTileNumBounds(),this._resetWrap()},_resetWrap:function(){var a=this._map,b=a.options.crs;if(!b.infinite){var c=this._getTileSize();b.wrapLng&&(this._wrapLng=[Math.floor(a.project([0,b.wrapLng[0]]).x/c),Math.ceil(a.project([0,b.wrapLng[1]]).x/c)]),b.wrapLat&&(this._wrapLat=[Math.floor(a.project([b.wrapLat[0],0]).y/c),Math.ceil(a.project([b.wrapLat[1],0]).y/c)])}},_getTileSize:function(){return this.options.tileSize},_update:function(){if(this._map){var a=this._map.getPixelBounds(),b=this._map.getZoom(),c=this._getTileSize();if(b>this.options.maxZoom||b<this.options.minZoom)return void this._clearBgBuffer();var d=e.bounds(a.min.divideBy(c).floor(),a.max.divideBy(c).floor());this._addTiles(d),this.options.unloadInvisibleTiles&&this._removeOtherTiles(d)}},_addTiles:function(a){var c,d,f,g=[],h=a.getCenter(),i=this._map.getZoom();for(c=a.min.y;c<=a.max.y;c++)for(d=a.min.x;d<=a.max.x;d++)f=new e.Point(d,c),f.z=i,this._tileCoordsToKey(f)in this._tiles||!this._isValidTile(f)||g.push(f);var j=g.length;if(0!==j){this._tilesToLoad||this.fire("loading"),this._tilesToLoad+=j,this._tilesTotal+=j,g.sort(function(a,b){return a.distanceTo(h)-b.distanceTo(h)});var k=b.createDocumentFragment();for(d=0;j>d;d++)this._addTile(g[d],k);this._tileContainer.appendChild(k)}},_isValidTile:function(a){var b=this._map.options.crs;if(!b.infinite){var c=this._tileNumBounds;if(!b.wrapLng&&(a.x<c.min.x||a.x>c.max.x)||!b.wrapLat&&(a.y<c.min.y||a.y>c.max.y))return!1}if(!this.options.bounds)return!0;var d=this._tileCoordsToBounds(a);return e.latLngBounds(this.options.bounds).intersects(d)},_tileCoordsToBounds:function(a){var b=this._map,c=this._getTileSize(),d=a.multiplyBy(c),f=d.add([c,c]),g=b.wrapLatLng(b.unproject(d,a.z)),h=b.wrapLatLng(b.unproject(f,a.z));return new e.LatLngBounds(g,h)},_tileCoordsToKey:function(a){return a.x+":"+a.y},_keyToTileCoords:function(a){var b=a.split(":"),c=parseInt(b[0],10),d=parseInt(b[1],10);return new e.Point(c,d)},_removeOtherTiles:function(a){for(var b in this._tiles)a.contains(this._keyToTileCoords(b))||this._removeTile(b)},_removeTile:function(a){var b=this._tiles[a];e.DomUtil.remove(b),delete this._tiles[a],this.fire("tileunload",{tile:b})},_initTile:function(a){var b=this._getTileSize();e.DomUtil.addClass(a,"leaflet-tile"),a.style.width=b+"px",a.style.height=b+"px",a.onselectstart=e.Util.falseFn,a.onmousemove=e.Util.falseFn,e.Browser.ielt9&&this.options.opacity<1&&e.DomUtil.setOpacity(a,this.options.opacity),e.Browser.android&&!e.Browser.android23&&(a.style.WebkitBackfaceVisibility="hidden")},_addTile:function(a,b){var c=this._getTilePos(a);this._wrapCoords(a);var d=this.createTile(a,e.bind(this._tileReady,this));this._initTile(d),this.createTile.length<2&&setTimeout(e.bind(this._tileReady,this,null,d),0),e.DomUtil.setPosition(d,c,!0),this._tiles[this._tileCoordsToKey(a)]=d,b.appendChild(d),this.fire("tileloadstart",{tile:d})},_tileReady:function(a,b){a&&this.fire("tileerror",{error:a,tile:b}),e.DomUtil.addClass(b,"leaflet-tile-loaded"),this.fire("tileload",{tile:b}),this._tilesToLoad--,0===this._tilesToLoad&&this._visibleTilesReady()},_visibleTilesReady:function(){this.fire("load"),this._zoomAnimated&&(clearTimeout(this._clearBgBufferTimer),this._clearBgBufferTimer=setTimeout(e.bind(this._clearBgBuffer,this),300))},_getTilePos:function(a){return a.multiplyBy(this._getTileSize()).subtract(this._map.getPixelOrigin())},_wrapCoords:function(a){a.x=this._wrapLng?e.Util.wrapNum(a.x,this._wrapLng):a.x,a.y=this._wrapLat?e.Util.wrapNum(a.y,this._wrapLat):a.y},_getTileNumBounds:function(){var a=this._map.getPixelWorldBounds(),b=this._getTileSize();return a?e.bounds(a.min.divideBy(b).floor(),a.max.divideBy(b).ceil().subtract([1,1])):null},_startZoomAnim:function(){this._prepareBgBuffer(),this._prevTranslate=this._translate||new e.Point(0,0),this._prevScale=this._scale},_animateZoom:function(a){this._translate=this._prevTranslate.multiplyBy(a.scale).add(a.origin.multiplyBy(1-a.scale)),this._scale=this._prevScale*a.scale,e.DomUtil.setTransform(this._bgBuffer,this._translate,this._scale)},_endZoomAnim:function(){var a=this._tileContainer;a.style.visibility="",e.DomUtil.toFront(a)},_clearBgBuffer:function(){var a=this._map,b=this._bgBuffer;a&&!a._animatingZoom&&!a.touchZoom._zooming&&b&&(e.DomUtil.empty(b),e.DomUtil.setTransform(b))},_prepareBgBuffer:function(){var a=this._tileContainer,b=this._bgBuffer;return this._abortLoading&&this._abortLoading(),this._tilesToLoad/this._tilesTotal>.5?void(a.style.visibility="hidden"):(b.style.visibility="hidden",e.DomUtil.setTransform(b),this._tileContainer=b,this._bgBuffer=a,this._translate=new e.Point(0,0),this._scale=1,void clearTimeout(this._clearBgBufferTimer))}}),e.gridLayer=function(a){return new e.GridLayer(a)},e.TileLayer=e.GridLayer.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",zoomOffset:0},initialize:function(a,b){this._url=a,b=e.setOptions(this,b),b.detectRetina&&e.Browser.retina&&b.maxZoom>0&&(b.tileSize=Math.floor(b.tileSize/2),b.zoomOffset++,b.minZoom=Math.max(0,b.minZoom),b.maxZoom--),"string"==typeof b.subdomains&&(b.subdomains=b.subdomains.split(""))},setUrl:function(a,b){return this._url=a,b||this.redraw(),this},createTile:function(a,c){var d=b.createElement("img");return d.onload=e.bind(this._tileOnLoad,this,c,d),d.onerror=e.bind(this._tileOnError,this,c,d),this.options.crossOrigin&&(d.crossOrigin=""),d.alt="",d.src=this.getTileUrl(a),d},getTileUrl:function(a){return e.Util.template(this._url,e.extend({r:this.options.detectRetina&&e.Browser.retina&&this.options.maxZoom>0?"@2x":"",s:this._getSubdomain(a),x:a.x,y:this.options.tms?this._tileNumBounds.max.y-a.y:a.y,z:this._getZoomForUrl()},this.options))},_tileOnLoad:function(a,b){a(null,b)},_tileOnError:function(a,b,c){var d=this.options.errorTileUrl;d&&(b.src=d),a(c,b)},_getTileSize:function(){var a=this._map,b=this.options,c=a.getZoom()+b.zoomOffset,d=b.maxNativeZoom;return d&&c>d?Math.round(a.getZoomScale(c)/a.getZoomScale(d)*b.tileSize):b.tileSize},_removeTile:function(a){var b=this._tiles[a];e.GridLayer.prototype._removeTile.call(this,a),e.Browser.android||(b.onload=null,b.src=e.Util.emptyImageUrl)},_getZoomForUrl:function(){var a=this.options,b=this._map.getZoom();return a.zoomReverse&&(b=a.maxZoom-b),b+=a.zoomOffset,a.maxNativeZoom?Math.min(b,a.maxNativeZoom):b},_getSubdomain:function(a){var b=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[b]},_abortLoading:function(){var a,b;for(a in this._tiles)b=this._tiles[a],b.onload=e.Util.falseFn,b.onerror=e.Util.falseFn,b.complete||(b.src=e.Util.emptyImageUrl,e.DomUtil.remove(b))}}),e.tileLayer=function(a,b){return new e.TileLayer(a,b)},e.TileLayer.WMS=e.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},initialize:function(a,b){this._url=a;var c=e.extend({},this.defaultWmsParams);for(var d in b)this.options.hasOwnProperty(d)||"crs"===d||"uppercase"===d||(c[d]=b[d]);b=e.setOptions(this,b),c.width=c.height=b.tileSize*(b.detectRetina&&e.Browser.retina?2:1),this.wmsParams=c},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._uppercase=this.options.uppercase||!1,this._wmsVersion=parseFloat(this.wmsParams.version);var b=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[b]=this._crs.code,e.TileLayer.prototype.onAdd.call(this,a)},getTileUrl:function(a){var b=this._tileCoordsToBounds(a),c=this._crs.project(b.getNorthWest()),d=this._crs.project(b.getSouthEast()),f=(this._wmsVersion>=1.3&&this._crs===e.CRS.EPSG4326?[d.y,c.x,c.y,d.x]:[c.x,d.y,d.x,c.y]).join(","),g=e.TileLayer.prototype.getTileUrl.call(this,a);return g+e.Util.getParamString(this.wmsParams,g,this._uppercase)+(this._uppercase?"&BBOX=":"&bbox=")+f},setParams:function(a,b){return e.extend(this.wmsParams,a),b||this.redraw(),this}}),e.tileLayer.wms=function(a,b){return new e.TileLayer.WMS(a,b)},e.ImageOverlay=e.Layer.extend({options:{opacity:1,alt:""},initialize:function(a,b,c){this._url=a,this._bounds=e.latLngBounds(b),e.setOptions(this,c)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){e.DomUtil.remove(this._image)},setOpacity:function(a){return this.options.opacity=a,this._image&&this._updateOpacity(),this},bringToFront:function(){return this._map&&e.DomUtil.toFront(this._image),this},bringToBack:function(){return this._map&&e.DomUtil.toBack(this._image),this},setUrl:function(a){return this._url=a,this._image&&(this._image.src=a),this},getAttribution:function(){return this.options.attribution},getEvents:function(){var a={viewreset:this._reset};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},getBounds:function(){return this._bounds},_initImage:function(){var a=this._image=e.DomUtil.create("img","leaflet-image-layer "+(this._zoomAnimated?"leaflet-zoom-animated":""));a.onselectstart=e.Util.falseFn,a.onmousemove=e.Util.falseFn,a.onload=e.bind(this.fire,this,"load"),a.src=this._url,a.alt=this.options.alt},_animateZoom:function(a){var b=this._map._latLngToNewLayerPoint(this._bounds.getNorthWest(),a.zoom,a.center),c=this._map._latLngToNewLayerPoint(this._bounds.getSouthEast(),a.zoom,a.center).subtract(b),d=b.add(c._multiplyBy((1-1/a.scale)/2));e.DomUtil.setTransform(this._image,d,a.scale)},_reset:function(){var a=this._image,b=new e.Bounds(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),c=b.getSize();e.DomUtil.setPosition(a,b.min),a.style.width=c.x+"px",a.style.height=c.y+"px"},_updateOpacity:function(){e.DomUtil.setOpacity(this._image,this.options.opacity)}}),e.imageOverlay=function(a,b,c){return new e.ImageOverlay(a,b,c)},e.Icon=e.Class.extend({initialize:function(a){e.setOptions(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,b){var c=this._getIconUrl(a);if(!c){if("icon"===a)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var d=this._createImg(c,b&&"IMG"===b.tagName?b:null);return this._setIconStyles(d,a),d},_setIconStyles:function(a,b){var c=this.options,d=e.point(c[b+"Size"]),f=e.point("shadow"===b&&c.shadowAnchor||c.iconAnchor||d&&d.divideBy(2,!0));a.className="leaflet-marker-"+b+" "+(c.className||""),f&&(a.style.marginLeft=-f.x+"px",a.style.marginTop=-f.y+"px"),d&&(a.style.width=d.x+"px",a.style.height=d.y+"px")},_createImg:function(a,c){return c=c||b.createElement("img"),c.src=a,c},_getIconUrl:function(a){return e.Browser.retina&&this.options[a+"RetinaUrl"]||this.options[a+"Url"]}}),e.icon=function(a){return new e.Icon(a)},e.Icon.Default=e.Icon.extend({options:{iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]},_getIconUrl:function(a){var b=a+"Url";if(this.options[b])return this.options[b];var c=e.Icon.Default.imagePath;if(!c)throw new Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.");return c+"/marker-"+a+(e.Browser.retina&&"icon"===a?"-2x":"")+".png"}}),e.Icon.Default.imagePath=function(){var a,c,d,e,f=b.getElementsByTagName("script"),g=/[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/;for(a=0,c=f.length;c>a;a++)if(d=f[a].src,d.match(g))return e=d.split(g)[0],(e?e+"/":"")+"images"}(),e.Marker=e.Layer.extend({options:{pane:"markerPane",icon:new e.Icon.Default,interactive:!0,keyboard:!0,zIndexOffset:0,opacity:1,riseOffset:250},initialize:function(a,b){e.setOptions(this,b),this._latlng=e.latLng(a)},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation,this._initIcon(),this.update()},onRemove:function(){this.dragging&&this.dragging.disable(),this._removeIcon(),this._removeShadow()},getEvents:function(){var a={viewreset:this.update};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},getLatLng:function(){return this._latlng},setLatLng:function(a){var b=this._latlng;return this._latlng=e.latLng(a),this.update(),this.fire("move",{oldLatLng:b,latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update()},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},update:function(){if(this._icon){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,b="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),c=a.icon.createIcon(this._icon),d=!1;c!==this._icon&&(this._icon&&this._removeIcon(),d=!0,a.title&&(c.title=a.title),a.alt&&(c.alt=a.alt)),e.DomUtil.addClass(c,b),a.keyboard&&(c.tabIndex="0"),this._icon=c,this._initInteraction(),a.riseOnHover&&e.DomEvent.on(c,{mouseover:this._bringToFront,mouseout:this._resetZIndex},this);var f=a.icon.createShadow(this._shadow),g=!1;f!==this._shadow&&(this._removeShadow(),g=!0),f&&e.DomUtil.addClass(f,b),this._shadow=f,a.opacity<1&&this._updateOpacity(),d&&this.getPane().appendChild(this._icon),f&&g&&this.getPane("shadowPane").appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&e.DomEvent.off(this._icon,{mouseover:this._bringToFront,mouseout:this._resetZIndex},this),e.DomUtil.remove(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&e.DomUtil.remove(this._shadow),this._shadow=null},_setPos:function(a){e.DomUtil.setPosition(this._icon,a),this._shadow&&e.DomUtil.setPosition(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon.style.zIndex=this._zIndex+a},_animateZoom:function(a){var b=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(b)},_initInteraction:function(){this.options.interactive&&(e.DomUtil.addClass(this._icon,"leaflet-interactive"),e.DomEvent.on(this._icon,"click dblclick mousedown mouseup mouseover mousemove mouseout contextmenu keypress",this._fireMouseEvent,this),e.Handler.MarkerDrag&&(this.dragging&&this.dragging.disable(),this.dragging=new e.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable()))},_fireMouseEvent:function(a,b){"mousedown"===a.type&&e.DomEvent.preventDefault(a),"keypress"===a.type&&13===a.keyCode&&(b="click"),this._map&&this._map._fireMouseEvent(this,a,b,!0,this._latlng)},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var a=this.options.opacity;e.DomUtil.setOpacity(this._icon,a),this._shadow&&e.DomUtil.setOpacity(this._shadow,a)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}}),e.marker=function(a,b){return new e.Marker(a,b)},e.DivIcon=e.Icon.extend({options:{iconSize:[12,12],className:"leaflet-div-icon",html:!1},createIcon:function(a){var c=a&&"DIV"===a.tagName?a:b.createElement("div"),d=this.options;return c.innerHTML=d.html!==!1?d.html:"",d.bgPos&&(c.style.backgroundPosition=-d.bgPos.x+"px "+-d.bgPos.y+"px"),this._setIconStyles(c,"icon"),c},createShadow:function(){return null}}),e.divIcon=function(a){return new e.DivIcon(a)},e.Map.mergeOptions({closePopupOnClick:!0}),e.Popup=e.Layer.extend({options:{pane:"popupPane",minWidth:50,maxWidth:300,offset:[0,7],autoPan:!0,autoPanPadding:[5,5],closeButton:!0,zoomAnimation:!0},initialize:function(a,b){e.setOptions(this,a),this._source=b},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&this.options.zoomAnimation,this._container||this._initLayout(),a._fadeAnimated&&e.DomUtil.setOpacity(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),a._fadeAnimated&&e.DomUtil.setOpacity(this._container,1),a.fire("popupopen",{popup:this}),this._source&&this._source.fire("popupopen",{popup:this},!0)},openOn:function(a){return a.openPopup(this),this},onRemove:function(a){a._fadeAnimated?(e.DomUtil.setOpacity(this._container,0),this._removeTimeout=setTimeout(e.bind(e.DomUtil.remove,e.DomUtil,this._container),200)):e.DomUtil.remove(this._container),a.fire("popupclose",{popup:this}),this._source&&this._source.fire("popupclose",{popup:this},!0)},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=e.latLng(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var a={viewreset:this._updatePosition},b=this.options;return this._zoomAnimated&&(a.zoomanim=this._animateZoom),("closeOnClick"in b?b.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this._close),b.keepInView&&(a.moveend=this._adjustPan),a},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var a="leaflet-popup",b=this._container=e.DomUtil.create("div",a+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"));if(this.options.closeButton){var c=this._closeButton=e.DomUtil.create("a",a+"-close-button",b);c.href="#close",c.innerHTML="&#215;",e.DomEvent.on(c,"click",this._onCloseButtonClick,this)}var d=this._wrapper=e.DomUtil.create("div",a+"-content-wrapper",b);this._contentNode=e.DomUtil.create("div",a+"-content",d),e.DomEvent.disableClickPropagation(d).disableScrollPropagation(this._contentNode).on(d,"contextmenu",e.DomEvent.stopPropagation),this._tipContainer=e.DomUtil.create("div",a+"-tip-container",b),this._tip=e.DomUtil.create("div",a+"-tip",this._tipContainer)},_updateContent:function(){if(this._content){var a=this._contentNode;if("string"==typeof this._content)a.innerHTML=this._content;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(this._content)}this.fire("contentupdate")}},_updateLayout:function(){var a=this._contentNode,b=a.style;b.width="",b.whiteSpace="nowrap";var c=a.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),b.width=c+1+"px",b.whiteSpace="",b.height="";var d=a.offsetHeight,f=this.options.maxHeight,g="leaflet-popup-scrolled";f&&d>f?(b.height=f+"px",e.DomUtil.addClass(a,g)):e.DomUtil.removeClass(a,g),this._containerWidth=this._container.offsetWidth},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),b=e.point(this.options.offset);this._zoomAnimated?e.DomUtil.setPosition(this._container,a):b=b.add(a);var c=this._containerBottom=-b.y,d=this._containerLeft=-Math.round(this._containerWidth/2)+b.x;this._container.style.bottom=c+"px",this._container.style.left=d+"px"}},_animateZoom:function(a){var b=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);e.DomUtil.setPosition(this._container,b)},_adjustPan:function(){if(this.options.autoPan){var a=this._map,b=this._container.offsetHeight,c=this._containerWidth,d=new e.Point(this._containerLeft,-b-this._containerBottom);this._zoomAnimated&&d._add(e.DomUtil.getPosition(this._container));var f=a.layerPointToContainerPoint(d),g=e.point(this.options.autoPanPadding),h=e.point(this.options.autoPanPaddingTopLeft||g),i=e.point(this.options.autoPanPaddingBottomRight||g),j=a.getSize(),k=0,l=0;f.x+c+i.x>j.x&&(k=f.x+c-j.x+i.x),f.x-k-h.x<0&&(k=f.x-h.x),f.y+b+i.y>j.y&&(l=f.y+b-j.y+i.y),f.y-l-h.y<0&&(l=f.y-h.y),(k||l)&&a.fire("autopanstart").panBy([k,l])}},_onCloseButtonClick:function(a){this._close(),e.DomEvent.stop(a)}}),e.popup=function(a,b){return new e.Popup(a,b)},e.Map.include({openPopup:function(a,b,c){if(!(a instanceof e.Popup)){var d=a;a=new e.Popup(c).setContent(d)}return b&&a.setLatLng(b),this.hasLayer(a)?this:(this.closePopup(),this._popup=a,this.addLayer(a))},closePopup:function(a){return a&&a!==this._popup||(a=this._popup,this._popup=null),a&&this.removeLayer(a),this}}),e.Layer.include({bindPopup:function(a,b){return a instanceof e.Popup?(this._popup=a,a._source=this):((!this._popup||b)&&(this._popup=new e.Popup(b,this)),this._popup.setContent(a)),this._popupHandlersAdded||(this.on({click:this._openPopup,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.on({click:this._openPopup,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(a){return this._popup&&this._map&&this._map.openPopup(this._popup,a||this._latlng||this.getCenter()),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(){return this._popup&&(this._popup._map?this.closePopup():this.openPopup()),this},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},getPopup:function(){return this._popup},_openPopup:function(a){this._map.openPopup(this._popup,a.latlng)},_movePopup:function(a){this._popup.setLatLng(a.latlng)}}),e.Marker.include({bindPopup:function(a,b){var c=e.point(this.options.icon.options.popupAnchor||[0,0]).add(e.Popup.prototype.options.offset);return b=e.extend({offset:c},b),e.Layer.prototype.bindPopup.call(this,a,b)},_openPopup:e.Layer.prototype.togglePopup}),e.LayerGroup=e.Layer.extend({initialize:function(a){this._layers={};var b,c;if(a)for(b=0,c=a.length;c>b;b++)this.addLayer(a[b])},addLayer:function(a){var b=this.getLayerId(a);return this._layers[b]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var b=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[b]&&this._map.removeLayer(this._layers[b]),delete this._layers[b],this},hasLayer:function(a){return!!a&&(a in this._layers||this.getLayerId(a)in this._layers)},clearLayers:function(){for(var a in this._layers)this.removeLayer(this._layers[a]);return this},invoke:function(a){var b,c,d=Array.prototype.slice.call(arguments,1);for(b in this._layers)c=this._layers[b],c[a]&&c[a].apply(c,d);return this},onAdd:function(a){for(var b in this._layers)a.addLayer(this._layers[b])},onRemove:function(a){for(var b in this._layers)a.removeLayer(this._layers[b])},eachLayer:function(a,b){for(var c in this._layers)a.call(b,this._layers[c]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];for(var b in this._layers)a.push(this._layers[b]);return a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return e.stamp(a)}}),e.layerGroup=function(a){return new e.LayerGroup(a)},e.FeatureGroup=e.LayerGroup.extend({addLayer:function(a){return this.hasLayer(a)?this:(a.addEventParent(this),e.LayerGroup.prototype.addLayer.call(this,a),this._popupContent&&a.bindPopup&&a.bindPopup(this._popupContent,this._popupOptions),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.removeEventParent(this),e.LayerGroup.prototype.removeLayer.call(this,a),this._popupContent&&this.invoke("unbindPopup"),this.fire("layerremove",{layer:a})):this},bindPopup:function(a,b){return this._popupContent=a,this._popupOptions=b,this.invoke("bindPopup",a,b)},openPopup:function(a){for(var b in this._layers){this._layers[b].openPopup(a);break}return this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new e.LatLngBounds;return this.eachLayer(function(b){a.extend(b.getBounds?b.getBounds():b.getLatLng())}),a}}),e.featureGroup=function(a){return new e.FeatureGroup(a)},e.Renderer=e.Layer.extend({options:{padding:0},initialize:function(a){e.setOptions(this,a),e.stamp(this)},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&e.DomUtil.addClass(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update()},onRemove:function(){e.DomUtil.remove(this._container)},getEvents:function(){var a={moveend:this._update};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},_animateZoom:function(a){var b=a.origin.subtract(this._map._getCenterLayerPoint()),c=this._bounds.min.add(b.multiplyBy(1-a.scale));e.DomUtil.setTransform(this._container,c,a.scale)},_update:function(){var a=this.options.padding,b=this._map.getSize(),c=this._map.containerPointToLayerPoint(b.multiplyBy(-a)).round();this._bounds=new e.Bounds(c,c.add(b.multiplyBy(1+2*a)).round())}}),e.Map.include({getRenderer:function(a){var b=a.options.renderer||this.options.renderer||this._renderer;return b||(b=this._renderer=e.SVG&&e.svg()||e.Canvas&&e.canvas()),this.hasLayer(b)||this.addLayer(b),b}}),e.Path=e.Layer.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",fillOpacity:.2,interactive:!0},onAdd:function(){this._renderer=this._map.getRenderer(this),this._renderer._initPath(this),this._project(),this._update(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},getEvents:function(){return{viewreset:this._project,moveend:this._update}},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(a){return e.setOptions(this,a),this._renderer&&this._renderer._updateStyle(this),this},bringToFront:function(){return this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer._bringToBack(this),this},_fireMouseEvent:function(a,b){this._map._fireMouseEvent(this,a,b,!0)},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(e.Browser.touch?10:0)}}),e.LineUtil={simplify:function(a,b){if(!b||!a.length)return a.slice();var c=b*b;return a=this._reducePoints(a,c),a=this._simplifyDP(a,c)},pointToSegmentDistance:function(a,b,c){return Math.sqrt(this._sqClosestPointOnSegment(a,b,c,!0))},closestPointOnSegment:function(a,b,c){return this._sqClosestPointOnSegment(a,b,c)},_simplifyDP:function(a,b){var d=a.length,e=typeof Uint8Array!=c+""?Uint8Array:Array,f=new e(d);f[0]=f[d-1]=1,this._simplifyDPStep(a,f,b,0,d-1);var g,h=[];for(g=0;d>g;g++)f[g]&&h.push(a[g]);return h},_simplifyDPStep:function(a,b,c,d,e){var f,g,h,i=0;for(g=d+1;e-1>=g;g++)h=this._sqClosestPointOnSegment(a[g],a[d],a[e],!0),h>i&&(f=g,i=h);i>c&&(b[f]=1,this._simplifyDPStep(a,b,c,d,f),this._simplifyDPStep(a,b,c,f,e))},_reducePoints:function(a,b){for(var c=[a[0]],d=1,e=0,f=a.length;f>d;d++)this._sqDist(a[d],a[e])>b&&(c.push(a[d]),e=d);return f-1>e&&c.push(a[f-1]),c},clipSegment:function(a,b,c,d){var e,f,g,h=d?this._lastCode:this._getBitCode(a,c),i=this._getBitCode(b,c);for(this._lastCode=i;;){if(!(h|i))return[a,b];if(h&i)return!1;e=h||i,f=this._getEdgeIntersection(a,b,e,c),g=this._getBitCode(f,c),e===h?(a=f,h=g):(b=f,i=g)}},_getEdgeIntersection:function(a,b,c,d){var f,g,h=b.x-a.x,i=b.y-a.y,j=d.min,k=d.max;return 8&c?(f=a.x+h*(k.y-a.y)/i,g=k.y):4&c?(f=a.x+h*(j.y-a.y)/i,g=j.y):2&c?(f=k.x,g=a.y+i*(k.x-a.x)/h):1&c&&(f=j.x,g=a.y+i*(j.x-a.x)/h),new e.Point(f,g,!0)},_getBitCode:function(a,b){var c=0;return a.x<b.min.x?c|=1:a.x>b.max.x&&(c|=2),a.y<b.min.y?c|=4:a.y>b.max.y&&(c|=8),c},_sqDist:function(a,b){var c=b.x-a.x,d=b.y-a.y;return c*c+d*d},_sqClosestPointOnSegment:function(a,b,c,d){var f,g=b.x,h=b.y,i=c.x-g,j=c.y-h,k=i*i+j*j;return k>0&&(f=((a.x-g)*i+(a.y-h)*j)/k,f>1?(g=c.x,h=c.y):f>0&&(g+=i*f,h+=j*f)),i=a.x-g,j=a.y-h,d?i*i+j*j:new e.Point(g,h)}},e.Polyline=e.Path.extend({options:{smoothFactor:1},initialize:function(a,b){e.setOptions(this,b),this._setLatLngs(a)},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._setLatLngs(a),this.redraw()},addLatLng:function(a){return a=e.latLng(a),this._latlngs.push(a),this._bounds.extend(a),this.redraw()},spliceLatLngs:function(){var a=[].splice.apply(this._latlngs,arguments);return this._setLatLngs(this._latlngs),this.redraw(),a},closestLayerPoint:function(a){for(var b,c,d=1/0,f=null,g=e.LineUtil._sqClosestPointOnSegment,h=0,i=this._parts.length;i>h;h++)for(var j=this._parts[h],k=1,l=j.length;l>k;k++){b=j[k-1],c=j[k];var m=g(a,b,c,!0);d>m&&(d=m,f=g(a,b,c))}return f&&(f.distance=Math.sqrt(d)),f},getCenter:function(){var a,b,c,d,e,f,g,h=this._rings[0],i=h.length;for(a=0,b=0;i-1>a;a++)b+=h[a].distanceTo(h[a+1])/2;for(a=0,d=0;i-1>a;a++)if(e=h[a],f=h[a+1],c=e.distanceTo(f),d+=c,d>b)return g=(d-b)/c,this._map.layerPointToLatLng([f.x-g*(f.x-e.x),f.y-g*(f.y-e.y)])},getBounds:function(){return this._bounds},_setLatLngs:function(a){this._bounds=new e.LatLngBounds,this._latlngs=this._convertLatLngs(a)
},_convertLatLngs:function(a){for(var b=[],c=this._flat(a),d=0,f=a.length;f>d;d++)c?(b[d]=e.latLng(a[d]),this._bounds.extend(b[d])):b[d]=this._convertLatLngs(a[d]);return b},_flat:function(a){return!e.Util.isArray(a[0])||"object"!=typeof a[0][0]},_project:function(){this._rings=[],this._projectLatlngs(this._latlngs,this._rings);var a=this._clickTolerance(),b=new e.Point(a,-a);this._latlngs.length&&(this._pxBounds=new e.Bounds(this._map.latLngToLayerPoint(this._bounds.getSouthWest())._subtract(b),this._map.latLngToLayerPoint(this._bounds.getNorthEast())._add(b)))},_projectLatlngs:function(a,b){var c,d,f=a[0]instanceof e.LatLng,g=a.length;if(f){for(d=[],c=0;g>c;c++)d[c]=this._map.latLngToLayerPoint(a[c]);b.push(d)}else for(c=0;g>c;c++)this._projectLatlngs(a[c],b)},_clipPoints:function(){if(this.options.noClip)return void(this._parts=this._rings);this._parts=[];var a,b,c,d,f,g,h,i=this._parts,j=this._renderer._bounds;for(a=0,c=0,d=this._rings.length;d>a;a++)for(h=this._rings[a],b=0,f=h.length;f-1>b;b++)g=e.LineUtil.clipSegment(h[b],h[b+1],j,b),g&&(i[c]=i[c]||[],i[c].push(g[0]),(g[1]!==h[b+1]||b===f-2)&&(i[c].push(g[1]),c++))},_simplifyPoints:function(){for(var a=this._parts,b=this.options.smoothFactor,c=0,d=a.length;d>c;c++)a[c]=e.LineUtil.simplify(a[c],b)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)}}),e.polyline=function(a,b){return new e.Polyline(a,b)},e.PolyUtil={},e.PolyUtil.clipPolygon=function(a,b){var c,d,f,g,h,i,j,k,l,m=[1,4,2,8],n=e.LineUtil;for(d=0,j=a.length;j>d;d++)a[d]._code=n._getBitCode(a[d],b);for(g=0;4>g;g++){for(k=m[g],c=[],d=0,j=a.length,f=j-1;j>d;f=d++)h=a[d],i=a[f],h._code&k?i._code&k||(l=n._getEdgeIntersection(i,h,k,b),l._code=n._getBitCode(l,b),c.push(l)):(i._code&k&&(l=n._getEdgeIntersection(i,h,k,b),l._code=n._getBitCode(l,b),c.push(l)),c.push(h));a=c}return a},e.Polygon=e.Polyline.extend({options:{fill:!0},getCenter:function(){var a,b,c,d,e,f,g,h,i,j=this._rings[0];for(g=h=i=0,a=0,c=j.length,b=c-1;c>a;b=a++)d=j[a],e=j[b],f=d.y*e.x-e.y*d.x,h+=(d.x+e.x)*f,i+=(d.y+e.y)*f,g+=3*f;return this._map.layerPointToLatLng([h/g,i/g])},_convertLatLngs:function(a){var b=e.Polyline.prototype._convertLatLngs.call(this,a),c=b.length;return c>=2&&b[0]instanceof e.LatLng&&b[0].equals(b[c-1])&&b.pop(),b},_clipPoints:function(){if(this.options.noClip)return void(this._parts=this._rings);var a=this._renderer._bounds,b=this.options.weight,c=new e.Point(b,b);a=new e.Bounds(a.min.subtract(c),a.max.add(c)),this._parts=[];for(var d,f=0,g=this._rings.length;g>f;f++)d=e.PolyUtil.clipPolygon(this._rings[f],a),d.length&&this._parts.push(d)},_updatePath:function(){this._renderer._updatePoly(this,!0)}}),e.polygon=function(a,b){return new e.Polygon(a,b)},e.Rectangle=e.Polygon.extend({initialize:function(a,b){e.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(a),b)},setBounds:function(a){this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=e.latLngBounds(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}}),e.rectangle=function(a,b){return new e.Rectangle(a,b)},e.CircleMarker=e.Path.extend({options:{fill:!0,radius:10},initialize:function(a,b){e.setOptions(this,b),this._latlng=e.latLng(a),this._radius=this.options.radius},setLatLng:function(a){return this._latlng=e.latLng(a),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius},setStyle:function(a){var b=a&&a.radius||this._radius;return e.Path.prototype.setStyle.call(this,a),this.setRadius(b),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var a=this._radius,b=this._radiusY||a,c=this._clickTolerance(),d=[a+c,b+c];this._pxBounds=new e.Bounds(this._point.subtract(d),this._point.add(d))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)}}),e.circleMarker=function(a,b){return new e.CircleMarker(a,b)},e.Circle=e.CircleMarker.extend({initialize:function(a,b,c){e.setOptions(this,c),this._latlng=e.latLng(a),this._mRadius=b},setRadius:function(a){return this._mRadius=a,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var a=[this._radius,this._radiusY];return new e.LatLngBounds(this._map.layerPointToLatLng(this._point.subtract(a)),this._map.layerPointToLatLng(this._point.add(a)))},setStyle:e.Path.prototype.setStyle,_project:function(){var a=this._latlng.lng,b=this._latlng.lat,c=this._map,d=c.options.crs;if(d.distance===e.CRS.Earth.distance){var f=Math.PI/180,g=this._mRadius/e.CRS.Earth.R/f,h=c.project([b+g,a]),i=c.project([b-g,a]),j=h.add(i).divideBy(2),k=c.unproject(j).lat,l=Math.acos((Math.cos(g*f)-Math.sin(b*f)*Math.sin(k*f))/(Math.cos(b*f)*Math.cos(k*f)))/f;this._point=j.subtract(c.getPixelOrigin()),this._radius=isNaN(l)?0:Math.max(Math.round(j.x-c.project([k,a-l]).x),1),this._radiusY=Math.max(Math.round(j.y-h.y),1)}else{var m=d.unproject(d.project(this._latlng).subtract([this._mRadius,0]));this._point=c.latLngToLayerPoint(this._latlng),this._radius=this._point.x-c.latLngToLayerPoint(m).x}this._updateBounds()}}),e.circle=function(a,b,c){return new e.Circle(a,b,c)},e.SVG=e.Renderer.extend({_initContainer:function(){this._container=e.SVG.create("svg"),this._paths={},this._initEvents(),this._container.setAttribute("pointer-events","none")},_update:function(){if(!this._map._animatingZoom||!this._bounds){e.Renderer.prototype._update.call(this);var a=this._bounds,b=a.getSize(),c=this._container,d=this.getPane();e.Browser.mobileWebkit&&d.removeChild(c),e.DomUtil.setPosition(c,a.min),this._svgSize&&this._svgSize.equals(b)||(this._svgSize=b,c.setAttribute("width",b.x),c.setAttribute("height",b.y)),e.DomUtil.setPosition(c,a.min),c.setAttribute("viewBox",[a.min.x,a.min.y,b.x,b.y].join(" ")),e.Browser.mobileWebkit&&d.appendChild(c)}},_initPath:function(a){var b=a._path=e.SVG.create("path");a.options.className&&e.DomUtil.addClass(b,a.options.className),a.options.interactive&&e.DomUtil.addClass(b,"leaflet-interactive"),this._updateStyle(a)},_addPath:function(a){var b=a._path;this._container.appendChild(b),this._paths[e.stamp(b)]=a},_removePath:function(a){var b=a._path;e.DomUtil.remove(b),delete this._paths[e.stamp(b)]},_updatePath:function(a){a._project(),a._update()},_updateStyle:function(a){var b=a._path,c=a.options;b&&(c.stroke?(b.setAttribute("stroke",c.color),b.setAttribute("stroke-opacity",c.opacity),b.setAttribute("stroke-width",c.weight),b.setAttribute("stroke-linecap",c.lineCap),b.setAttribute("stroke-linejoin",c.lineJoin),c.dashArray?b.setAttribute("stroke-dasharray",c.dashArray):b.removeAttribute("stroke-dasharray"),c.dashOffset?b.setAttribute("stroke-dashoffset",c.dashOffset):b.removeAttribute("stroke-dashoffset")):b.setAttribute("stroke","none"),c.fill?(b.setAttribute("fill",c.fillColor||c.color),b.setAttribute("fill-opacity",c.fillOpacity),b.setAttribute("fill-rule","evenodd")):b.setAttribute("fill","none"),b.setAttribute("pointer-events",c.pointerEvents||(c.interactive?"visiblePainted":"none")))},_updatePoly:function(a,b){this._setPath(a,e.SVG.pointsToPath(a._parts,b))},_updateCircle:function(a){var b=a._point,c=a._radius,d=a._radiusY||c,e="a"+c+","+d+" 0 1,0 ",f=a._empty()?"M0 0":"M"+(b.x-c)+","+b.y+e+2*c+",0 "+e+2*-c+",0 ";this._setPath(a,f)},_setPath:function(a,b){a._path.setAttribute("d",b)},_bringToFront:function(a){e.DomUtil.toFront(a._path)},_bringToBack:function(a){e.DomUtil.toBack(a._path)},_initEvents:function(){e.DomEvent.on(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu",this._fireMouseEvent,this)},_fireMouseEvent:function(a){var b=this._paths[e.stamp(a.target||a.srcElement)];b&&b._fireMouseEvent(a)}}),e.extend(e.SVG,{create:function(a){return b.createElementNS("http://www.w3.org/2000/svg",a)},pointsToPath:function(a,b){var c,d,f,g,h,i,j="";for(c=0,f=a.length;f>c;c++){for(h=a[c],d=0,g=h.length;g>d;d++)i=h[d],j+=(d?"L":"M")+i.x+" "+i.y;j+=b?e.Browser.svg?"z":"x":""}return j||"M0 0"}}),e.Browser.svg=!(!b.createElementNS||!e.SVG.create("svg").createSVGRect),e.svg=function(a){return e.Browser.svg||e.Browser.vml?new e.SVG(a):null},e.Browser.vml=!e.Browser.svg&&function(){try{var a=b.createElement("div");a.innerHTML='<v:shape adj="1"/>';var c=a.firstChild;return c.style.behavior="url(#default#VML)",c&&"object"==typeof c.adj}catch(d){return!1}}(),e.SVG.include(e.Browser.vml?{_initContainer:function(){this._container=e.DomUtil.create("div","leaflet-vml-container"),this._paths={},this._initEvents()},_update:function(){this._map._animatingZoom||e.Renderer.prototype._update.call(this)},_initPath:function(a){var b=a._container=e.SVG.create("shape");e.DomUtil.addClass(b,"leaflet-vml-shape "+(this.options.className||"")),b.coordsize="1 1",a._path=e.SVG.create("path"),b.appendChild(a._path),this._updateStyle(a)},_addPath:function(a){var b=a._container;this._container.appendChild(b),this._paths[e.stamp(b)]=a},_removePath:function(a){var b=a._container;e.DomUtil.remove(b),delete this._paths[e.stamp(b)]},_updateStyle:function(a){var b=a._stroke,c=a._fill,d=a.options,f=a._container;f.stroked=!!d.stroke,f.filled=!!d.fill,d.stroke?(b||(b=a._stroke=e.SVG.create("stroke"),f.appendChild(b)),b.weight=d.weight+"px",b.color=d.color,b.opacity=d.opacity,b.dashStyle=d.dashArray?e.Util.isArray(d.dashArray)?d.dashArray.join(" "):d.dashArray.replace(/( *, *)/g," "):"",b.endcap=d.lineCap.replace("butt","flat"),b.joinstyle=d.lineJoin):b&&(f.removeChild(b),a._stroke=null),d.fill?(c||(c=a._fill=e.SVG.create("fill"),f.appendChild(c)),c.color=d.fillColor||d.color,c.opacity=d.fillOpacity):c&&(f.removeChild(c),a._fill=null)},_updateCircle:function(a){var b=a._point.round(),c=Math.round(a._radius),d=Math.round(a._radiusY||c);this._setPath(a,a._empty()?"M0 0":"AL "+b.x+","+b.y+" "+c+","+d+" 0,23592600")},_setPath:function(a,b){a._path.v=b}}:{}),e.Browser.vml&&(e.SVG.create=function(){try{return b.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return b.createElement("<lvml:"+a+' class="lvml">')}}catch(a){return function(a){return b.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}()),e.Canvas=e.Renderer.extend({onAdd:function(){e.Renderer.prototype.onAdd.call(this),this._layers=this._layers||{},this._draw()},_initContainer:function(){var a=this._container=b.createElement("canvas");e.DomEvent.on(a,"mousemove",this._onMouseMove,this).on(a,"click dblclick mousedown mouseup contextmenu",this._onClick,this),this._ctx=a.getContext("2d")},_update:function(){if(!this._map._animatingZoom||!this._bounds){e.Renderer.prototype._update.call(this);var a=this._bounds,b=this._container,c=a.getSize(),d=e.Browser.retina?2:1;e.DomUtil.setPosition(b,a.min),b.width=d*c.x,b.height=d*c.y,b.style.width=c.x+"px",b.style.height=c.y+"px",e.Browser.retina&&this._ctx.scale(2,2),this._ctx.translate(-a.min.x,-a.min.y)}},_initPath:function(a){this._layers[e.stamp(a)]=a},_addPath:e.Util.falseFn,_removePath:function(a){a._removed=!0,this._requestRedraw(a)},_updatePath:function(a){this._redrawBounds=a._pxBounds,this._draw(!0),a._project(),a._update(),this._draw(),this._redrawBounds=null},_updateStyle:function(a){this._requestRedraw(a)},_requestRedraw:function(a){this._map&&(this._redrawBounds=this._redrawBounds||new e.Bounds,this._redrawBounds.extend(a._pxBounds.min).extend(a._pxBounds.max),this._redrawRequest=this._redrawRequest||e.Util.requestAnimFrame(this._redraw,this))},_redraw:function(){this._redrawRequest=null,this._draw(!0),this._draw(),this._redrawBounds=null},_draw:function(a){this._clear=a;var b;for(var c in this._layers)b=this._layers[c],(!this._redrawBounds||b._pxBounds.intersects(this._redrawBounds))&&b._updatePath(),a&&b._removed&&(delete b._removed,delete this._layers[c])},_updatePoly:function(a,b){var c,d,e,f,g=a._parts,h=g.length,i=this._ctx;if(h){for(i.beginPath(),c=0;h>c;c++){for(d=0,e=g[c].length;e>d;d++)f=g[c][d],i[d?"lineTo":"moveTo"](f.x,f.y);b&&i.closePath()}this._fillStroke(i,a)}},_updateCircle:function(a){if(!a._empty()){var b=a._point,c=this._ctx,d=a._radius,e=(a._radiusY||d)/d;1!==e&&(c.save(),c.scale(1,e)),c.beginPath(),c.arc(b.x,b.y/e,d,0,2*Math.PI,!1),1!==e&&c.restore(),this._fillStroke(c,a)}},_fillStroke:function(a,b){var c=this._clear,d=b.options;a.globalCompositeOperation=c?"destination-out":"source-over",d.fill&&(a.globalAlpha=c?1:d.fillOpacity,a.fillStyle=d.fillColor||d.color,a.fill("evenodd")),d.stroke&&(a.globalAlpha=c?1:d.opacity,b._prevWeight=a.lineWidth=c?b._prevWeight+1:d.weight,a.strokeStyle=d.color,a.lineCap=d.lineCap,a.lineJoin=d.lineJoin,a.stroke())},_onClick:function(a){var b=this._map.mouseEventToLayerPoint(a);for(var c in this._layers)this._layers[c]._containsPoint(b)&&this._layers[c]._fireMouseEvent(a)},_onMouseMove:function(a){if(this._map&&!this._map._animatingZoom){var b=this._map.mouseEventToLayerPoint(a);for(var c in this._layers)this._handleHover(this._layers[c],a,b)}},_handleHover:function(a,b,c){a.options.interactive&&(a._containsPoint(c)?(a._mouseInside||(e.DomUtil.addClass(this._container,"leaflet-interactive"),a._fireMouseEvent(b,"mouseover"),a._mouseInside=!0),a._fireMouseEvent(b)):a._mouseInside&&(e.DomUtil.removeClass(this._container,"leaflet-interactive"),a._fireMouseEvent(b,"mouseout"),a._mouseInside=!1))},_bringToFront:e.Util.falseFn,_bringToBack:e.Util.falseFn}),e.Browser.canvas=function(){return!!b.createElement("canvas").getContext}(),e.canvas=function(a){return e.Browser.canvas?new e.Canvas(a):null},e.Polyline.prototype._containsPoint=function(a,b){var c,d,f,g,h,i,j=this._clickTolerance();if(!this._pxBounds.contains(a))return!1;for(c=0,g=this._parts.length;g>c;c++)for(i=this._parts[c],d=0,h=i.length,f=h-1;h>d;f=d++)if((b||0!==d)&&e.LineUtil.pointToSegmentDistance(a,i[f],i[d])<=j)return!0;return!1},e.Polygon.prototype._containsPoint=function(a){var b,c,d,f,g,h,i,j,k=!1;if(!this._pxBounds.contains(a))return!1;for(f=0,i=this._parts.length;i>f;f++)for(b=this._parts[f],g=0,j=b.length,h=j-1;j>g;h=g++)c=b[g],d=b[h],c.y>a.y!=d.y>a.y&&a.x<(d.x-c.x)*(a.y-c.y)/(d.y-c.y)+c.x&&(k=!k);return k||e.Polyline.prototype._containsPoint.call(this,a,!0)},e.CircleMarker.prototype._containsPoint=function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()},e.GeoJSON=e.FeatureGroup.extend({initialize:function(a,b){e.setOptions(this,b),this._layers={},a&&this.addData(a)},addData:function(a){var b,c,d,f=e.Util.isArray(a)?a:a.features;if(f){for(b=0,c=f.length;c>b;b++)d=f[b],(d.geometries||d.geometry||d.features||d.coordinates)&&this.addData(d);return this}var g=this.options;if(!g.filter||g.filter(a)){var h=e.GeoJSON.geometryToLayer(a,g);return h.feature=e.GeoJSON.asFeature(a),h.defaultOptions=h.options,this.resetStyle(h),g.onEachFeature&&g.onEachFeature(a,h),this.addLayer(h)}},resetStyle:function(a){return a.options=a.defaultOptions,this._setLayerStyle(a,this.options.style),this},setStyle:function(a){return this.eachLayer(function(b){this._setLayerStyle(b,a)},this)},_setLayerStyle:function(a,b){"function"==typeof b&&(b=b(a.feature)),a.setStyle&&a.setStyle(b)}}),e.extend(e.GeoJSON,{geometryToLayer:function(a,b){var c,d,f,g,h="Feature"===a.type?a.geometry:a,i=h.coordinates,j=[],k=b&&b.pointToLayer,l=b&&b.coordsToLatLng||this.coordsToLatLng;switch(h.type){case"Point":return c=l(i),k?k(a,c):new e.Marker(c);case"MultiPoint":for(f=0,g=i.length;g>f;f++)c=l(i[f]),j.push(k?k(a,c):new e.Marker(c));return new e.FeatureGroup(j);case"LineString":case"MultiLineString":return d=this.coordsToLatLngs(i,"LineString"===h.type?0:1,l),new e.Polyline(d,b);case"Polygon":case"MultiPolygon":return d=this.coordsToLatLngs(i,"Polygon"===h.type?1:2,l),new e.Polygon(d,b);case"GeometryCollection":for(f=0,g=h.geometries.length;g>f;f++)j.push(this.geometryToLayer({geometry:h.geometries[f],type:"Feature",properties:a.properties},b));return new e.FeatureGroup(j);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(a){return new e.LatLng(a[1],a[0],a[2])},coordsToLatLngs:function(a,b,c){for(var d,e=[],f=0,g=a.length;g>f;f++)d=b?this.coordsToLatLngs(a[f],b-1,c):(c||this.coordsToLatLng)(a[f]),e.push(d);return e},latLngToCoords:function(a){return a.alt!==c?[a.lng,a.lat,a.alt]:[a.lng,a.lat]},latLngsToCoords:function(a,b,c){for(var d=[],f=0,g=a.length;g>f;f++)d.push(b?e.GeoJSON.latLngsToCoords(a[f],b-1,c):e.GeoJSON.latLngToCoords(a[f]));return!b&&c&&d.push(d[0]),d},getFeature:function(a,b){return a.feature?e.extend({},a.feature,{geometry:b}):e.GeoJSON.asFeature(b)},asFeature:function(a){return"Feature"===a.type?a:{type:"Feature",properties:{},geometry:a}}});var g={toGeoJSON:function(){return e.GeoJSON.getFeature(this,{type:"Point",coordinates:e.GeoJSON.latLngToCoords(this.getLatLng())})}};e.Marker.include(g),e.Circle.include(g),e.CircleMarker.include(g),e.Polyline.prototype.toGeoJSON=function(){var a=!this._flat(this._latlngs),b=e.GeoJSON.latLngsToCoords(this._latlngs,a?1:0);return e.GeoJSON.getFeature(this,{type:(a?"Multi":"")+"LineString",coordinates:b})},e.Polygon.prototype.toGeoJSON=function(){var a=!this._flat(this._latlngs),b=a&&!this._flat(this._latlngs[0]),c=e.GeoJSON.latLngsToCoords(this._latlngs,b?2:a?1:0,!0);return a&&1===this._latlngs.length&&(b=!0,c=[c]),a||(c=[c]),e.GeoJSON.getFeature(this,{type:(b?"Multi":"")+"Polygon",coordinates:c})},e.LayerGroup.include({toMultiPoint:function(){var a=[];return this.eachLayer(function(b){a.push(b.toGeoJSON().geometry.coordinates)}),e.GeoJSON.getFeature(this,{type:"MultiPoint",coordinates:a})},toGeoJSON:function(){var a=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===a)return this.toMultiPoint();var b="GeometryCollection"===a,c=[];return this.eachLayer(function(a){if(a.toGeoJSON){var d=a.toGeoJSON();c.push(b?d.geometry:e.GeoJSON.asFeature(d))}}),b?e.GeoJSON.getFeature(this,{geometries:c,type:"GeometryCollection"}):{type:"FeatureCollection",features:c}}}),e.geoJson=function(a,b){return new e.GeoJSON(a,b)};var h="_leaflet_events";e.DomEvent={on:function(a,b,c,d){if("object"==typeof b)for(var f in b)this._on(a,f,b[f],c);else{b=e.Util.splitWords(b);for(var g=0,h=b.length;h>g;g++)this._on(a,b[g],c,d)}return this},off:function(a,b,c,d){if("object"==typeof b)for(var f in b)this._off(a,f,b[f],c);else{b=e.Util.splitWords(b);for(var g=0,h=b.length;h>g;g++)this._off(a,b[g],c,d)}return this},_on:function(b,c,d,f){var g=c+e.stamp(d)+(f?"_"+e.stamp(f):"");if(b[h]&&b[h][g])return this;var i=function(c){return d.call(f||b,c||a.event)},j=i;return e.Browser.pointer&&0===c.indexOf("touch")?this.addPointerListener(b,c,i,g):(e.Browser.touch&&"dblclick"===c&&this.addDoubleTapListener&&this.addDoubleTapListener(b,i,g),"addEventListener"in b?"mousewheel"===c?(b.addEventListener("DOMMouseScroll",i,!1),b.addEventListener(c,i,!1)):"mouseenter"===c||"mouseleave"===c?(i=function(c){return c=c||a.event,e.DomEvent._checkMouse(b,c)?j(c):void 0},b.addEventListener("mouseenter"===c?"mouseover":"mouseout",i,!1)):("click"===c&&e.Browser.android&&(i=function(a){return e.DomEvent._filterClick(a,j)}),b.addEventListener(c,i,!1)):"attachEvent"in b&&b.attachEvent("on"+c,i),b[h]=b[h]||{},b[h][g]=i,this)},_off:function(a,b,c,d){var f=b+e.stamp(c)+(d?"_"+e.stamp(d):""),g=a[h]&&a[h][f];return g?(e.Browser.pointer&&0===b.indexOf("touch")?this.removePointerListener(a,b,f):e.Browser.touch&&"dblclick"===b&&this.removeDoubleTapListener?this.removeDoubleTapListener(a,f):"removeEventListener"in a?"mousewheel"===b?(a.removeEventListener("DOMMouseScroll",g,!1),a.removeEventListener(b,g,!1)):a.removeEventListener("mouseenter"===b?"mouseover":"mouseleave"===b?"mouseout":b,g,!1):"detachEvent"in a&&a.detachEvent("on"+b,g),a[h][f]=null,this):this},stopPropagation:function(a){return a.stopPropagation?a.stopPropagation():a.cancelBubble=!0,e.DomEvent._skipped(a),this},disableScrollPropagation:function(a){return e.DomEvent.on(a,"mousewheel MozMousePixelScroll",e.DomEvent.stopPropagation)},disableClickPropagation:function(a){var b=e.DomEvent.stopPropagation;return e.DomEvent.on(a,e.Draggable.START.join(" "),b),e.DomEvent.on(a,{click:e.DomEvent._fakeStop,dblclick:b})},preventDefault:function(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this},stop:function(a){return e.DomEvent.preventDefault(a).stopPropagation(a)},getMousePosition:function(a,b){if(!b)return new e.Point(a.clientX,a.clientY);var c=b.getBoundingClientRect();return new e.Point(a.clientX-c.left-b.clientLeft,a.clientY-c.top-b.clientTop)},getWheelDelta:function(a){var b=0;return a.wheelDelta&&(b=a.wheelDelta/120),a.detail&&(b=-a.detail/3),b},_skipEvents:{},_fakeStop:function(a){e.DomEvent._skipEvents[a.type]=!0},_skipped:function(a){var b=this._skipEvents[a.type];return this._skipEvents[a.type]=!1,b},_checkMouse:function(a,b){var c=b.relatedTarget;if(!c)return!0;try{for(;c&&c!==a;)c=c.parentNode}catch(d){return!1}return c!==a},_filterClick:function(a,b){var c=a.timeStamp||a.originalEvent.timeStamp,d=e.DomEvent._lastClick&&c-e.DomEvent._lastClick;return d&&d>100&&500>d||a.target._simulatedClick&&!a._simulated?void e.DomEvent.stop(a):(e.DomEvent._lastClick=c,b(a))}},e.DomEvent.addListener=e.DomEvent.on,e.DomEvent.removeListener=e.DomEvent.off,e.Draggable=e.Evented.extend({statics:{START:e.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(a,b){this._element=a,this._dragStartTarget=b||a},enable:function(){this._enabled||(e.DomEvent.on(this._dragStartTarget,e.Draggable.START.join(" "),this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(e.DomEvent.off(this._dragStartTarget,e.Draggable.START.join(" "),this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(a){if(this._moved=!1,!(a.shiftKey||1!==a.which&&1!==a.button&&!a.touches||(e.DomEvent.stopPropagation(a),e.Draggable._disabled||(e.DomUtil.disableImageDrag(),e.DomUtil.disableTextSelection(),this._moving)))){this.fire("down");var c=a.touches?a.touches[0]:a;this._startPoint=new e.Point(c.clientX,c.clientY),this._startPos=this._newPos=e.DomUtil.getPosition(this._element),e.DomEvent.on(b,e.Draggable.MOVE[a.type],this._onMove,this).on(b,e.Draggable.END[a.type],this._onUp,this)}},_onMove:function(a){if(a.touches&&a.touches.length>1)return void(this._moved=!0);var c=a.touches&&1===a.touches.length?a.touches[0]:a,d=new e.Point(c.clientX,c.clientY),f=d.subtract(this._startPoint);(f.x||f.y)&&(e.Browser.touch&&Math.abs(f.x)+Math.abs(f.y)<3||(e.DomEvent.preventDefault(a),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=e.DomUtil.getPosition(this._element).subtract(f),e.DomUtil.addClass(b.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,e.DomUtil.addClass(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(f),this._moving=!0,e.Util.cancelAnimFrame(this._animRequest),this._animRequest=e.Util.requestAnimFrame(this._updatePosition,this,!0,this._dragStartTarget)))},_updatePosition:function(){this.fire("predrag"),e.DomUtil.setPosition(this._element,this._newPos),this.fire("drag")},_onUp:function(){e.DomUtil.removeClass(b.body,"leaflet-dragging"),this._lastTarget&&(e.DomUtil.removeClass(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var a in e.Draggable.MOVE)e.DomEvent.off(b,e.Draggable.MOVE[a],this._onMove,this).off(b,e.Draggable.END[a],this._onUp,this);e.DomUtil.enableImageDrag(),e.DomUtil.enableTextSelection(),this._moved&&this._moving&&(e.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1}}),e.Handler=e.Class.extend({initialize:function(a){this._map=a},enable:function(){this._enabled||(this._enabled=!0,this.addHooks())},disable:function(){this._enabled&&(this._enabled=!1,this.removeHooks())},enabled:function(){return!!this._enabled}}),e.Map.mergeOptions({dragging:!0,inertia:!e.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,inertiaThreshold:e.Browser.touch?32:18,easeLinearity:.25,worldCopyJump:!1}),e.Map.Drag=e.Handler.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new e.Draggable(a._mapPane,a._container),this._draggable.on({down:this._onDown,dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDrag,this),a.on("viewreset",this._onViewReset,this),a.whenReady(this._onViewReset,this))}this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDown:function(){this._map._panAnim&&this._map._panAnim.stop()},_onDragStart:function(){var a=this._map;a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(){if(this._map.options.inertia){var a=this._lastTime=+new Date,b=this._lastPos=this._draggable._newPos;this._positions.push(b),this._times.push(a),a-this._times[0]>200&&(this._positions.shift(),this._times.shift())}this._map.fire("move").fire("drag")},_onViewReset:function(){var a=this._map.getSize().divideBy(2),b=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=b.subtract(a).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_onPreDrag:function(){var a=this._worldWidth,b=Math.round(a/2),c=this._initialWorldOffset,d=this._draggable._newPos.x,e=(d-b+c)%a+b-c,f=(d+b+c)%a-b-c,g=Math.abs(e+c)<Math.abs(f+c)?e:f;this._draggable._newPos.x=g},_onDragEnd:function(a){var b=this._map,c=b.options,d=+new Date-this._lastTime,f=!c.inertia||d>c.inertiaThreshold||!this._positions[0];if(b.fire("dragend",a),f)b.fire("moveend");else{var g=this._lastPos.subtract(this._positions[0]),h=(this._lastTime+d-this._times[0])/1e3,i=c.easeLinearity,j=g.multiplyBy(i/h),k=j.distanceTo([0,0]),l=Math.min(c.inertiaMaxSpeed,k),m=j.multiplyBy(l/k),n=l/(c.inertiaDeceleration*i),o=m.multiplyBy(-n/2).round();o.x&&o.y?(o=b._limitOffset(o,b.options.maxBounds),e.Util.requestAnimFrame(function(){b.panBy(o,{duration:n,easeLinearity:i,noMoveStart:!0})})):b.fire("moveend")}}}),e.Map.addInitHook("addHandler","dragging",e.Map.Drag),e.Map.mergeOptions({doubleClickZoom:!0}),e.Map.DoubleClickZoom=e.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var b=this._map,c=b.getZoom()+(a.originalEvent.shiftKey?-1:1);"center"===b.options.doubleClickZoom?b.setZoom(c):b.setZoomAround(a.containerPoint,c)}}),e.Map.addInitHook("addHandler","doubleClickZoom",e.Map.DoubleClickZoom),e.Map.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40}),e.Map.ScrollWheelZoom=e.Handler.extend({addHooks:function(){e.DomEvent.on(this._map._container,{mousewheel:this._onWheelScroll,MozMousePixelScroll:e.DomEvent.preventDefault},this),this._delta=0},removeHooks:function(){e.DomEvent.off(this._map._container,{mousewheel:this._onWheelScroll,MozMousePixelScroll:e.DomEvent.preventDefault},this)},_onWheelScroll:function(a){var b=e.DomEvent.getWheelDelta(a),c=this._map.options.wheelDebounceTime;this._delta+=b,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var d=Math.max(c-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(e.bind(this._performZoom,this),d),e.DomEvent.stop(a)},_performZoom:function(){var a=this._map,b=this._delta,c=a.getZoom();b=b>0?Math.ceil(b):Math.floor(b),b=Math.max(Math.min(b,4),-4),b=a._limitZoom(c+b)-c,this._delta=0,this._startTime=null,b&&("center"===a.options.scrollWheelZoom?a.setZoom(c+b):a.setZoomAround(this._lastMousePos,c+b))}}),e.Map.addInitHook("addHandler","scrollWheelZoom",e.Map.ScrollWheelZoom),e.extend(e.DomEvent,{_touchstart:e.Browser.msPointer?"MSPointerDown":e.Browser.pointer?"pointerdown":"touchstart",_touchend:e.Browser.msPointer?"MSPointerUp":e.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(a,c,d){function f(a){var b;if(e.Browser.pointer?(l.push(a.pointerId),b=l.length):b=a.touches.length,!(b>1)){var c=Date.now(),d=c-(h||c);i=a.touches?a.touches[0]:a,j=d>0&&k>=d,h=c}}function g(a){if(e.Browser.pointer){var b=l.indexOf(a.pointerId);if(-1===b)return;l.splice(b,1)}if(j){if(e.Browser.pointer){var d,f,g={};for(f in i)d=i[f],g[f]=d&&d.bind?d.bind(i):d;i=g}i.type="dblclick",c(i),h=null}}var h,i,j=!1,k=250,l=[],m="_leaflet_",n=this._touchstart,o=this._touchend;a[m+n+d]=f,a[m+o+d]=g;var p=e.Browser.pointer?b.documentElement:a;return a.addEventListener(n,f,!1),p.addEventListener(o,g,!1),e.Browser.pointer&&p.addEventListener(e.DomEvent.POINTER_CANCEL,g,!1),this},removeDoubleTapListener:function(a,c){var d="_leaflet_",f=e.Browser.pointer?b.documentElement:a,g=a[d+this._touchend+c];return a.removeEventListener(this._touchstart,a[d+this._touchstart+c],!1),f.removeEventListener(this._touchend,g,!1),e.Browser.pointer&&f.removeEventListener(e.DomEvent.POINTER_CANCEL,g,!1),this}}),e.extend(e.DomEvent,{POINTER_DOWN:e.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:e.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:e.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:e.Browser.msPointer?"MSPointerCancel":"pointercancel",_pointers:{},addPointerListener:function(a,b,c,d){return"touchstart"===b?this._addPointerStart(a,c,d):"touchmove"===b?this._addPointerMove(a,c,d):"touchend"===b&&this._addPointerEnd(a,c,d),this},removePointerListener:function(a,b,c){var d=a["_leaflet_"+b+c];return"touchstart"===b?a.removeEventListener(this.POINTER_DOWN,d,!1):"touchmove"===b?a.removeEventListener(this.POINTER_MOVE,d,!1):"touchend"===b&&(a.removeEventListener(this.POINTER_UP,d,!1),a.removeEventListener(this.POINTER_CANCEL,d,!1)),this},_addPointerStart:function(a,c,d){var f=e.bind(function(a){e.DomEvent.preventDefault(a),this._pointers[a.pointerId]=a,this._handlePointer(a,c)},this);if(a["_leaflet_touchstart"+d]=f,a.addEventListener(this.POINTER_DOWN,f,!1),!this._pointerDocListener){var g=e.bind(function(a){delete this._pointers[a.pointerId]},this);b.documentElement.addEventListener(this.POINTER_UP,g,!1),b.documentElement.addEventListener(this.POINTER_CANCEL,g,!1),this._pointerDocListener=!0}},_handlePointer:function(a,b){a.touches=[];for(var c in this._pointers)a.touches.push(this._pointers[c]);a.changedTouches=[a],b(a)},_addPointerMove:function(a,b,c){var d=e.bind(function(a){(a.pointerType!==a.MSPOINTER_TYPE_MOUSE&&"mouse"!==a.pointerType||0!==a.buttons)&&(this._pointers[a.pointerId]=a,this._handlePointer(a,b))},this);a["_leaflet_touchmove"+c]=d,a.addEventListener(this.POINTER_MOVE,d,!1)},_addPointerEnd:function(a,b,c){var d=e.bind(function(a){delete this._pointers[a.pointerId],this._handlePointer(a,b)},this);a["_leaflet_touchend"+c]=d,a.addEventListener(this.POINTER_UP,d,!1),a.addEventListener(this.POINTER_CANCEL,d,!1)}}),e.Map.mergeOptions({touchZoom:e.Browser.touch&&!e.Browser.android23,bounceAtZoomLimits:!0}),e.Map.TouchZoom=e.Handler.extend({addHooks:function(){e.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){e.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var c=this._map;if(a.touches&&2===a.touches.length&&!c._animatingZoom&&!this._zooming){var d=c.mouseEventToLayerPoint(a.touches[0]),f=c.mouseEventToLayerPoint(a.touches[1]),g=c._getCenterLayerPoint();this._startCenter=d.add(f)._divideBy(2),this._startDist=d.distanceTo(f),this._moved=!1,this._zooming=!0,this._centerOffset=g.subtract(this._startCenter),c._panAnim&&c._panAnim.stop(),e.DomEvent.on(b,"touchmove",this._onTouchMove,this).on(b,"touchend",this._onTouchEnd,this),e.DomEvent.preventDefault(a)
}},_onTouchMove:function(a){if(a.touches&&2===a.touches.length&&this._zooming){var b=this._map,c=b.mouseEventToLayerPoint(a.touches[0]),d=b.mouseEventToLayerPoint(a.touches[1]);if(this._scale=c.distanceTo(d)/this._startDist,this._delta=c._add(d)._divideBy(2)._subtract(this._startCenter),!b.options.bounceAtZoomLimits){var f=b.getScaleZoom(this._scale);if(f<=b.getMinZoom()&&this._scale<1||f>=b.getMaxZoom()&&this._scale>1)return}this._moved||(b.fire("movestart").fire("zoomstart"),this._moved=!0),e.Util.cancelAnimFrame(this._animRequest),this._animRequest=e.Util.requestAnimFrame(this._updateOnMove,this,!0,this._map._container),e.DomEvent.preventDefault(a)}},_updateOnMove:function(){var a=this._map;this._center="center"===a.options.touchZoom?a.getCenter():a.layerPointToLatLng(this._getTargetCenter()),this._zoom=a.getScaleZoom(this._scale),a._animateZoom(this._center,this._zoom)},_onTouchEnd:function(){if(!this._moved||!this._zooming)return void(this._zooming=!1);this._zooming=!1,e.Util.cancelAnimFrame(this._animRequest),e.DomEvent.off(b,"touchmove",this._onTouchMove).off(b,"touchend",this._onTouchEnd);var a=this._map,c=a.getZoom(),d=this._zoom-c,f=a._limitZoom(c+(d>0?Math.ceil(d):Math.floor(d)));a._animateZoom(this._center,f,!0)},_getTargetCenter:function(){var a=this._centerOffset.subtract(this._delta).divideBy(this._scale);return this._startCenter.add(a)}}),e.Map.addInitHook("addHandler","touchZoom",e.Map.TouchZoom),e.Map.mergeOptions({tap:!0,tapTolerance:15}),e.Map.Tap=e.Handler.extend({addHooks:function(){e.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){e.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(a.touches){if(e.DomEvent.preventDefault(a),this._fireClick=!0,a.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var c=a.touches[0],d=c.target;this._startPos=this._newPos=new e.Point(c.clientX,c.clientY),d.tagName&&"a"===d.tagName.toLowerCase()&&e.DomUtil.addClass(d,"leaflet-active"),this._holdTimeout=setTimeout(e.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",c))},this),1e3),this._simulateEvent("mousedown",c),e.DomEvent.on(b,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(a){if(clearTimeout(this._holdTimeout),e.DomEvent.off(b,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&a&&a.changedTouches){var c=a.changedTouches[0],d=c.target;d&&d.tagName&&"a"===d.tagName.toLowerCase()&&e.DomUtil.removeClass(d,"leaflet-active"),this._simulateEvent("mouseup",c),this._isTapValid()&&this._simulateEvent("click",c)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(a){var b=a.touches[0];this._newPos=new e.Point(b.clientX,b.clientY)},_simulateEvent:function(c,d){var e=b.createEvent("MouseEvents");e._simulated=!0,d.target._simulatedClick=!0,e.initMouseEvent(c,!0,!0,a,1,d.screenX,d.screenY,d.clientX,d.clientY,!1,!1,!1,!1,0,null),d.target.dispatchEvent(e)}}),e.Browser.touch&&!e.Browser.pointer&&e.Map.addInitHook("addHandler","tap",e.Map.Tap),e.Map.mergeOptions({boxZoom:!0}),e.Map.BoxZoom=e.Handler.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane},addHooks:function(){e.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){e.DomEvent.off(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_onMouseDown:function(a){return!a.shiftKey||1!==a.which&&1!==a.button?!1:(this._moved=!1,e.DomUtil.disableTextSelection(),e.DomUtil.disableImageDrag(),this._startPoint=this._map.mouseEventToContainerPoint(a),void e.DomEvent.on(b,{contextmenu:e.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this))},_onMouseMove:function(a){this._moved||(this._moved=!0,this._box=e.DomUtil.create("div","leaflet-zoom-box",this._container),e.DomUtil.addClass(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(a);var b=new e.Bounds(this._point,this._startPoint),c=b.getSize();e.DomUtil.setPosition(this._box,b.min),this._box.style.width=c.x+"px",this._box.style.height=c.y+"px"},_finish:function(){this._moved&&(e.DomUtil.remove(this._box),e.DomUtil.removeClass(this._container,"leaflet-crosshair")),e.DomUtil.enableTextSelection(),e.DomUtil.enableImageDrag(),e.DomEvent.off(b,{contextmenu:e.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(a){if(1!==a.which&&1!==a.button)return!1;if(this._finish(),this._moved){var b=new e.LatLngBounds(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(b).fire("boxzoomend",{boxZoomBounds:b})}},_onKeyDown:function(a){27===a.keyCode&&this._finish()}}),e.Map.addInitHook("addHandler","boxZoom",e.Map.BoxZoom),e.Map.mergeOptions({keyboard:!0,keyboardPanOffset:80,keyboardZoomOffset:1}),e.Map.Keyboard=e.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,173]},initialize:function(a){this._map=a,this._setPanOffset(a.options.keyboardPanOffset),this._setZoomOffset(a.options.keyboardZoomOffset)},addHooks:function(){var a=this._map._container;-1===a.tabIndex&&(a.tabIndex="0"),e.DomEvent.on(a,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),e.DomEvent.off(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var c=b.body,d=b.documentElement,e=c.scrollTop||d.scrollTop,f=c.scrollLeft||d.scrollLeft;this._map._container.focus(),a.scrollTo(f,e)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanOffset:function(a){var b,c,d=this._panKeys={},e=this.keyCodes;for(b=0,c=e.left.length;c>b;b++)d[e.left[b]]=[-1*a,0];for(b=0,c=e.right.length;c>b;b++)d[e.right[b]]=[a,0];for(b=0,c=e.down.length;c>b;b++)d[e.down[b]]=[0,a];for(b=0,c=e.up.length;c>b;b++)d[e.up[b]]=[0,-1*a]},_setZoomOffset:function(a){var b,c,d=this._zoomKeys={},e=this.keyCodes;for(b=0,c=e.zoomIn.length;c>b;b++)d[e.zoomIn[b]]=a;for(b=0,c=e.zoomOut.length;c>b;b++)d[e.zoomOut[b]]=-a},_addHooks:function(){e.DomEvent.on(b,"keydown",this._onKeyDown,this)},_removeHooks:function(){e.DomEvent.off(b,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var b=a.keyCode,c=this._map;if(b in this._panKeys){if(c._panAnim&&c._panAnim._inProgress)return;c.panBy(this._panKeys[b]),c.options.maxBounds&&c.panInsideBounds(c.options.maxBounds)}else{if(!(b in this._zoomKeys))return;c.setZoom(c.getZoom()+this._zoomKeys[b])}e.DomEvent.stop(a)}}}),e.Map.addInitHook("addHandler","keyboard",e.Map.Keyboard),e.Handler.MarkerDrag=e.Handler.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new e.Draggable(a,a)),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),e.DomUtil.addClass(a,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),e.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(){var a=this._marker,b=a._shadow,c=e.DomUtil.getPosition(a._icon),d=a._map.layerPointToLatLng(c);b&&e.DomUtil.setPosition(b,c),a._latlng=d,a.fire("move",{latlng:d}).fire("drag")},_onDragEnd:function(a){this._marker.fire("moveend").fire("dragend",a)}}),e.Control=e.Class.extend({options:{position:"topright"},initialize:function(a){e.setOptions(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var b=this._map;return b&&b.removeControl(this),this.options.position=a,b&&b.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this._map=a;var b=this._container=this.onAdd(a),c=this.getPosition(),d=a._controlCorners[c];return e.DomUtil.addClass(b,"leaflet-control"),-1!==c.indexOf("bottom")?d.insertBefore(b,d.firstChild):d.appendChild(b),this},remove:function(){return e.DomUtil.remove(this._container),this.onRemove&&this.onRemove(this._map),this._map=null,this},_refocusOnMap:function(){this._map&&this._map.getContainer().focus()}}),e.control=function(a){return new e.Control(a)},e.Map.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.remove(),this},_initControlPos:function(){function a(a,f){var g=c+a+" "+c+f;b[a+f]=e.DomUtil.create("div",g,d)}var b=this._controlCorners={},c="leaflet-",d=this._controlContainer=e.DomUtil.create("div",c+"control-container",this._container);a("top","left"),a("top","right"),a("bottom","left"),a("bottom","right")},_clearControlPos:function(){e.DomUtil.remove(this._controlContainer)}}),e.Control.Zoom=e.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(a){var b="leaflet-control-zoom",c=e.DomUtil.create("div",b+" leaflet-bar"),d=this.options;return this._zoomInButton=this._createButton(d.zoomInText,d.zoomInTitle,b+"-in",c,this._zoomIn),this._zoomOutButton=this._createButton(d.zoomOutText,d.zoomOutTitle,b+"-out",c,this._zoomOut),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},_zoomIn:function(a){this._map.zoomIn(a.shiftKey?3:1)},_zoomOut:function(a){this._map.zoomOut(a.shiftKey?3:1)},_createButton:function(a,b,c,d,f){var g=e.DomUtil.create("a",c,d);return g.innerHTML=a,g.href="#",g.title=b,e.DomEvent.on(g,"mousedown dblclick",e.DomEvent.stopPropagation).on(g,"click",e.DomEvent.stop).on(g,"click",f,this).on(g,"click",this._refocusOnMap,this),g},_updateDisabled:function(){var a=this._map,b="leaflet-disabled";e.DomUtil.removeClass(this._zoomInButton,b),e.DomUtil.removeClass(this._zoomOutButton,b),a._zoom===a.getMinZoom()&&e.DomUtil.addClass(this._zoomOutButton,b),a._zoom===a.getMaxZoom()&&e.DomUtil.addClass(this._zoomInButton,b)}}),e.Map.mergeOptions({zoomControl:!0}),e.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new e.Control.Zoom,this.addControl(this.zoomControl))}),e.control.zoom=function(a){return new e.Control.Zoom(a)},e.Control.Attribution=e.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(a){e.setOptions(this,a),this._attributions={}},onAdd:function(a){this._container=e.DomUtil.create("div","leaflet-control-attribution"),e.DomEvent.disableClickPropagation(this._container);for(var b in a._layers)a._layers[b].getAttribution&&this.addAttribution(a._layers[b].getAttribution());return this._update(),this._container},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):void 0},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):void 0},_update:function(){if(this._map){var a=[];for(var b in this._attributions)this._attributions[b]&&a.push(b);var c=[];this.options.prefix&&c.push(this.options.prefix),a.length&&c.push(a.join(", ")),this._container.innerHTML=c.join(" | ")}}}),e.Map.mergeOptions({attributionControl:!0}),e.Map.addInitHook(function(){this.options.attributionControl&&(this.attributionControl=(new e.Control.Attribution).addTo(this))}),e.control.attribution=function(a){return new e.Control.Attribution(a)},e.Control.Scale=e.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(a){var b="leaflet-control-scale",c=e.DomUtil.create("div",b),d=this.options;return this._addScales(d,b+"-line",c),a.on(d.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),c},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,b,c){a.metric&&(this._mScale=e.DomUtil.create("div",b,c)),a.imperial&&(this._iScale=e.DomUtil.create("div",b,c))},_update:function(){var a=this._map,b=a.getSize().y/2,c=e.CRS.Earth.distance(a.containerPointToLatLng([0,b]),a.containerPointToLatLng([this.options.maxWidth,b]));this._updateScales(c)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a),this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(a){var b=this._getRoundNum(a),c=1e3>b?b+" m":b/1e3+" km";this._updateScale(this._mScale,c,b/a)},_updateImperial:function(a){var b,c,d,e=3.2808399*a;e>5280?(b=e/5280,c=this._getRoundNum(b),this._updateScale(this._iScale,c+" mi",c/b)):(d=this._getRoundNum(e),this._updateScale(this._iScale,d+" ft",d/e))},_updateScale:function(a,b,c){a.style.width=Math.round(this.options.maxWidth*c)+"px",a.innerHTML=b},_getRoundNum:function(a){var b=Math.pow(10,(Math.floor(a)+"").length-1),c=a/b;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,b*c}}),e.control.scale=function(a){return new e.Control.Scale(a)},e.Control.Layers=e.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0},initialize:function(a,b,c){e.setOptions(this,c),this._layers={},this._lastZIndex=0,this._handlingClick=!1;for(var d in a)this._addLayer(a[d],d);for(d in b)this._addLayer(b[d],d,!0)},onAdd:function(){return this._initLayout(),this._update(),this._container},addBaseLayer:function(a,b){return this._addLayer(a,b),this._update()},addOverlay:function(a,b){return this._addLayer(a,b,!0),this._update()},removeLayer:function(a){return a.off("add remove",this._onLayerChange,this),delete this._layers[e.stamp(a)],this._update()},_initLayout:function(){var a="leaflet-control-layers",b=this._container=e.DomUtil.create("div",a);b.setAttribute("aria-haspopup",!0),e.Browser.touch?e.DomEvent.on(b,"click",e.DomEvent.stopPropagation):e.DomEvent.disableClickPropagation(b).disableScrollPropagation(b);var c=this._form=e.DomUtil.create("form",a+"-list");if(this.options.collapsed){e.Browser.android||e.DomEvent.on(b,{mouseenter:this._expand,mouseleave:this._collapse},this);var d=this._layersLink=e.DomUtil.create("a",a+"-toggle",b);d.href="#",d.title="Layers",e.Browser.touch?e.DomEvent.on(d,"click",e.DomEvent.stop).on(d,"click",this._expand,this):e.DomEvent.on(d,"focus",this._expand,this),e.DomEvent.on(c,"click",function(){setTimeout(e.bind(this._onInputClick,this),0)},this),this._map.on("click",this._collapse,this)}else this._expand();this._baseLayersList=e.DomUtil.create("div",a+"-base",c),this._separator=e.DomUtil.create("div",a+"-separator",c),this._overlaysList=e.DomUtil.create("div",a+"-overlays",c),b.appendChild(c)},_addLayer:function(a,b,c){a.on("add remove",this._onLayerChange,this);var d=e.stamp(a);this._layers[d]={layer:a,name:b,overlay:c},this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex))},_update:function(){if(this._container){e.DomUtil.empty(this._baseLayersList),e.DomUtil.empty(this._overlaysList);var a,b,c,d;for(c in this._layers)d=this._layers[c],this._addItem(d),b=b||d.overlay,a=a||!d.overlay;return this._separator.style.display=b&&a?"":"none",this}},_onLayerChange:function(a){this._handlingClick||this._update();var b=this._layers[e.stamp(a.target)].overlay,c=b?"add"===a.type?"overlayadd":"overlayremove":"add"===a.type?"baselayerchange":null;c&&this._map.fire(c,a.target)},_createRadioElement:function(a,c){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"'+(c?' checked="checked"':"")+"/>",e=b.createElement("div");return e.innerHTML=d,e.firstChild},_addItem:function(a){var c,d=b.createElement("label"),f=this._map.hasLayer(a.layer);a.overlay?(c=b.createElement("input"),c.type="checkbox",c.className="leaflet-control-layers-selector",c.defaultChecked=f):c=this._createRadioElement("leaflet-base-layers",f),c.layerId=e.stamp(a.layer),e.DomEvent.on(c,"click",this._onInputClick,this);var g=b.createElement("span");g.innerHTML=" "+a.name,d.appendChild(c),d.appendChild(g);var h=a.overlay?this._overlaysList:this._baseLayersList;return h.appendChild(d),d},_onInputClick:function(){var a,b,c,d=this._form.getElementsByTagName("input");this._handlingClick=!0;for(var e=0,f=d.length;f>e;e++)a=d[e],b=this._layers[a.layerId].layer,c=this._map.hasLayer(b),a.checked&&!c?this._map.addLayer(b):!a.checked&&c&&this._map.removeLayer(b);this._handlingClick=!1,this._refocusOnMap()},_expand:function(){e.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){e.DomUtil.removeClass(this._container,"leaflet-control-layers-expanded")}}),e.control.layers=function(a,b,c){return new e.Control.Layers(a,b,c)},e.PosAnimation=e.Evented.extend({run:function(a,b,c,d){this.stop(),this._el=a,this._inProgress=!0,this._newPos=b,this.fire("start"),a.style[e.DomUtil.TRANSITION]="all "+(c||.25)+"s cubic-bezier(0,0,"+(d||.5)+",1)",e.DomEvent.on(a,e.DomUtil.TRANSITION_END,this._onTransitionEnd,this),e.DomUtil.setPosition(a,b),this._stepTimer=setInterval(e.bind(this._onStep,this),50)},stop:function(){this._inProgress&&(this._newPos=this._getPos(),this._newPos&&e.DomUtil.setPosition(this._el,this._newPos),this._onTransitionEnd(),e.Util.falseFn(this._el.offsetWidth))},_onStep:function(){var a=this._getPos();return a?(this._el._leaflet_pos=a,void this.fire("step")):void this._onTransitionEnd()},_transformRe:/([-+]?(?:\d*\.)?\d+)\D*, ([-+]?(?:\d*\.)?\d+)\D*\)/,_getPos:function(){var b,c,d,f=this._el,g=a.getComputedStyle(f);if(e.Browser.any3d){if(d=g[e.DomUtil.TRANSFORM].match(this._transformRe),!d)return;b=parseFloat(d[1]),c=parseFloat(d[2])}else b=parseFloat(g.left),c=parseFloat(g.top);return new e.Point(b,c,!0)},_onTransitionEnd:function(){e.DomEvent.off(this._el,e.DomUtil.TRANSITION_END,this._onTransitionEnd,this),this._inProgress&&(this._inProgress=!1,this._el.style[e.DomUtil.TRANSITION]="",this._el._leaflet_pos=this._newPos,clearInterval(this._stepTimer),this.fire("step").fire("end"))}}),e.Map.include({setView:function(a,b,d){if(b=b===c?this._zoom:this._limitZoom(b),a=this._limitCenter(e.latLng(a),b,this.options.maxBounds),d=d||{},this._panAnim&&this._panAnim.stop(),this._loaded&&!d.reset&&d!==!0){d.animate!==c&&(d.zoom=e.extend({animate:d.animate},d.zoom),d.pan=e.extend({animate:d.animate},d.pan));var f=this._zoom!==b?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,b,d.zoom):this._tryAnimatedPan(a,d.pan);if(f)return clearTimeout(this._sizeTimer),this}return this._resetView(a,b),this},panBy:function(a,b){if(a=e.point(a).round(),b=b||{},!a.x&&!a.y)return this;if(b.animate!==!0&&!this.getSize().contains(a))return this._resetView(this.unproject(this.project(this.getCenter()).add(a)),this.getZoom());if(this._panAnim||(this._panAnim=new e.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),b.noMoveStart||this.fire("movestart"),b.animate!==!1){e.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(a);this._panAnim.run(this._mapPane,c,b.duration||.25,b.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){e.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,b){var c=this._getCenterOffset(a)._floor();return(b&&b.animate)===!0||this.getSize().contains(c)?(this.panBy(c,b),!0):!1}}),e.PosAnimation=e.DomUtil.TRANSITION?e.PosAnimation:e.PosAnimation.extend({run:function(a,b,c,d){this.stop(),this._el=a,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(d||.5,.2),this._startPos=e.DomUtil.getPosition(a),this._offset=b.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(),this._complete())},_animate:function(){this._animId=e.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(){var a=+new Date-this._startTime,b=1e3*this._duration;b>a?this._runFrame(this._easeOut(a/b)):(this._runFrame(1),this._complete())},_runFrame:function(a){var b=this._startPos.add(this._offset.multiplyBy(a));e.DomUtil.setPosition(this._el,b),this.fire("step")},_complete:function(){e.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),e.Map.mergeOptions({zoomAnimation:!0,zoomAnimationThreshold:4});var i=e.DomUtil.TRANSITION&&e.Browser.any3d&&!e.Browser.mobileOpera;i&&e.Map.addInitHook(function(){this._zoomAnimated=this.options.zoomAnimation,this._zoomAnimated&&e.DomEvent.on(this._mapPane,e.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)}),e.Map.include(i?{_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,b,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(b-this._zoom)>this.options.zoomAnimationThreshold)return!1;var d=this.getZoomScale(b),f=this._getCenterOffset(a)._divideBy(1-1/d);return c.animate===!0||this.getSize().contains(f)?(e.Util.requestAnimFrame(function(){this.fire("movestart").fire("zoomstart")._animateZoom(a,b,!0)},this),!0):!1},_animateZoom:function(a,b,c){c&&(this._animatingZoom=!0,this._animateToCenter=a,this._animateToZoom=b,e.Draggable&&(e.Draggable._disabled=!0),e.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim"));var d=this.getZoomScale(b),f=this._getCenterLayerPoint().add(this._getCenterOffset(a)._divideBy(1-1/d));this.fire("zoomanim",{center:a,zoom:b,origin:f,scale:d})},_onZoomTransitionEnd:function(){this._animatingZoom=!1,e.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),this._resetView(this._animateToCenter,this._animateToZoom,!0,!0),e.Draggable&&(e.Draggable._disabled=!1)}}:{}),e.Map.include({_defaultLocateOptions:{timeout:1e4,watch:!1},locate:function(a){if(a=this._locateOptions=e.extend(this._defaultLocateOptions,a),!navigator.geolocation)return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var b=e.bind(this._handleGeolocationResponse,this),c=e.bind(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(b,c,a):navigator.geolocation.getCurrentPosition(b,c,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){var b=a.code,c=a.message||(1===b?"permission denied":2===b?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:b,message:"Geolocation error: "+c+"."})},_handleGeolocationResponse:function(a){var b=a.coords.latitude,c=a.coords.longitude,d=new e.LatLng(b,c),f=180*a.coords.accuracy/40075017,g=f/Math.cos(Math.PI/180*b),h=e.latLngBounds([b-f,c-g],[b+f,c+g]),i=this._locateOptions;if(i.setView){var j=this.getBoundsZoom(h);this.setView(d,i.maxZoom?Math.min(j,i.maxZoom):j)}var k={latlng:d,bounds:h,timestamp:a.timestamp};for(var l in a.coords)"number"==typeof a.coords[l]&&(k[l]=a.coords[l]);this.fire("locationfound",k)}})}(window,document),!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){function c(a,b,c){function d(a){return a>=200&&300>a||304===a}function e(){void 0===h.status||d(h.status)?b.call(h,null,h):b.call(h,h,null)}var f=!1;if("undefined"==typeof window.XMLHttpRequest)return b(Error("Browser not supported"));if("undefined"==typeof c){var g=a.match(/^\s*https?:\/\/[^\/]*/);c=g&&g[0]!==location.protocol+"//"+location.domain+(location.port?":"+location.port:"")}var h=new window.XMLHttpRequest;if(c&&!("withCredentials"in h)){h=new window.XDomainRequest;var i=b;b=function(){if(f)i.apply(this,arguments);else{var a=this,b=arguments;setTimeout(function(){i.apply(a,b)},0)}}}return"onload"in h?h.onload=e:h.onreadystatechange=function(){4===h.readyState&&e()},h.onerror=function(a){b.call(this,a||!0,null),b=function(){}},h.onprogress=function(){},h.ontimeout=function(a){b.call(this,a,null),b=function(){}},h.onabort=function(a){b.call(this,a,null),b=function(){}},h.open("GET",a,!0),h.send(null),f=!0,h}"undefined"!=typeof b&&(b.exports=c)},{}],2:[function(a,b,c){!function(a,b){if("object"==typeof c&&c)b(c);else{var d={};b(d),"function"==typeof define&&define.amd?define(d):a.Mustache=d}}(this,function(a){function b(a,b){return u.call(a,b)}function c(a){return!b(q,a)}function d(a){return"function"==typeof a}function e(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function f(a){return String(a).replace(/[&<>"'\/]/g,function(a){return x[a]})}function g(a){this.string=a,this.tail=a,this.pos=0}function h(a,b){this.view=null==a?{}:a,this.parent=b,this._cache={".":this.view}}function i(){this.clearCache()}function j(b,c,e,f){function g(a){return c.render(a,e)}for(var h,i,k,l="",m=0,n=b.length;n>m;++m)switch(h=b[m],i=h[1],h[0]){case"#":if(k=e.lookup(i),"object"==typeof k||"string"==typeof k)if(w(k))for(var o=0,p=k.length;p>o;++o)l+=j(h[4],c,e.push(k[o]),f);else k&&(l+=j(h[4],c,e.push(k),f));else if(d(k)){var q=null==f?null:f.slice(h[3],h[5]);k=k.call(e.view,q,g),null!=k&&(l+=k)}else k&&(l+=j(h[4],c,e,f));break;case"^":k=e.lookup(i),(!k||w(k)&&0===k.length)&&(l+=j(h[4],c,e,f));break;case">":k=c.getPartial(i),d(k)&&(l+=k(e));break;case"&":k=e.lookup(i),null!=k&&(l+=k);break;case"name":k=e.lookup(i),null!=k&&(l+=a.escape(k));break;case"text":l+=i}return l}function k(a){for(var b,c=[],d=c,e=[],f=0,g=a.length;g>f;++f)switch(b=a[f],b[0]){case"#":case"^":e.push(b),d.push(b),d=b[4]=[];break;case"/":var h=e.pop();h[5]=b[2],d=e.length>0?e[e.length-1][4]:c;break;default:d.push(b)}return c}function l(a){for(var b,c,d=[],e=0,f=a.length;f>e;++e)b=a[e],b&&("text"===b[0]&&c&&"text"===c[0]?(c[1]+=b[1],c[3]=b[3]):(c=b,d.push(b)));return d}function m(a){return[new RegExp(e(a[0])+"\\s*"),new RegExp("\\s*"+e(a[1]))]}function n(b,d){function f(){if(A&&!B)for(;z.length;)delete y[z.pop()];else z=[];A=!1,B=!1}if(b=b||"",d=d||a.tags,"string"==typeof d&&(d=d.split(p)),2!==d.length)throw new Error("Invalid tags: "+d.join(", "));for(var h,i,j,n,q,u,v=m(d),w=new g(b),x=[],y=[],z=[],A=!1,B=!1;!w.eos();){if(h=w.pos,j=w.scanUntil(v[0]))for(var C=0,D=j.length;D>C;++C)n=j.charAt(C),c(n)?z.push(y.length):B=!0,y.push(["text",n,h,h+1]),h+=1,"\n"==n&&f();if(!w.scan(v[0]))break;if(A=!0,i=w.scan(t)||"name",w.scan(o),"="===i?(j=w.scanUntil(r),w.scan(r),w.scanUntil(v[1])):"{"===i?(j=w.scanUntil(new RegExp("\\s*"+e("}"+d[1]))),w.scan(s),w.scanUntil(v[1]),i="&"):j=w.scanUntil(v[1]),!w.scan(v[1]))throw new Error("Unclosed tag at "+w.pos);if(q=[i,j,h,w.pos],y.push(q),"#"===i||"^"===i)x.push(q);else if("/"===i){if(u=x.pop(),!u)throw new Error('Unopened section "'+j+'" at '+h);if(u[1]!==j)throw new Error('Unclosed section "'+u[1]+'" at '+h)}else if("name"===i||"{"===i||"&"===i)B=!0;else if("="===i){if(d=j.split(p),2!==d.length)throw new Error("Invalid tags at "+h+": "+d.join(", "));v=m(d)}}if(u=x.pop())throw new Error('Unclosed section "'+u[1]+'" at '+w.pos);return k(l(y))}var o=/\s*/,p=/\s+/,q=/\S/,r=/\s*=/,s=/\s*\}/,t=/#|\^|\/|>|\{|&|=|!/,u=RegExp.prototype.test,v=Object.prototype.toString,w=Array.isArray||function(a){return"[object Array]"===v.call(a)},x={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};g.prototype.eos=function(){return""===this.tail},g.prototype.scan=function(a){var b=this.tail.match(a);if(b&&0===b.index){var c=b[0];return this.tail=this.tail.substring(c.length),this.pos+=c.length,c}return""},g.prototype.scanUntil=function(a){var b,c=this.tail.search(a);switch(c){case-1:b=this.tail,this.tail="";break;case 0:b="";break;default:b=this.tail.substring(0,c),this.tail=this.tail.substring(c)}return this.pos+=b.length,b},h.make=function(a){return a instanceof h?a:new h(a)},h.prototype.push=function(a){return new h(a,this)},h.prototype.lookup=function(a){var b;if(a in this._cache)b=this._cache[a];else{for(var c=this;c;){if(a.indexOf(".")>0){b=c.view;for(var e=a.split("."),f=0;null!=b&&f<e.length;)b=b[e[f++]]}else b=c.view[a];if(null!=b)break;c=c.parent}this._cache[a]=b}return d(b)&&(b=b.call(this.view)),b},i.prototype.clearCache=function(){this._cache={},this._partialCache={}},i.prototype.compile=function(b,c){var d=this._cache[b];if(!d){var e=a.parse(b,c);d=this._cache[b]=this.compileTokens(e,b)}return d},i.prototype.compilePartial=function(a,b,c){var d=this.compile(b,c);return this._partialCache[a]=d,d},i.prototype.getPartial=function(a){return a in this._partialCache||!this._loadPartial||this.compilePartial(a,this._loadPartial(a)),this._partialCache[a]},i.prototype.compileTokens=function(a,b){var c=this;return function(e,f){if(f)if(d(f))c._loadPartial=f;else for(var g in f)c.compilePartial(g,f[g]);return j(a,c,h.make(e),b)}},i.prototype.render=function(a,b,c){return this.compile(a)(b,c)},a.name="mustache.js",a.version="0.7.3",a.tags=["{{","}}"],a.Scanner=g,a.Context=h,a.Writer=i,a.parse=n,a.escape=f;var y=new i;a.clearCache=function(){return y.clearCache()},a.compile=function(a,b){return y.compile(a,b)},a.compilePartial=function(a,b,c){return y.compilePartial(a,b,c)},a.compileTokens=function(a,b){return y.compileTokens(a,b)},a.render=function(a,b,c){return y.render(a,b,c)},a.to_html=function(b,c,e,f){var g=a.render(b,c,e);return d(f)?void f(g):g}})},{}],3:[function(a,b){function c(a){"use strict";return/^https?/.test(a.getScheme())?a.toString():/^mailto?/.test(a.getScheme())?a.toString():"data"==a.getScheme()&&/^image/.test(a.getPath())?a.toString():void 0}function d(a){return a}var e=a("./sanitizer-bundle.js");b.exports=function(a){return a?e(a,c,d):""}},{"./sanitizer-bundle.js":4}],4:[function(a,b){var c=function(){function a(a){var b=(""+a).match(n);return b?new i(j(b[1]),j(b[2]),j(b[3]),j(b[4]),j(b[5]),j(b[6]),j(b[7])):null}function b(a,b,f,g,h,j,k){var l=new i(d(a,o),d(b,o),c(f),g>0?g.toString():null,d(h,p),null,c(k));return j&&("string"==typeof j?l.setRawQuery(j.replace(/[^?&=0-9A-Za-z_\-~.%]/g,e)):l.setAllParameters(j)),l}function c(a){return"string"==typeof a?encodeURIComponent(a):null}function d(a,b){return"string"==typeof a?encodeURI(a).replace(b,e):null}function e(a){var b=a.charCodeAt(0);return"%"+"0123456789ABCDEF".charAt(b>>4&15)+"0123456789ABCDEF".charAt(15&b)}function f(a){return a.replace(/(^|\/)\.(?:\/|$)/g,"$1").replace(/\/{2,}/g,"/")}function g(a){if(null===a)return null;for(var b,c=f(a),d=l;(b=c.replace(d,"$1"))!=c;c=b);return c}function h(a,b){var c=a.clone(),d=b.hasScheme();d?c.setRawScheme(b.getRawScheme()):d=b.hasCredentials(),d?c.setRawCredentials(b.getRawCredentials()):d=b.hasDomain(),d?c.setRawDomain(b.getRawDomain()):d=b.hasPort();var e=b.getRawPath(),f=g(e);if(d)c.setPort(b.getPort()),f=f&&f.replace(m,"");else if(d=!!e){if(47!==f.charCodeAt(0)){var h=g(c.getRawPath()||"").replace(m,""),i=h.lastIndexOf("/")+1;f=g((i?h.substring(0,i):"")+g(e)).replace(m,"")}}else f=f&&f.replace(m,""),f!==e&&c.setRawPath(f);
return d?c.setRawPath(f):d=b.hasQuery(),d?c.setRawQuery(b.getRawQuery()):d=b.hasFragment(),d&&c.setRawFragment(b.getRawFragment()),c}function i(a,b,c,d,e,f,g){this.scheme_=a,this.credentials_=b,this.domain_=c,this.port_=d,this.path_=e,this.query_=f,this.fragment_=g,this.paramCache_=null}function j(a){return"string"==typeof a&&a.length>0?a:null}var k=new RegExp("(/|^)(?:[^./][^/]*|\\.{2,}(?:[^./][^/]*)|\\.{3,}[^/]*)/\\.\\.(?:/|$)"),l=new RegExp(k),m=/^(?:\.\.\/)*(?:\.\.$)?/;i.prototype.toString=function(){var a=[];return null!==this.scheme_&&a.push(this.scheme_,":"),null!==this.domain_&&(a.push("//"),null!==this.credentials_&&a.push(this.credentials_,"@"),a.push(this.domain_),null!==this.port_&&a.push(":",this.port_.toString())),null!==this.path_&&a.push(this.path_),null!==this.query_&&a.push("?",this.query_),null!==this.fragment_&&a.push("#",this.fragment_),a.join("")},i.prototype.clone=function(){return new i(this.scheme_,this.credentials_,this.domain_,this.port_,this.path_,this.query_,this.fragment_)},i.prototype.getScheme=function(){return this.scheme_&&decodeURIComponent(this.scheme_).toLowerCase()},i.prototype.getRawScheme=function(){return this.scheme_},i.prototype.setScheme=function(a){return this.scheme_=d(a,o),this},i.prototype.setRawScheme=function(a){return this.scheme_=a?a:null,this},i.prototype.hasScheme=function(){return null!==this.scheme_},i.prototype.getCredentials=function(){return this.credentials_&&decodeURIComponent(this.credentials_)},i.prototype.getRawCredentials=function(){return this.credentials_},i.prototype.setCredentials=function(a){return this.credentials_=d(a,o),this},i.prototype.setRawCredentials=function(a){return this.credentials_=a?a:null,this},i.prototype.hasCredentials=function(){return null!==this.credentials_},i.prototype.getDomain=function(){return this.domain_&&decodeURIComponent(this.domain_)},i.prototype.getRawDomain=function(){return this.domain_},i.prototype.setDomain=function(a){return this.setRawDomain(a&&encodeURIComponent(a))},i.prototype.setRawDomain=function(a){return this.domain_=a?a:null,this.setRawPath(this.path_)},i.prototype.hasDomain=function(){return null!==this.domain_},i.prototype.getPort=function(){return this.port_&&decodeURIComponent(this.port_)},i.prototype.setPort=function(a){if(a){if(a=Number(a),a!==(65535&a))throw new Error("Bad port number "+a);this.port_=""+a}else this.port_=null;return this},i.prototype.hasPort=function(){return null!==this.port_},i.prototype.getPath=function(){return this.path_&&decodeURIComponent(this.path_)},i.prototype.getRawPath=function(){return this.path_},i.prototype.setPath=function(a){return this.setRawPath(d(a,p))},i.prototype.setRawPath=function(a){return a?(a=String(a),this.path_=!this.domain_||/^\//.test(a)?a:"/"+a):this.path_=null,this},i.prototype.hasPath=function(){return null!==this.path_},i.prototype.getQuery=function(){return this.query_&&decodeURIComponent(this.query_).replace(/\+/g," ")},i.prototype.getRawQuery=function(){return this.query_},i.prototype.setQuery=function(a){return this.paramCache_=null,this.query_=c(a),this},i.prototype.setRawQuery=function(a){return this.paramCache_=null,this.query_=a?a:null,this},i.prototype.hasQuery=function(){return null!==this.query_},i.prototype.setAllParameters=function(a){if("object"==typeof a&&!(a instanceof Array)&&(a instanceof Object||"[object Array]"!==Object.prototype.toString.call(a))){var b=[],c=-1;for(var d in a){var e=a[d];"string"==typeof e&&(b[++c]=d,b[++c]=e)}a=b}this.paramCache_=null;for(var f=[],g="",h=0;h<a.length;){var d=a[h++],e=a[h++];f.push(g,encodeURIComponent(d.toString())),g="&",e&&f.push("=",encodeURIComponent(e.toString()))}return this.query_=f.join(""),this},i.prototype.checkParameterCache_=function(){if(!this.paramCache_){var a=this.query_;if(a){for(var b=a.split(/[&\?]/),c=[],d=-1,e=0;e<b.length;++e){var f=b[e].match(/^([^=]*)(?:=(.*))?$/);c[++d]=decodeURIComponent(f[1]).replace(/\+/g," "),c[++d]=decodeURIComponent(f[2]||"").replace(/\+/g," ")}this.paramCache_=c}else this.paramCache_=[]}},i.prototype.setParameterValues=function(a,b){"string"==typeof b&&(b=[b]),this.checkParameterCache_();for(var c=0,d=this.paramCache_,e=[],f=0;f<d.length;f+=2)a===d[f]?c<b.length&&e.push(a,b[c++]):e.push(d[f],d[f+1]);for(;c<b.length;)e.push(a,b[c++]);return this.setAllParameters(e),this},i.prototype.removeParameter=function(a){return this.setParameterValues(a,[])},i.prototype.getAllParameters=function(){return this.checkParameterCache_(),this.paramCache_.slice(0,this.paramCache_.length)},i.prototype.getParameterValues=function(a){this.checkParameterCache_();for(var b=[],c=0;c<this.paramCache_.length;c+=2)a===this.paramCache_[c]&&b.push(this.paramCache_[c+1]);return b},i.prototype.getParameterMap=function(){this.checkParameterCache_();for(var a={},b=0;b<this.paramCache_.length;b+=2){var c=this.paramCache_[b++],d=this.paramCache_[b++];c in a?a[c].push(d):a[c]=[d]}return a},i.prototype.getParameterValue=function(a){this.checkParameterCache_();for(var b=0;b<this.paramCache_.length;b+=2)if(a===this.paramCache_[b])return this.paramCache_[b+1];return null},i.prototype.getFragment=function(){return this.fragment_&&decodeURIComponent(this.fragment_)},i.prototype.getRawFragment=function(){return this.fragment_},i.prototype.setFragment=function(a){return this.fragment_=a?encodeURIComponent(a):null,this},i.prototype.setRawFragment=function(a){return this.fragment_=a?a:null,this},i.prototype.hasFragment=function(){return null!==this.fragment_};var n=new RegExp("^(?:([^:/?#]+):)?(?://(?:([^/?#]*)@)?([^/?#:@]*)(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$"),o=/[#\/\?@]/g,p=/[\#\?]/g;return i.parse=a,i.create=b,i.resolve=h,i.collapse_dots=g,i.utils={mimeTypeOf:function(b){var c=a(b);return/\.html$/.test(c.getPath())?"text/html":"application/javascript"},resolve:function(b,c){return b?h(a(b),a(c)).toString():""+c}},i}(),d={};if(d.atype={NONE:0,URI:1,URI_FRAGMENT:11,SCRIPT:2,STYLE:3,HTML:12,ID:4,IDREF:5,IDREFS:6,GLOBAL_NAME:7,LOCAL_NAME:8,CLASSES:9,FRAME_TARGET:10,MEDIA_QUERY:13},d.atype=d.atype,d.ATTRIBS={"*::class":9,"*::dir":0,"*::draggable":0,"*::hidden":0,"*::id":4,"*::inert":0,"*::itemprop":0,"*::itemref":6,"*::itemscope":0,"*::lang":0,"*::onblur":2,"*::onchange":2,"*::onclick":2,"*::ondblclick":2,"*::onfocus":2,"*::onkeydown":2,"*::onkeypress":2,"*::onkeyup":2,"*::onload":2,"*::onmousedown":2,"*::onmousemove":2,"*::onmouseout":2,"*::onmouseover":2,"*::onmouseup":2,"*::onreset":2,"*::onscroll":2,"*::onselect":2,"*::onsubmit":2,"*::onunload":2,"*::spellcheck":0,"*::style":3,"*::title":0,"*::translate":0,"a::accesskey":0,"a::coords":0,"a::href":1,"a::hreflang":0,"a::name":7,"a::onblur":2,"a::onfocus":2,"a::shape":0,"a::tabindex":0,"a::target":10,"a::type":0,"area::accesskey":0,"area::alt":0,"area::coords":0,"area::href":1,"area::nohref":0,"area::onblur":2,"area::onfocus":2,"area::shape":0,"area::tabindex":0,"area::target":10,"audio::controls":0,"audio::loop":0,"audio::mediagroup":5,"audio::muted":0,"audio::preload":0,"bdo::dir":0,"blockquote::cite":1,"br::clear":0,"button::accesskey":0,"button::disabled":0,"button::name":8,"button::onblur":2,"button::onfocus":2,"button::tabindex":0,"button::type":0,"button::value":0,"canvas::height":0,"canvas::width":0,"caption::align":0,"col::align":0,"col::char":0,"col::charoff":0,"col::span":0,"col::valign":0,"col::width":0,"colgroup::align":0,"colgroup::char":0,"colgroup::charoff":0,"colgroup::span":0,"colgroup::valign":0,"colgroup::width":0,"command::checked":0,"command::command":5,"command::disabled":0,"command::icon":1,"command::label":0,"command::radiogroup":0,"command::type":0,"data::value":0,"del::cite":1,"del::datetime":0,"details::open":0,"dir::compact":0,"div::align":0,"dl::compact":0,"fieldset::disabled":0,"font::color":0,"font::face":0,"font::size":0,"form::accept":0,"form::action":1,"form::autocomplete":0,"form::enctype":0,"form::method":0,"form::name":7,"form::novalidate":0,"form::onreset":2,"form::onsubmit":2,"form::target":10,"h1::align":0,"h2::align":0,"h3::align":0,"h4::align":0,"h5::align":0,"h6::align":0,"hr::align":0,"hr::noshade":0,"hr::size":0,"hr::width":0,"iframe::align":0,"iframe::frameborder":0,"iframe::height":0,"iframe::marginheight":0,"iframe::marginwidth":0,"iframe::width":0,"img::align":0,"img::alt":0,"img::border":0,"img::height":0,"img::hspace":0,"img::ismap":0,"img::name":7,"img::src":1,"img::usemap":11,"img::vspace":0,"img::width":0,"input::accept":0,"input::accesskey":0,"input::align":0,"input::alt":0,"input::autocomplete":0,"input::checked":0,"input::disabled":0,"input::inputmode":0,"input::ismap":0,"input::list":5,"input::max":0,"input::maxlength":0,"input::min":0,"input::multiple":0,"input::name":8,"input::onblur":2,"input::onchange":2,"input::onfocus":2,"input::onselect":2,"input::placeholder":0,"input::readonly":0,"input::required":0,"input::size":0,"input::src":1,"input::step":0,"input::tabindex":0,"input::type":0,"input::usemap":11,"input::value":0,"ins::cite":1,"ins::datetime":0,"label::accesskey":0,"label::for":5,"label::onblur":2,"label::onfocus":2,"legend::accesskey":0,"legend::align":0,"li::type":0,"li::value":0,"map::name":7,"menu::compact":0,"menu::label":0,"menu::type":0,"meter::high":0,"meter::low":0,"meter::max":0,"meter::min":0,"meter::value":0,"ol::compact":0,"ol::reversed":0,"ol::start":0,"ol::type":0,"optgroup::disabled":0,"optgroup::label":0,"option::disabled":0,"option::label":0,"option::selected":0,"option::value":0,"output::for":6,"output::name":8,"p::align":0,"pre::width":0,"progress::max":0,"progress::min":0,"progress::value":0,"q::cite":1,"select::autocomplete":0,"select::disabled":0,"select::multiple":0,"select::name":8,"select::onblur":2,"select::onchange":2,"select::onfocus":2,"select::required":0,"select::size":0,"select::tabindex":0,"source::type":0,"table::align":0,"table::bgcolor":0,"table::border":0,"table::cellpadding":0,"table::cellspacing":0,"table::frame":0,"table::rules":0,"table::summary":0,"table::width":0,"tbody::align":0,"tbody::char":0,"tbody::charoff":0,"tbody::valign":0,"td::abbr":0,"td::align":0,"td::axis":0,"td::bgcolor":0,"td::char":0,"td::charoff":0,"td::colspan":0,"td::headers":6,"td::height":0,"td::nowrap":0,"td::rowspan":0,"td::scope":0,"td::valign":0,"td::width":0,"textarea::accesskey":0,"textarea::autocomplete":0,"textarea::cols":0,"textarea::disabled":0,"textarea::inputmode":0,"textarea::name":8,"textarea::onblur":2,"textarea::onchange":2,"textarea::onfocus":2,"textarea::onselect":2,"textarea::placeholder":0,"textarea::readonly":0,"textarea::required":0,"textarea::rows":0,"textarea::tabindex":0,"textarea::wrap":0,"tfoot::align":0,"tfoot::char":0,"tfoot::charoff":0,"tfoot::valign":0,"th::abbr":0,"th::align":0,"th::axis":0,"th::bgcolor":0,"th::char":0,"th::charoff":0,"th::colspan":0,"th::headers":6,"th::height":0,"th::nowrap":0,"th::rowspan":0,"th::scope":0,"th::valign":0,"th::width":0,"thead::align":0,"thead::char":0,"thead::charoff":0,"thead::valign":0,"tr::align":0,"tr::bgcolor":0,"tr::char":0,"tr::charoff":0,"tr::valign":0,"track::default":0,"track::kind":0,"track::label":0,"track::srclang":0,"ul::compact":0,"ul::type":0,"video::controls":0,"video::height":0,"video::loop":0,"video::mediagroup":5,"video::muted":0,"video::poster":1,"video::preload":0,"video::width":0},d.ATTRIBS=d.ATTRIBS,d.eflags={OPTIONAL_ENDTAG:1,EMPTY:2,CDATA:4,RCDATA:8,UNSAFE:16,FOLDABLE:32,SCRIPT:64,STYLE:128,VIRTUALIZED:256},d.eflags=d.eflags,d.ELEMENTS={a:0,abbr:0,acronym:0,address:0,applet:272,area:2,article:0,aside:0,audio:0,b:0,base:274,basefont:274,bdi:0,bdo:0,big:0,blockquote:0,body:305,br:2,button:0,canvas:0,caption:0,center:0,cite:0,code:0,col:2,colgroup:1,command:2,data:0,datalist:0,dd:1,del:0,details:0,dfn:0,dialog:272,dir:0,div:0,dl:0,dt:1,em:0,fieldset:0,figcaption:0,figure:0,font:0,footer:0,form:0,frame:274,frameset:272,h1:0,h2:0,h3:0,h4:0,h5:0,h6:0,head:305,header:0,hgroup:0,hr:2,html:305,i:0,iframe:4,img:2,input:2,ins:0,isindex:274,kbd:0,keygen:274,label:0,legend:0,li:1,link:274,map:0,mark:0,menu:0,meta:274,meter:0,nav:0,nobr:0,noembed:276,noframes:276,noscript:276,object:272,ol:0,optgroup:0,option:1,output:0,p:1,param:274,pre:0,progress:0,q:0,s:0,samp:0,script:84,section:0,select:0,small:0,source:2,span:0,strike:0,strong:0,style:148,sub:0,summary:0,sup:0,table:0,tbody:1,td:1,textarea:8,tfoot:1,th:1,thead:1,time:0,title:280,tr:1,track:2,tt:0,u:0,ul:0,"var":0,video:0,wbr:2},d.ELEMENTS=d.ELEMENTS,d.ELEMENT_DOM_INTERFACES={a:"HTMLAnchorElement",abbr:"HTMLElement",acronym:"HTMLElement",address:"HTMLElement",applet:"HTMLAppletElement",area:"HTMLAreaElement",article:"HTMLElement",aside:"HTMLElement",audio:"HTMLAudioElement",b:"HTMLElement",base:"HTMLBaseElement",basefont:"HTMLBaseFontElement",bdi:"HTMLElement",bdo:"HTMLElement",big:"HTMLElement",blockquote:"HTMLQuoteElement",body:"HTMLBodyElement",br:"HTMLBRElement",button:"HTMLButtonElement",canvas:"HTMLCanvasElement",caption:"HTMLTableCaptionElement",center:"HTMLElement",cite:"HTMLElement",code:"HTMLElement",col:"HTMLTableColElement",colgroup:"HTMLTableColElement",command:"HTMLCommandElement",data:"HTMLElement",datalist:"HTMLDataListElement",dd:"HTMLElement",del:"HTMLModElement",details:"HTMLDetailsElement",dfn:"HTMLElement",dialog:"HTMLDialogElement",dir:"HTMLDirectoryElement",div:"HTMLDivElement",dl:"HTMLDListElement",dt:"HTMLElement",em:"HTMLElement",fieldset:"HTMLFieldSetElement",figcaption:"HTMLElement",figure:"HTMLElement",font:"HTMLFontElement",footer:"HTMLElement",form:"HTMLFormElement",frame:"HTMLFrameElement",frameset:"HTMLFrameSetElement",h1:"HTMLHeadingElement",h2:"HTMLHeadingElement",h3:"HTMLHeadingElement",h4:"HTMLHeadingElement",h5:"HTMLHeadingElement",h6:"HTMLHeadingElement",head:"HTMLHeadElement",header:"HTMLElement",hgroup:"HTMLElement",hr:"HTMLHRElement",html:"HTMLHtmlElement",i:"HTMLElement",iframe:"HTMLIFrameElement",img:"HTMLImageElement",input:"HTMLInputElement",ins:"HTMLModElement",isindex:"HTMLUnknownElement",kbd:"HTMLElement",keygen:"HTMLKeygenElement",label:"HTMLLabelElement",legend:"HTMLLegendElement",li:"HTMLLIElement",link:"HTMLLinkElement",map:"HTMLMapElement",mark:"HTMLElement",menu:"HTMLMenuElement",meta:"HTMLMetaElement",meter:"HTMLMeterElement",nav:"HTMLElement",nobr:"HTMLElement",noembed:"HTMLElement",noframes:"HTMLElement",noscript:"HTMLElement",object:"HTMLObjectElement",ol:"HTMLOListElement",optgroup:"HTMLOptGroupElement",option:"HTMLOptionElement",output:"HTMLOutputElement",p:"HTMLParagraphElement",param:"HTMLParamElement",pre:"HTMLPreElement",progress:"HTMLProgressElement",q:"HTMLQuoteElement",s:"HTMLElement",samp:"HTMLElement",script:"HTMLScriptElement",section:"HTMLElement",select:"HTMLSelectElement",small:"HTMLElement",source:"HTMLSourceElement",span:"HTMLSpanElement",strike:"HTMLElement",strong:"HTMLElement",style:"HTMLStyleElement",sub:"HTMLElement",summary:"HTMLElement",sup:"HTMLElement",table:"HTMLTableElement",tbody:"HTMLTableSectionElement",td:"HTMLTableDataCellElement",textarea:"HTMLTextAreaElement",tfoot:"HTMLTableSectionElement",th:"HTMLTableHeaderCellElement",thead:"HTMLTableSectionElement",time:"HTMLTimeElement",title:"HTMLTitleElement",tr:"HTMLTableRowElement",track:"HTMLTrackElement",tt:"HTMLElement",u:"HTMLElement",ul:"HTMLUListElement","var":"HTMLElement",video:"HTMLVideoElement",wbr:"HTMLElement"},d.ELEMENT_DOM_INTERFACES=d.ELEMENT_DOM_INTERFACES,d.ueffects={NOT_LOADED:0,SAME_DOCUMENT:1,NEW_DOCUMENT:2},d.ueffects=d.ueffects,d.URIEFFECTS={"a::href":2,"area::href":2,"blockquote::cite":0,"command::icon":1,"del::cite":0,"form::action":2,"img::src":1,"input::src":1,"ins::cite":0,"q::cite":0,"video::poster":1},d.URIEFFECTS=d.URIEFFECTS,d.ltypes={UNSANDBOXED:2,SANDBOXED:1,DATA:0},d.ltypes=d.ltypes,d.LOADERTYPES={"a::href":2,"area::href":2,"blockquote::cite":2,"command::icon":1,"del::cite":2,"form::action":2,"img::src":1,"input::src":1,"ins::cite":2,"q::cite":2,"video::poster":1},d.LOADERTYPES=d.LOADERTYPES,"i"!=="I".toLowerCase())throw"I/i problem";var e=function(a){function b(a){if(F.hasOwnProperty(a))return F[a];var b=a.match(G);if(b)return String.fromCharCode(parseInt(b[1],10));if(b=a.match(H))return String.fromCharCode(parseInt(b[1],16));if(J&&I.test(a)){J.innerHTML="&"+a+";";var c=J.textContent;return F[a]=c,c}return"&"+a+";"}function d(a,c){return b(c)}function e(a){return a.replace(K,"")}function f(a){return a.replace(L,d)}function g(a){return(""+a).replace(N,"&amp;").replace(P,"&lt;").replace(Q,"&gt;").replace(R,"&#34;")}function h(a){return a.replace(O,"&amp;$1").replace(P,"&lt;").replace(Q,"&gt;")}function i(a){var b={cdata:a.cdata||a.cdata,comment:a.comment||a.comment,endDoc:a.endDoc||a.endDoc,endTag:a.endTag||a.endTag,pcdata:a.pcdata||a.pcdata,rcdata:a.rcdata||a.rcdata,startDoc:a.startDoc||a.startDoc,startTag:a.startTag||a.startTag};return function(a,c){return j(a,b,c)}}function j(a,b,c){var d=m(a),e={noMoreGT:!1,noMoreEndComments:!1};l(b,d,0,e,c)}function k(a,b,c,d,e){return function(){l(a,b,c,d,e)}}function l(b,c,d,e,f){try{b.startDoc&&0==d&&b.startDoc(f);for(var g,h,i,j=d,l=c.length;l>j;){var m=c[j++],q=c[j];switch(m){case"&":M.test(q)?(b.pcdata&&b.pcdata("&"+q,f,V,k(b,c,j,e,f)),j++):b.pcdata&&b.pcdata("&amp;",f,V,k(b,c,j,e,f));break;case"</":(g=/^([-\w:]+)[^\'\"]*/.exec(q))?g[0].length===q.length&&">"===c[j+1]?(j+=2,i=g[1].toLowerCase(),b.endTag&&b.endTag(i,f,V,k(b,c,j,e,f))):j=n(c,j,b,f,V,e):b.pcdata&&b.pcdata("&lt;/",f,V,k(b,c,j,e,f));break;case"<":if(g=/^([-\w:]+)\s*\/?/.exec(q))if(g[0].length===q.length&&">"===c[j+1]){j+=2,i=g[1].toLowerCase(),b.startTag&&b.startTag(i,[],f,V,k(b,c,j,e,f));var r=a.ELEMENTS[i];if(r&U){var s={name:i,next:j,eflags:r};j=p(c,s,b,f,V,e)}}else j=o(c,j,b,f,V,e);else b.pcdata&&b.pcdata("&lt;",f,V,k(b,c,j,e,f));break;case"<!--":if(!e.noMoreEndComments){for(h=j+1;l>h&&(">"!==c[h]||!/--$/.test(c[h-1]));h++);if(l>h){if(b.comment){var t=c.slice(j,h).join("");b.comment(t.substr(0,t.length-2),f,V,k(b,c,h+1,e,f))}j=h+1}else e.noMoreEndComments=!0}e.noMoreEndComments&&b.pcdata&&b.pcdata("&lt;!--",f,V,k(b,c,j,e,f));break;case"<!":if(/^\w/.test(q)){if(!e.noMoreGT){for(h=j+1;l>h&&">"!==c[h];h++);l>h?j=h+1:e.noMoreGT=!0}e.noMoreGT&&b.pcdata&&b.pcdata("&lt;!",f,V,k(b,c,j,e,f))}else b.pcdata&&b.pcdata("&lt;!",f,V,k(b,c,j,e,f));break;case"<?":if(!e.noMoreGT){for(h=j+1;l>h&&">"!==c[h];h++);l>h?j=h+1:e.noMoreGT=!0}e.noMoreGT&&b.pcdata&&b.pcdata("&lt;?",f,V,k(b,c,j,e,f));break;case">":b.pcdata&&b.pcdata("&gt;",f,V,k(b,c,j,e,f));break;case"":break;default:b.pcdata&&b.pcdata(m,f,V,k(b,c,j,e,f))}}b.endDoc&&b.endDoc(f)}catch(u){if(u!==V)throw u}}function m(a){var b=/(<\/|<\!--|<[!?]|[&<>])/g;if(a+="",T)return a.split(b);for(var c,d=[],e=0;null!==(c=b.exec(a));)d.push(a.substring(e,c.index)),d.push(c[0]),e=c.index+c[0].length;return d.push(a.substring(e)),d}function n(a,b,c,d,e,f){var g=q(a,b);return g?(c.endTag&&c.endTag(g.name,d,e,k(c,a,b,f,d)),g.next):a.length}function o(a,b,c,d,e,f){var g=q(a,b);return g?(c.startTag&&c.startTag(g.name,g.attrs,d,e,k(c,a,g.next,f,d)),g.eflags&U?p(a,g,c,d,e,f):g.next):a.length}function p(b,c,d,e,f,g){var i=b.length;W.hasOwnProperty(c.name)||(W[c.name]=new RegExp("^"+c.name+"(?:[\\s\\/]|$)","i"));for(var j=W[c.name],l=c.next,m=c.next+1;i>m&&("</"!==b[m-1]||!j.test(b[m]));m++);i>m&&(m-=1);var n=b.slice(l,m).join("");if(c.eflags&a.eflags.CDATA)d.cdata&&d.cdata(n,e,f,k(d,b,m,g,e));else{if(!(c.eflags&a.eflags.RCDATA))throw new Error("bug");d.rcdata&&d.rcdata(h(n),e,f,k(d,b,m,g,e))}return m}function q(b,c){var d=/^([-\w:]+)/.exec(b[c]),e={};e.name=d[1].toLowerCase(),e.eflags=a.ELEMENTS[e.name];for(var f=b[c].substr(d[0].length),g=c+1,h=b.length;h>g&&">"!==b[g];g++)f+=b[g];if(g>=h)return void 0;for(var i=[];""!==f;)if(d=S.exec(f)){if(d[4]&&!d[5]||d[6]&&!d[7]){for(var j=d[4]||d[6],k=!1,l=[f,b[g++]];h>g;g++){if(k){if(">"===b[g])break}else 0<=b[g].indexOf(j)&&(k=!0);l.push(b[g])}if(g>=h)break;f=l.join("");continue}var m=d[1].toLowerCase(),n=d[2]?r(d[3]):"";i.push(m,n),f=f.substr(d[0].length)}else f=f.replace(/^[\s\S][^a-z\s]*/,"");return e.attrs=i,e.next=g+1,e}function r(a){var b=a.charCodeAt(0);return(34===b||39===b)&&(a=a.substr(1,a.length-2)),f(e(a))}function s(b){var c,d,e=function(a,b){d||b.push(a)};return i({startDoc:function(){c=[],d=!1},startTag:function(e,f,h){if(!d&&a.ELEMENTS.hasOwnProperty(e)){var i=a.ELEMENTS[e];if(!(i&a.eflags.FOLDABLE)){var j=b(e,f);if(!j)return void(d=!(i&a.eflags.EMPTY));if("object"!=typeof j)throw new Error("tagPolicy did not return object (old API?)");if(!("attribs"in j))throw new Error("tagPolicy gave no attribs");f=j.attribs;var k,l;if("tagName"in j?(l=j.tagName,k=a.ELEMENTS[l]):(l=e,k=i),i&a.eflags.OPTIONAL_ENDTAG){var m=c[c.length-1];!m||m.orig!==e||m.rep===l&&e===l||h.push("</",m.rep,">")}i&a.eflags.EMPTY||c.push({orig:e,rep:l}),h.push("<",l);for(var n=0,o=f.length;o>n;n+=2){var p=f[n],q=f[n+1];null!==q&&void 0!==q&&h.push(" ",p,'="',g(q),'"')}h.push(">"),i&a.eflags.EMPTY&&!(k&a.eflags.EMPTY)&&h.push("</",l,">")}}},endTag:function(b,e){if(d)return void(d=!1);if(a.ELEMENTS.hasOwnProperty(b)){var f=a.ELEMENTS[b];if(!(f&(a.eflags.EMPTY|a.eflags.FOLDABLE))){var g;if(f&a.eflags.OPTIONAL_ENDTAG)for(g=c.length;--g>=0;){var h=c[g].orig;if(h===b)break;if(!(a.ELEMENTS[h]&a.eflags.OPTIONAL_ENDTAG))return}else for(g=c.length;--g>=0&&c[g].orig!==b;);if(0>g)return;for(var i=c.length;--i>g;){var j=c[i].rep;a.ELEMENTS[j]&a.eflags.OPTIONAL_ENDTAG||e.push("</",j,">")}g<c.length&&(b=c[g].rep),c.length=g,e.push("</",b,">")}}},pcdata:e,rcdata:e,cdata:e,endDoc:function(a){for(;c.length;c.length--)a.push("</",c[c.length-1].rep,">")}})}function t(a,b,d,e,f){if(!f)return null;try{var g=c.parse(""+a);if(g&&(!g.hasScheme()||X.test(g.getScheme()))){var h=f(g,b,d,e);return h?h.toString():null}}catch(i){return null}return null}function u(a,b,c,d,e){if(c||a(b+" removed",{change:"removed",tagName:b}),d!==e){var f="changed";d&&!e?f="removed":!d&&e&&(f="added"),a(b+"."+c+" "+f,{change:f,tagName:b,attribName:c,oldValue:d,newValue:e})}}function v(a,b,c){var d;return d=b+"::"+c,a.hasOwnProperty(d)?a[d]:(d="*::"+c,a.hasOwnProperty(d)?a[d]:void 0)}function w(b,c){return v(a.LOADERTYPES,b,c)}function x(b,c){return v(a.URIEFFECTS,b,c)}function y(b,c,d,e,f){for(var g=0;g<c.length;g+=2){var h,i=c[g],j=c[g+1],k=j,l=null;if(h=b+"::"+i,(a.ATTRIBS.hasOwnProperty(h)||(h="*::"+i,a.ATTRIBS.hasOwnProperty(h)))&&(l=a.ATTRIBS[h]),null!==l)switch(l){case a.atype.NONE:break;case a.atype.SCRIPT:j=null,f&&u(f,b,i,k,j);break;case a.atype.STYLE:if("undefined"==typeof C){j=null,f&&u(f,b,i,k,j);break}var m=[];C(j,{declaration:function(b,c){var e=b.toLowerCase(),f=E[e];f&&(D(e,f,c,d?function(b){return t(b,a.ueffects.SAME_DOCUMENT,a.ltypes.SANDBOXED,{TYPE:"CSS",CSS_PROP:e},d)}:null),m.push(b+": "+c.join(" ")))}}),j=m.length>0?m.join(" ; "):null,f&&u(f,b,i,k,j);break;case a.atype.ID:case a.atype.IDREF:case a.atype.IDREFS:case a.atype.GLOBAL_NAME:case a.atype.LOCAL_NAME:case a.atype.CLASSES:j=e?e(j):j,f&&u(f,b,i,k,j);break;case a.atype.URI:j=t(j,x(b,i),w(b,i),{TYPE:"MARKUP",XML_ATTR:i,XML_TAG:b},d),f&&u(f,b,i,k,j);break;case a.atype.URI_FRAGMENT:j&&"#"===j.charAt(0)?(j=j.substring(1),j=e?e(j):j,null!==j&&void 0!==j&&(j="#"+j)):j=null,f&&u(f,b,i,k,j);break;default:j=null,f&&u(f,b,i,k,j)}else j=null,f&&u(f,b,i,k,j);c[g+1]=j}return c}function z(b,c,d){return function(e,f){return a.ELEMENTS[e]&a.eflags.UNSAFE?void(d&&u(d,e,void 0,void 0,void 0)):{attribs:y(e,f,b,c,d)}}}function A(a,b){var c=[];return s(b)(a,c),c.join("")}function B(a,b,c,d){var e=z(b,c,d);return A(a,e)}var C,D,E;"undefined"!=typeof window&&(C=window.parseCssDeclarations,D=window.sanitizeCssProperty,E=window.cssSchema);var F={lt:"<",LT:"<",gt:">",GT:">",amp:"&",AMP:"&",quot:'"',apos:"'",nbsp:"Â "},G=/^#(\d+)$/,H=/^#x([0-9A-Fa-f]+)$/,I=/^[A-Za-z][A-za-z0-9]+$/,J="undefined"!=typeof window&&window.document?window.document.createElement("textarea"):null,K=/\0/g,L=/&(#[0-9]+|#[xX][0-9A-Fa-f]+|\w+);/g,M=/^(#[0-9]+|#[xX][0-9A-Fa-f]+|\w+);/,N=/&/g,O=/&([^a-z#]|#(?:[^0-9x]|x(?:[^0-9a-f]|$)|$)|$)/gi,P=/[<]/g,Q=/>/g,R=/\"/g,S=new RegExp("^\\s*([-.:\\w]+)(?:\\s*(=)\\s*((\")[^\"]*(\"|$)|(')[^']*('|$)|(?=[a-z][-\\w]*\\s*=)|[^\"'\\s]*))?","i"),T=3==="a,b".split(/(,)/).length,U=a.eflags.CDATA|a.eflags.RCDATA,V={},W={},X=/^(?:https?|mailto|data)$/i,Y={};return Y.escapeAttrib=Y.escapeAttrib=g,Y.makeHtmlSanitizer=Y.makeHtmlSanitizer=s,Y.makeSaxParser=Y.makeSaxParser=i,Y.makeTagPolicy=Y.makeTagPolicy=z,Y.normalizeRCData=Y.normalizeRCData=h,Y.sanitize=Y.sanitize=B,Y.sanitizeAttribs=Y.sanitizeAttribs=y,Y.sanitizeWithPolicy=Y.sanitizeWithPolicy=A,Y.unescapeEntities=Y.unescapeEntities=f,Y}(d),f=e.sanitize;d.ATTRIBS["*::style"]=0,d.ELEMENTS.style=0,d.ATTRIBS["a::target"]=0,d.ELEMENTS.video=0,d.ATTRIBS["video::src"]=0,d.ATTRIBS["video::poster"]=0,d.ATTRIBS["video::controls"]=0,d.ELEMENTS.audio=0,d.ATTRIBS["audio::src"]=0,d.ATTRIBS["video::autoplay"]=0,d.ATTRIBS["video::controls"]=0,"undefined"!=typeof b&&(b.exports=f)},{}],5:[function(a,b){b.exports={author:"Mapbox",name:"mapbox.js",description:"mapbox javascript api",version:"2.1.2",homepage:"http://mapbox.com/",repository:{type:"git",url:"git://github.com/mapbox/mapbox.js.git"},main:"src/index.js",dependencies:{leaflet:"0.7.3",mustache:"0.7.3",corslite:"0.0.6","sanitize-caja":"0.1.2"},scripts:{test:"jshint src/*.js && mocha-phantomjs test/index.html"},devDependencies:{"leaflet-hash":"0.2.1","leaflet-fullscreen":"0.0.0","uglify-js":"2.4.8",mocha:"1.17.1","expect.js":"0.3.1",sinon:"1.10.2","mocha-phantomjs":"3.1.6",happen:"0.1.3",browserify:"3.23.1",jshint:"2.4.4","clean-css":"~2.0.7",minimist:"0.0.5",marked:"~0.3.0"},optionalDependencies:{},engines:{node:"*"}}},{}],6:[function(a,b){"use strict";b.exports={HTTP_URL:"http://a.tiles.mapbox.com/v4",HTTPS_URL:"https://a.tiles.mapbox.com/v4",FORCE_HTTPS:!1,REQUIRE_ACCESS_TOKEN:!0}},{}],7:[function(a,b){"use strict";var c=a("./util"),d=a("./url"),e=a("./request"),f=a("./marker"),g=a("./simplestyle"),h=L.FeatureGroup.extend({options:{filter:function(){return!0},sanitizer:a("sanitize-caja"),style:g.style,popupOptions:{closeButton:!1}},initialize:function(a,b){L.setOptions(this,b),this._layers={},"string"==typeof a?c.idUrl(a,this):a&&"object"==typeof a&&this.setGeoJSON(a)},setGeoJSON:function(a){return this._geojson=a,this.clearLayers(),this._initialize(a),this},getGeoJSON:function(){return this._geojson},loadURL:function(a){return this._request&&"abort"in this._request&&this._request.abort(),this._request=e(a,L.bind(function(b,d){this._request=null,b&&"abort"!==b.type?(c.log("could not load features at "+a),this.fire("error",{error:b})):d&&(this.setGeoJSON(d),this.fire("ready"))},this)),this},loadID:function(a){return this.loadURL(d("/"+a+"/features.json",this.options.accessToken))},setFilter:function(a){return this.options.filter=a,this._geojson&&(this.clearLayers(),this._initialize(this._geojson)),this},getFilter:function(){return this.options.filter},_initialize:function(a){var b,c,d=L.Util.isArray(a)?a:a.features;if(d)for(b=0,c=d.length;c>b;b++)(d[b].geometries||d[b].geometry||d[b].features)&&this._initialize(d[b]);else if(this.options.filter(a)){var e={accessToken:this.options.accessToken},h=L.GeoJSON.geometryToLayer(a,function(a,b){return f.style(a,b,e)}),i=f.createPopup(a,this.options.sanitizer);"setStyle"in h&&h.setStyle(g.style(a)),h.feature=a,i&&h.bindPopup(i,this.options.popupOptions),this.addLayer(h)}}});b.exports.FeatureLayer=h,b.exports.featureLayer=function(a,b){return new h(a,b)}},{"./marker":18,"./request":19,"./simplestyle":21,"./url":23,"./util":24,"sanitize-caja":3}],8:[function(a,b){"use strict";var c=a("./util"),d=a("./url"),e=a("./request");b.exports=function(a,b){var f={};return c.strict(a,"string"),-1===a.indexOf("/")&&(a=d("/geocode/"+a+"/{query}.json",b&&b.accessToken)),f.getURL=function(){return a},f.queryURL=function(a){if("string"!=typeof a){for(var b=[],c=0;c<a.length;c++)b[c]=encodeURIComponent(a[c]);return L.Util.template(f.getURL(),{query:b.join(";")})}return L.Util.template(f.getURL(),{query:encodeURIComponent(a)})},f.query=function(a,b){return c.strict(b,"function"),e(f.queryURL(a),function(a,d){if(d&&(d.length||d.features)){var e={results:d};d.features&&d.features.length&&(e.latlng=[d.features[0].center[1],d.features[0].center[0]],d.features[0].bbox&&(e.bounds=d.features[0].bbox,e.lbounds=c.lbounds(e.bounds))),b(null,e)}else b(a||!0)}),f},f.reverseQuery=function(a,b){function c(a){return void 0!==a.lat&&void 0!==a.lng?a.lng+","+a.lat:void 0!==a.lat&&void 0!==a.lon?a.lon+","+a.lat:a[0]+","+a[1]}var d="";if(a.length&&a[0].length){for(var g=0,h=[];g<a.length;g++)h.push(c(a[g]));d=h.join(";")}else d=c(a);return e(f.queryURL(d),function(a,c){b(a,c)}),f},f}},{"./request":19,"./url":23,"./util":24}],9:[function(a,b){"use strict";var c=a("./geocoder"),d=a("./util"),e=L.Control.extend({includes:L.Mixin.Events,options:{position:"topleft",pointZoom:16,keepOpen:!1,autocomplete:!1},initialize:function(a,b){L.Util.setOptions(this,b),this.setURL(a),this._updateSubmit=L.bind(this._updateSubmit,this),this._updateAutocomplete=L.bind(this._updateAutocomplete,this),this._chooseResult=L.bind(this._chooseResult,this)},setURL:function(a){return this.geocoder=c(a,{accessToken:this.options.accessToken}),this},getURL:function(){return this.geocoder.getURL()},setID:function(a){return this.setURL(a)},setTileJSON:function(a){return this.setURL(a.geocoder)},_toggle:function(a){a&&L.DomEvent.stop(a),L.DomUtil.hasClass(this._container,"active")?(L.DomUtil.removeClass(this._container,"active"),this._results.innerHTML="",this._input.blur()):(L.DomUtil.addClass(this._container,"active"),this._input.focus(),this._input.select())},_closeIfOpen:function(){L.DomUtil.hasClass(this._container,"active")&&!this.options.keepOpen&&(L.DomUtil.removeClass(this._container,"active"),this._results.innerHTML="",this._input.blur())},onAdd:function(a){var b=L.DomUtil.create("div","leaflet-control-mapbox-geocoder leaflet-bar leaflet-control"),c=L.DomUtil.create("a","leaflet-control-mapbox-geocoder-toggle mapbox-icon mapbox-icon-geocoder",b),d=L.DomUtil.create("div","leaflet-control-mapbox-geocoder-results",b),e=L.DomUtil.create("div","leaflet-control-mapbox-geocoder-wrap",b),f=L.DomUtil.create("form","leaflet-control-mapbox-geocoder-form",e),g=L.DomUtil.create("input","",f);return c.href="#",c.innerHTML="&nbsp;",g.type="text",g.setAttribute("placeholder","Search"),L.DomEvent.addListener(f,"submit",this._geocode,this),L.DomEvent.addListener(g,"keyup",this._autocomplete,this),L.DomEvent.disableClickPropagation(b),this._map=a,this._results=d,this._input=g,this._form=f,this.options.keepOpen?L.DomUtil.addClass(b,"active"):(this._map.on("click",this._closeIfOpen,this),L.DomEvent.addListener(c,"click",this._toggle,this)),b},_updateSubmit:function(a,b){if(L.DomUtil.removeClass(this._container,"searching"),this._results.innerHTML="",a||!b)this.fire("error",{error:a});else{var c=[];b.results&&b.results.features&&(c=b.results.features),1===c.length?(this.fire("autoselect",{feature:c[0]}),this.fire("found",{results:b.results}),this._chooseResult(c[0]),this._closeIfOpen()):c.length>1?(this.fire("found",{results:b.results}),this._displayResults(c)):this._displayResults(c)}},_updateAutocomplete:function(a,b){if(this._results.innerHTML="",a||!b)this.fire("error",{error:a});else{var c=[];b.results&&b.results.features&&(c=b.results.features),this._displayResults(c)}},_displayResults:function(a){for(var b=0,c=Math.min(a.length,5);c>b;b++){var d=a[b],e=d.place_name;if(e.length){var f=L.DomUtil.create("a","",this._results),g="innerText"in f?"innerText":"textContent";f[g]=e,f.href="#",L.bind(function(a){L.DomEvent.addListener(f,"click",function(b){this._chooseResult(a),L.DomEvent.stop(b),this.fire("select",{feature:a})},this)},this)(d)}}if(a.length>5){var h=L.DomUtil.create("span","",this._results);h.innerHTML="Top 5 of "+a.length+"  results"}},_chooseResult:function(a){a.bbox?this._map.fitBounds(d.lbounds(a.bbox)):a.center&&this._map.setView([a.center[1],a.center[0]],void 0===this._map.getZoom()?this.options.pointZoom:Math.max(this._map.getZoom(),this.options.pointZoom))},_geocode:function(a){return L.DomEvent.preventDefault(a),""===this._input.value?this._updateSubmit():(L.DomUtil.addClass(this._container,"searching"),void this.geocoder.query(this._input.value,this._updateSubmit))
},_autocomplete:function(){return this.options.autocomplete?""===this._input.value?this._updateAutocomplete():void this.geocoder.query(this._input.value,this._updateAutocomplete):void 0}});b.exports.GeocoderControl=e,b.exports.geocoderControl=function(a,b){return new e(a,b)}},{"./geocoder":8,"./util":24}],10:[function(a,b){"use strict";function c(a){return a>=93&&a--,a>=35&&a--,a-32}b.exports=function(a){return function(b,d){if(a){var e=c(a.grid[d].charCodeAt(b)),f=a.keys[e];return a.data[f]}}}},{}],11:[function(a,b){"use strict";var c=a("./util"),d=a("mustache"),e=L.Control.extend({options:{pinnable:!0,follow:!1,sanitizer:a("sanitize-caja"),touchTeaser:!0,location:!0},_currentContent:"",_pinned:!1,initialize:function(a,b){L.Util.setOptions(this,b),c.strict_instance(a,L.Class,"L.mapbox.gridLayer"),this._layer=a},setTemplate:function(a){return c.strict(a,"string"),this.options.template=a,this},_template:function(a,b){if(b){var c=this.options.template||this._layer.getTileJSON().template;if(c){var e={};return e["__"+a+"__"]=!0,this.options.sanitizer(d.to_html(c,L.extend(e,b)))}}},_show:function(a,b){a!==this._currentContent&&(this._currentContent=a,this.options.follow?(this._popup.setContent(a).setLatLng(b.latLng),this._map._popup!==this._popup&&this._popup.openOn(this._map)):(this._container.style.display="block",this._contentWrapper.innerHTML=a))},hide:function(){return this._pinned=!1,this._currentContent="",this._map.closePopup(),this._container.style.display="none",this._contentWrapper.innerHTML="",L.DomUtil.removeClass(this._container,"closable"),this},_mouseover:function(a){if(a.data?L.DomUtil.addClass(this._map._container,"map-clickable"):L.DomUtil.removeClass(this._map._container,"map-clickable"),!this._pinned){var b=this._template("teaser",a.data);b?this._show(b,a):this.hide()}},_mousemove:function(a){this._pinned||this.options.follow&&this._popup.setLatLng(a.latLng)},_navigateTo:function(a){window.top.location.href=a},_click:function(a){var b=this._template("location",a.data);if(this.options.location&&b&&0===b.search(/^https?:/))return this._navigateTo(this._template("location",a.data));if(this.options.pinnable){var c=this._template("full",a.data);!c&&this.options.touchTeaser&&L.Browser.touch&&(c=this._template("teaser",a.data)),c?(L.DomUtil.addClass(this._container,"closable"),this._pinned=!0,this._show(c,a)):this._pinned&&(L.DomUtil.removeClass(this._container,"closable"),this._pinned=!1,this.hide())}},_onPopupClose:function(){this._currentContent=null,this._pinned=!1},_createClosebutton:function(a,b){var c=L.DomUtil.create("a","close",a);return c.innerHTML="close",c.href="#",c.title="close",L.DomEvent.on(c,"click",L.DomEvent.stopPropagation).on(c,"mousedown",L.DomEvent.stopPropagation).on(c,"dblclick",L.DomEvent.stopPropagation).on(c,"click",L.DomEvent.preventDefault).on(c,"click",b,this),c},onAdd:function(a){this._map=a;var b="leaflet-control-grid map-tooltip",c=L.DomUtil.create("div",b),d=L.DomUtil.create("div","map-tooltip-content");return c.style.display="none",this._createClosebutton(c,this.hide),c.appendChild(d),this._contentWrapper=d,this._popup=new L.Popup({autoPan:!1,closeOnClick:!1}),a.on("popupclose",this._onPopupClose,this),L.DomEvent.disableClickPropagation(c).addListener(c,"mousewheel",L.DomEvent.stopPropagation),this._layer.on("mouseover",this._mouseover,this).on("mousemove",this._mousemove,this).on("click",this._click,this),c},onRemove:function(a){a.off("popupclose",this._onPopupClose,this),this._layer.off("mouseover",this._mouseover,this).off("mousemove",this._mousemove,this).off("click",this._click,this)}});b.exports.GridControl=e,b.exports.gridControl=function(a,b){return new e(a,b)}},{"./util":24,mustache:2,"sanitize-caja":3}],12:[function(a,b){"use strict";var c=a("./util"),d=a("./request"),e=a("./grid"),f=L.Class.extend({includes:[L.Mixin.Events,a("./load_tilejson")],options:{template:function(){return""}},_mouseOn:null,_tilejson:{},_cache:{},initialize:function(a,b){L.Util.setOptions(this,b),this._loadTileJSON(a)},_setTileJSON:function(a){return c.strict(a,"object"),L.extend(this.options,{grids:a.grids,minZoom:a.minzoom,maxZoom:a.maxzoom,bounds:a.bounds&&c.lbounds(a.bounds)}),this._tilejson=a,this._cache={},this._update(),this},getTileJSON:function(){return this._tilejson},active:function(){return!!(this._map&&this.options.grids&&this.options.grids.length)},addTo:function(a){return a.addLayer(this),this},onAdd:function(a){this._map=a,this._update(),this._map.on("click",this._click,this).on("mousemove",this._move,this).on("moveend",this._update,this)},onRemove:function(){this._map.off("click",this._click,this).off("mousemove",this._move,this).off("moveend",this._update,this)},getData:function(a,b){if(this.active()){var c=this._map,d=c.project(a.wrap()),e=256,f=4,g=Math.floor(d.x/e),h=Math.floor(d.y/e),i=c.options.crs.scale(c.getZoom())/e;return g=(g+i)%i,h=(h+i)%i,this._getTile(c.getZoom(),g,h,function(a){var c=Math.floor((d.x-g*e)/f),i=Math.floor((d.y-h*e)/f);b(a(c,i))}),this}},_click:function(a){this.getData(a.latlng,L.bind(function(b){this.fire("click",{latLng:a.latlng,data:b})},this))},_move:function(a){this.getData(a.latlng,L.bind(function(b){b!==this._mouseOn?(this._mouseOn&&this.fire("mouseout",{latLng:a.latlng,data:this._mouseOn}),this.fire("mouseover",{latLng:a.latlng,data:b}),this._mouseOn=b):this.fire("mousemove",{latLng:a.latlng,data:b})},this))},_getTileURL:function(a){var b=this.options.grids,c=(a.x+a.y)%b.length,d=b[c];return L.Util.template(d,a)},_update:function(){if(this.active()){var a=this._map.getPixelBounds(),b=this._map.getZoom(),c=256;if(!(b>this.options.maxZoom||b<this.options.minZoom))for(var d=L.bounds(a.min.divideBy(c)._floor(),a.max.divideBy(c)._floor()),e=this._map.options.crs.scale(b)/c,f=d.min.x;f<=d.max.x;f++)for(var g=d.min.y;g<=d.max.y;g++)this._getTile(b,(f%e+e)%e,(g%e+e)%e)}},_getTile:function(a,b,c,f){var g=a+"_"+b+"_"+c,h=L.point(b,c);if(h.z=a,this._tileShouldBeLoaded(h)){if(g in this._cache){if(!f)return;return void("function"==typeof this._cache[g]?f(this._cache[g]):this._cache[g].push(f))}this._cache[g]=[],f&&this._cache[g].push(f),d(this._getTileURL(h),L.bind(function(a,b){var c=this._cache[g];this._cache[g]=e(b);for(var d=0;d<c.length;++d)c[d](this._cache[g])},this))}},_tileShouldBeLoaded:function(a){if(a.z>this.options.maxZoom||a.z<this.options.minZoom)return!1;if(this.options.bounds){var b=256,c=a.multiplyBy(b),d=c.add(new L.Point(b,b)),e=this._map.unproject(c),f=this._map.unproject(d),g=new L.LatLngBounds([e,f]);if(!this.options.bounds.intersects(g))return!1}return!0}});b.exports.GridLayer=f,b.exports.gridLayer=function(a,b){return new f(a,b)}},{"./grid":10,"./load_tilejson":15,"./request":19,"./util":24}],13:[function(a,b){"use strict";var c=L.Control.extend({options:{position:"bottomright",sanitizer:a("sanitize-caja")},initialize:function(a){L.setOptions(this,a),this._info={}},onAdd:function(a){this._container=L.DomUtil.create("div","mapbox-control-info mapbox-small"),this._content=L.DomUtil.create("div","map-info-container",this._container);var b=L.DomUtil.create("a","mapbox-info-toggle mapbox-icon mapbox-icon-info",this._container);b.href="#",L.DomEvent.addListener(b,"click",this._showInfo,this),L.DomEvent.disableClickPropagation(this._container);for(var c in a._layers)a._layers[c].getAttribution&&this.addInfo(a._layers[c].getAttribution());return a.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this),this._update(),this._container},onRemove:function(a){a.off("layeradd",this._onLayerAdd,this).off("layerremove",this._onLayerRemove,this)},addInfo:function(a){return a?(this._info[a]||(this._info[a]=0),this._info[a]=!0,this._update()):this},removeInfo:function(a){return a?(this._info[a]&&(this._info[a]=!1),this._update()):this},_showInfo:function(a){return L.DomEvent.preventDefault(a),this._active===!0?this._hidecontent():(L.DomUtil.addClass(this._container,"active"),this._active=!0,void this._update())},_hidecontent:function(){this._content.innerHTML="",this._active=!1,L.DomUtil.removeClass(this._container,"active")},_update:function(){if(!this._map)return this;this._content.innerHTML="";var a="none",b=[];for(var c in this._info)this._info.hasOwnProperty(c)&&this._info[c]&&(b.push(this.options.sanitizer(c)),a="block");return this._content.innerHTML+=b.join(" | "),this._container.style.display=a,this},_onLayerAdd:function(a){a.layer.getAttribution&&a.layer.getAttribution()?this.addInfo(a.layer.getAttribution()):"on"in a.layer&&a.layer.getAttribution&&a.layer.on("ready",L.bind(function(){this.addInfo(a.layer.getAttribution())},this))},_onLayerRemove:function(a){a.layer.getAttribution&&this.removeInfo(a.layer.getAttribution())}});b.exports.InfoControl=c,b.exports.infoControl=function(a){return new c(a)}},{"sanitize-caja":3}],14:[function(a,b){"use strict";var c=L.Control.extend({options:{position:"bottomright",sanitizer:a("sanitize-caja")},initialize:function(a){L.setOptions(this,a),this._legends={}},onAdd:function(){return this._container=L.DomUtil.create("div","map-legends wax-legends"),L.DomEvent.disableClickPropagation(this._container),this._update(),this._container},addLegend:function(a){return a?(this._legends[a]||(this._legends[a]=0),this._legends[a]++,this._update()):this},removeLegend:function(a){return a?(this._legends[a]&&this._legends[a]--,this._update()):this},_update:function(){if(!this._map)return this;this._container.innerHTML="";var a="none";for(var b in this._legends)if(this._legends.hasOwnProperty(b)&&this._legends[b]){var c=L.DomUtil.create("div","map-legend wax-legend",this._container);c.innerHTML=this.options.sanitizer(b),a="block"}return this._container.style.display=a,this}});b.exports.LegendControl=c,b.exports.legendControl=function(a){return new c(a)}},{"sanitize-caja":3}],15:[function(a,b){"use strict";var c=a("./request"),d=a("./url"),e=a("./util");b.exports={_loadTileJSON:function(a){"string"==typeof a?(a=d.tileJSON(a,this.options&&this.options.accessToken),c(a,L.bind(function(b,c){b?(e.log("could not load TileJSON at "+a),this.fire("error",{error:b})):c&&(this._setTileJSON(c),this.fire("ready"))},this))):a&&"object"==typeof a&&this._setTileJSON(a)}}},{"./request":19,"./url":23,"./util":24}],16:[function(a,b){"use strict";function c(a,b){return!b||a.accessToken?a:L.extend({accessToken:b},a)}var d=(a("./util"),a("./tile_layer").tileLayer),e=a("./feature_layer").featureLayer,f=a("./grid_layer").gridLayer,g=a("./grid_control").gridControl,h=a("./info_control").infoControl,i=a("./share_control").shareControl,j=a("./legend_control").legendControl,k=L.Map.extend({includes:[a("./load_tilejson")],options:{tileLayer:{},featureLayer:{},gridLayer:{},legendControl:{},gridControl:{},infoControl:!1,shareControl:!1},_tilejson:{},initialize:function(a,b,k){L.Map.prototype.initialize.call(this,a,L.extend({},L.Map.prototype.options,k)),this.attributionControl&&this.attributionControl.setPrefix(""),this.options.tileLayer&&(this.tileLayer=d(void 0,c(this.options.tileLayer,this.options.accessToken)),this.addLayer(this.tileLayer)),this.options.featureLayer&&(this.featureLayer=e(void 0,c(this.options.featureLayer,this.options.accessToken)),this.addLayer(this.featureLayer)),this.options.gridLayer&&(this.gridLayer=f(void 0,c(this.options.gridLayer,this.options.accessToken)),this.addLayer(this.gridLayer)),this.options.gridLayer&&this.options.gridControl&&(this.gridControl=g(this.gridLayer,this.options.gridControl),this.addControl(this.gridControl)),this.options.infoControl&&(this.infoControl=h(this.options.infoControl),this.addControl(this.infoControl)),this.options.legendControl&&(this.legendControl=j(this.options.legendControl),this.addControl(this.legendControl)),this.options.shareControl&&(this.shareControl=i(void 0,c(this.options.shareControl,this.options.accessToken)),this.addControl(this.shareControl)),this._loadTileJSON(b)},addLayer:function(a){return"on"in a&&a.on("ready",L.bind(function(){this._updateLayer(a)},this)),L.Map.prototype.addLayer.call(this,a)},_setTileJSON:function(a){return this._tilejson=a,this._initialize(a),this},getTileJSON:function(){return this._tilejson},_initialize:function(a){if(this.tileLayer&&(this.tileLayer._setTileJSON(a),this._updateLayer(this.tileLayer)),this.featureLayer&&!this.featureLayer.getGeoJSON()&&a.data&&a.data[0]&&this.featureLayer.loadURL(a.data[0]),this.gridLayer&&(this.gridLayer._setTileJSON(a),this._updateLayer(this.gridLayer)),this.infoControl&&a.attribution&&this.infoControl.addInfo(a.attribution),this.legendControl&&a.legend&&this.legendControl.addLegend(a.legend),this.shareControl&&this.shareControl._setTileJSON(a),!this._loaded&&a.center){var b=void 0!==this.getZoom()?this.getZoom():a.center[2],c=L.latLng(a.center[1],a.center[0]);this.setView(c,b)}},_editLink:function(){if(this._controlContainer.getElementsByClassName){var a=this._controlContainer.getElementsByClassName("mapbox-improve-map");if(a.length&&this._loaded)for(var b=this.getCenter().wrap(),c=this._tilejson||{},d=c.id||"",e=0;e<a.length;e++)a[e].href=a[e].href.split("#")[0]+"#"+d+"/"+b.lng.toFixed(3)+"/"+b.lat.toFixed(3)+"/"+this.getZoom()}},_updateLayer:function(a){a.options&&(this.infoControl&&this._loaded&&this.infoControl.addInfo(a.options.infoControl),this.attributionControl&&this._loaded&&a.getAttribution&&this.attributionControl.addAttribution(a.getAttribution()),this.on("moveend",this._editLink,this),L.stamp(a)in this._zoomBoundLayers||!a.options.maxZoom&&!a.options.minZoom||(this._zoomBoundLayers[L.stamp(a)]=a),this._editLink(),this._updateZoomLevels())}});b.exports.Map=k,b.exports.map=function(a,b,c){return new k(a,b,c)}},{"./feature_layer":7,"./grid_control":11,"./grid_layer":12,"./info_control":13,"./legend_control":14,"./load_tilejson":15,"./share_control":20,"./tile_layer":22,"./util":24}],17:[function(a,b){"use strict";var c=a("./geocoder_control"),d=a("./grid_control"),e=a("./feature_layer"),f=a("./legend_control"),g=a("./share_control"),h=a("./tile_layer"),i=a("./info_control"),j=a("./map"),k=a("./grid_layer");L.mapbox=b.exports={VERSION:a("../package.json").version,geocoder:a("./geocoder"),marker:a("./marker"),simplestyle:a("./simplestyle"),tileLayer:h.tileLayer,TileLayer:h.TileLayer,infoControl:i.infoControl,InfoControl:i.InfoControl,shareControl:g.shareControl,ShareControl:g.ShareControl,legendControl:f.legendControl,LegendControl:f.LegendControl,geocoderControl:c.geocoderControl,GeocoderControl:c.GeocoderControl,gridControl:d.gridControl,GridControl:d.GridControl,gridLayer:k.gridLayer,GridLayer:k.GridLayer,featureLayer:e.featureLayer,FeatureLayer:e.FeatureLayer,map:j.map,Map:j.Map,config:a("./config"),sanitize:a("sanitize-caja"),template:a("mustache").to_html},window.L.Icon.Default.imagePath=("https:"==document.location.protocol||"http:"==document.location.protocol?"":"https:")+"//api.tiles.mapbox.com/mapbox.js/v"+a("../package.json").version+"/images"},{"../package.json":5,"./config":6,"./feature_layer":7,"./geocoder":8,"./geocoder_control":9,"./grid_control":11,"./grid_layer":12,"./info_control":13,"./legend_control":14,"./map":16,"./marker":18,"./share_control":20,"./simplestyle":21,"./tile_layer":22,mustache:2,"sanitize-caja":3}],18:[function(a,b){"use strict";function c(a,b){a=a||{};var c={small:[20,50],medium:[30,70],large:[35,90]},d=a["marker-size"]||"medium",e="marker-symbol"in a&&""!==a["marker-symbol"]?"-"+a["marker-symbol"]:"",g=(a["marker-color"]||"7e7e7e").replace("#","");return L.icon({iconUrl:f("/marker/pin-"+d.charAt(0)+e+"+"+g+(L.Browser.retina?"@2x":"")+".png",b&&b.accessToken),iconSize:c[d],iconAnchor:[c[d][0]/2,c[d][1]/2],popupAnchor:[0,-c[d][1]/2]})}function d(a,b,d){return L.marker(b,{icon:c(a.properties,d),title:g.strip_tags(h(a.properties&&a.properties.title||""))})}function e(a,b){if(!a||!a.properties)return"";var c="";return a.properties.title&&(c+='<div class="marker-title">'+a.properties.title+"</div>"),a.properties.description&&(c+='<div class="marker-description">'+a.properties.description+"</div>"),(b||h)(c)}var f=a("./url"),g=a("./util"),h=a("sanitize-caja");b.exports={icon:c,style:d,createPopup:e}},{"./url":23,"./util":24,"sanitize-caja":3}],19:[function(a,b){"use strict";var c=a("corslite"),d=a("./util").strict,e=a("./config"),f=/^(https?:)?(?=\/\/(.|api)\.tiles\.mapbox\.com\/)/;b.exports=function(a,b){function g(a,c){!a&&c&&(c=JSON.parse(c.responseText)),b(a,c)}return d(a,"string"),d(b,"function"),a=a.replace(f,function(a,b){return"withCredentials"in new window.XMLHttpRequest?"https:"===b||"https:"===document.location.protocol||e.FORCE_HTTPS?"https:":"http:":document.location.protocol}),c(a,g)}},{"./config":6,"./util":24,corslite:1}],20:[function(a,b){"use strict";var c=a("./url"),d=L.Control.extend({includes:[a("./load_tilejson")],options:{position:"topleft",url:""},initialize:function(a,b){L.setOptions(this,b),this._loadTileJSON(a)},_setTileJSON:function(a){this._tilejson=a},onAdd:function(a){this._map=a;var b=L.DomUtil.create("div","leaflet-control-mapbox-share leaflet-bar"),c=L.DomUtil.create("a","mapbox-share mapbox-icon mapbox-icon-share",b);return c.href="#",this._modal=L.DomUtil.create("div","mapbox-modal",this._map._container),this._mask=L.DomUtil.create("div","mapbox-modal-mask",this._modal),this._content=L.DomUtil.create("div","mapbox-modal-content",this._modal),L.DomEvent.addListener(c,"click",this._shareClick,this),L.DomEvent.disableClickPropagation(b),this._map.on("mousedown",this._clickOut,this),b},_clickOut:function(a){return this._sharing?(L.DomEvent.preventDefault(a),L.DomUtil.removeClass(this._modal,"active"),this._content.innerHTML="",void(this._sharing=null)):void 0},_shareClick:function(a){if(L.DomEvent.stop(a),this._sharing)return this._clickOut(a);var b=this._tilejson||this._map._tilejson||{},d=encodeURIComponent(this.options.url||b.webpage||window.location),e=encodeURIComponent(b.name),f=c("/"+b.id+"/"+this._map.getCenter().lng+","+this._map.getCenter().lat+","+this._map.getZoom()+"/600x600.png",this.options.accessToken),g=c("/"+b.id+".html",this.options.accessToken),h="//twitter.com/intent/tweet?status="+e+" "+d,i="//www.facebook.com/sharer.php?u="+d+"&t="+encodeURIComponent(b.name),j="//www.pinterest.com/pin/create/button/?url="+d+"&media="+f+"&description="+b.name,k="<h3>Share this map</h3><div class='mapbox-share-buttons'><a class='mapbox-button mapbox-button-icon mapbox-icon-facebook' target='_blank' href='{{facebook}}'>Facebook</a><a class='mapbox-button mapbox-button-icon mapbox-icon-twitter' target='_blank' href='{{twitter}}'>Twitter</a><a class='mapbox-button mapbox-button-icon mapbox-icon-pinterest' target='_blank' href='{{pinterest}}'>Pinterest</a></div>".replace("{{twitter}}",h).replace("{{facebook}}",i).replace("{{pinterest}}",j),l='<iframe width="100%" height="500px" frameBorder="0" src="{{embed}}"></iframe>'.replace("{{embed}}",g),m="Copy and paste this <strong>HTML code</strong> into documents to embed this map on web pages.";L.DomUtil.addClass(this._modal,"active"),this._sharing=L.DomUtil.create("div","mapbox-modal-body",this._content),this._sharing.innerHTML=k;var n=L.DomUtil.create("input","mapbox-embed",this._sharing);n.type="text",n.value=l;var o=L.DomUtil.create("label","mapbox-embed-description",this._sharing);o.innerHTML=m;var p=L.DomUtil.create("a","leaflet-popup-close-button",this._sharing);p.href="#",L.DomEvent.disableClickPropagation(this._sharing),L.DomEvent.addListener(p,"click",this._clickOut,this),L.DomEvent.addListener(n,"click",function(a){a.target.focus(),a.target.select()})}});b.exports.ShareControl=d,b.exports.shareControl=function(a,b){return new d(a,b)}},{"./load_tilejson":15,"./url":23}],21:[function(a,b){"use strict";function c(a,b){var c={};for(var d in b)c[d]=void 0===a[d]?b[d]:a[d];return c}function d(a){for(var b={},c=0;c<g.length;c++)b[g[c][1]]=a[g[c][0]];return b}function e(a){return d(c(a.properties||{},f))}var f={stroke:"#555555","stroke-width":2,"stroke-opacity":1,fill:"#555555","fill-opacity":.5},g=[["stroke","color"],["stroke-width","weight"],["stroke-opacity","opacity"],["fill","fillColor"],["fill-opacity","fillOpacity"]];b.exports={style:e,defaults:f}},{}],22:[function(a,b){"use strict";var c=a("./util"),d=L.TileLayer.extend({includes:[a("./load_tilejson")],options:{format:"png"},formats:["png","png32","png64","png128","png256","jpg70","jpg80","jpg90"],scalePrefix:"@2x.",initialize:function(a,b){L.TileLayer.prototype.initialize.call(this,void 0,b),this._tilejson={},b&&b.format&&c.strict_oneof(b.format,this.formats),this._loadTileJSON(a)},setFormat:function(a){return c.strict(a,"string"),this.options.format=a,this.redraw(),this},setUrl:null,_setTileJSON:function(a){return c.strict(a,"object"),L.extend(this.options,{tiles:a.tiles,attribution:a.attribution,minZoom:a.minzoom||0,maxZoom:a.maxzoom||18,tms:"tms"===a.scheme,bounds:a.bounds&&c.lbounds(a.bounds)}),this._tilejson=a,this.redraw(),this},getTileJSON:function(){return this._tilejson},getTileUrl:function(a){var b=this.options.tiles,c=Math.floor(Math.abs(a.x+a.y)%b.length),d=b[c],e=L.Util.template(d,a);return e?e.replace(".png",(L.Browser.retina?this.scalePrefix:".")+this.options.format):e},_update:function(){this.options.tiles&&L.TileLayer.prototype._update.call(this)}});b.exports.TileLayer=d,b.exports.tileLayer=function(a,b){return new d(a,b)}},{"./load_tilejson":15,"./util":24}],23:[function(a,b){"use strict";var c=a("./config"),d=a("../package.json").version;b.exports=function(a,b){if(b=b||L.mapbox.accessToken,!b&&c.REQUIRE_ACCESS_TOKEN)throw new Error("An API access token is required to use Mapbox.js. See https://www.mapbox.com/mapbox.js/api/v"+d+"/api-access-tokens/");var e="https:"===document.location.protocol||c.FORCE_HTTPS?c.HTTPS_URL:c.HTTP_URL;if(e+=a,e+=-1!==e.indexOf("?")?"&access_token=":"?access_token=",c.REQUIRE_ACCESS_TOKEN){if("s"===b[0])throw new Error("Use a public access token (pk.*) with Mapbox.js, not a secret access token (sk.*). See https://www.mapbox.com/mapbox.js/api/v"+d+"/api-access-tokens/");e+=b}return e},b.exports.tileJSON=function(a,c){if(-1!==a.indexOf("/"))return a;var d=b.exports("/"+a+".json",c);return 0===d.indexOf("https")&&(d+="&secure"),d}},{"../package.json":5,"./config":6}],24:[function(a,b){"use strict";function c(a,b){if(!b||!b.length)return!1;for(var c=0;c<b.length;c++)if(b[c]==a)return!0;return!1}b.exports={idUrl:function(a,b){-1==a.indexOf("/")?b.loadID(a):b.loadURL(a)},log:function(a){"object"==typeof console&&"function"==typeof console.error&&void 0},strict:function(a,b){if(typeof a!==b)throw new Error("Invalid argument: "+b+" expected")},strict_instance:function(a,b,c){if(!(a instanceof b))throw new Error("Invalid argument: "+c+" expected")},strict_oneof:function(a,b){if(!c(a,b))throw new Error("Invalid argument: "+a+" given, valid values are "+b.join(", "))},strip_tags:function(a){return a.replace(/<[^<]+>/g,"")},lbounds:function(a){return new L.LatLngBounds([[a[1],a[0]],[a[3],a[2]]])}}},{}]},{},[17]),!function(a){if("object"==typeof exports)module.exports=a();else if("function"==typeof define&&define.amd)define(a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.omnivore=a()}}(function(){var a;return function b(a,c,d){function e(g,h){if(!c[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};a[g][0].call(j.exports,function(b){var c=a[g][1][b];return e(c?c:b)},j,j.exports,b,a,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){function c(a,b){"addData"in a&&a.addData(b),"setGeoJSON"in a&&a.setGeoJSON(b)}function d(a,b,d){var e=d||L.geoJson();return p(a,function(a,b){return a?e.fire("error",{error:a}):(c(e,JSON.parse(b.responseText)),void e.fire("ready"))}),e}function e(a,b,d){function e(a,b){return a?f.fire("error",{error:a}):(c(f,j(b.responseText)),void f.fire("ready"))}var f=d||L.geoJson();return p(a,e),f}function f(a,b,c){function d(a,c){function d(){f=!0}var f;return a?e.fire("error",{error:a}):(e.on("error",d),k(c.responseText,b,e),e.off("error",d),void(f||e.fire("ready")))}var e=c||L.geoJson();return p(a,d),e}function g(a,b,c){function d(a,c){function d(){f=!0}var f;return a?e.fire("error",{error:a}):(e.on("error",d),l(c.responseXML||c.responseText,b,e),e.off("error",d),void(f||e.fire("ready")))}var e=c||L.geoJson();return p(a,d),e}function h(a,b){function c(a,c){function e(){f=!0}var f;return a?d.fire("error",{error:a}):(d.on("error",e),m(c.responseXML||c.responseText,b,d),d.off("error",e),void(f||d.fire("ready")))}var d=L.geoJson();return p(a,c),d}function i(a,b,c){function d(a,c){return a?e.fire("error",{error:a}):(n(c.responseText,b,e),void e.fire("ready"))}var e=c||L.geoJson();return p(a,d),e}function j(a){var b="string"==typeof a?JSON.parse(a):a,c=[];for(var d in b.objects){var e=s.feature(b,b.objects[d]);c=c.concat(e.features?e.features:[e])}return c}function k(a,b,d){function e(a,b){return a?d.fire("error",{error:a}):void c(d,b)}return d=d||L.geoJson(),b=b||{},q.csv2geojson(a,b,e),d}function l(a,b,d){var e=o(a);if(!e)return d.fire("error",{error:"Could not parse GPX"});d=d||L.geoJson();var f=t.gpx(e);return c(d,f),d}function m(a,b,d){var e=o(a);if(!e)return d.fire("error",{error:"Could not parse GPX"});d=d||L.geoJson();var f=t.kml(e);return c(d,f),d}function n(a,b,d){d=d||L.geoJson();var e=r(a);return c(d,e),d}function o(a){return"string"==typeof a?(new DOMParser).parseFromString(a,"text/xml"):a}var p=a("corslite"),q=a("csv2geojson"),r=a("wellknown"),s=a("topojson"),t=a("togeojson");b.exports.geojson=d,b.exports.topojson=e,b.exports.topojson.parse=j,b.exports.csv=f,b.exports.csv.parse=k,b.exports.gpx=g,b.exports.gpx.parse=l,b.exports.kml=h,b.exports.kml.parse=m,b.exports.wkt=i,b.exports.wkt.parse=n},{corslite:5,csv2geojson:6,togeojson:9,topojson:10,wellknown:41}],2:[function(){},{}],3:[function(a,b){b.exports=a(2)},{}],4:[function(a,b){var c=b.exports={};c.nextTick=function(){var a="undefined"!=typeof window&&window.setImmediate,b="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(a)return function(a){return window.setImmediate(a)};if(b){var c=[];return window.addEventListener("message",function(a){var b=a.source;if((b===window||null===b)&&"process-tick"===a.data&&(a.stopPropagation(),c.length>0)){var d=c.shift();d()}},!0),function(a){c.push(a),window.postMessage("process-tick","*")}}return function(a){setTimeout(a,0)}}(),c.title="browser",c.browser=!0,c.env={},c.argv=[],c.binding=function(){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(){throw new Error("process.chdir is not supported")}},{}],5:[function(a,b){function c(a,b,c){function d(a){return a>=200&&300>a||304===a}function e(){void 0===h.status||d(h.status)?b.call(h,null,h):b.call(h,h,null)}var f=!1;if("undefined"==typeof window.XMLHttpRequest)return b(Error("Browser not supported"));if("undefined"==typeof c){var g=a.match(/^\s*https?:\/\/[^\/]*/);c=g&&g[0]!==location.protocol+"//"+location.domain+(location.port?":"+location.port:"")}var h;if(!c||"object"!=typeof window.XDomainRequest&&"function"!=typeof window.XDomainRequest)h=new window.XMLHttpRequest;else{h=new window.XDomainRequest;var i=b;b=function(){if(f)i.apply(this,arguments);else{var a=this,b=arguments;setTimeout(function(){i.apply(a,b)},0)}}}return"onload"in h?h.onload=e:h.onreadystatechange=function(){4===h.readyState&&e()},h.onerror=function(a){b.call(this,a||!0,null),b=function(){}},h.onprogress=function(){},h.ontimeout=function(a){b.call(this,a,null),b=function(){}},h.onabort=function(a){b.call(this,a,null),b=function(){}},h.open("GET",a,!0),h.send(null),f=!0,h}"undefined"!=typeof b&&(b.exports=c)},{}],6:[function(a,b){function c(a){return!!a.match(/(Lat)(itude)?/gi)}function d(a){return!!a.match(/(L)(on|ng)(gitude)?/i)}function e(a){return"object"==typeof a?Object.keys(a).length:0}function f(a){var b=[",",";","	","|"],c=[];return b.forEach(function(b){var d=k(b).parse(a);if(d.length>=1){for(var f=e(d[0]),g=0;g<d.length;g++)if(e(d[g])!==f)return;c.push({delimiter:b,arity:Object.keys(d[0]).length})}}),c.length?c.sort(function(a,b){return b.arity-a.arity})[0].delimiter:null}function g(a){var b=f(a);return b?k(b).parse(a):null}function h(a,b,e){e||(e=b,b={}),b.delimiter=b.delimiter||",";var g=b.latfield||"",h=b.lonfield||"",i=[],j={type:"FeatureCollection",features:i};if("auto"===b.delimiter&&"string"==typeof a&&(b.delimiter=f(a),!b.delimiter))return e({type:"Error",message:"Could not autodetect delimiter"});var m="string"==typeof a?k(b.delimiter).parse(a):a;if(!m.length)return e(null,j);if(!g||!h){for(var n in m[0])!g&&c(n)&&(g=n),!h&&d(n)&&(h=n);if(!g||!h){var o=[];for(var p in m[0])o.push(p);return e({type:"Error",message:"Latitude and longitude fields not present",data:m,fields:o})}}for(var q=[],r=0;r<m.length;r++)if(void 0!==m[r][h]&&void 0!==m[r][h]){var s,t,u,v=m[r][h],w=m[r][g];u=l(v,"EW"),u&&(v=u),u=l(w,"NS"),u&&(w=u),s=parseFloat(v),t=parseFloat(w),isNaN(s)||isNaN(t)?q.push({message:"A row contained an invalid value for latitude or longitude",row:m[r]}):(b.includeLatLon||(delete m[r][h],delete m[r][g]),i.push({type:"Feature",properties:m[r],geometry:{type:"Point",coordinates:[parseFloat(s),parseFloat(t)]}}))}e(q.length?q:null,j)}function i(a){for(var b=a.features,c={type:"Feature",geometry:{type:"LineString",coordinates:[]}},d=0;d<b.length;d++)c.geometry.coordinates.push(b[d].geometry.coordinates);return c.properties=b[0].properties,{type:"FeatureCollection",features:[c]}}function j(a){for(var b=a.features,c={type:"Feature",geometry:{type:"Polygon",coordinates:[[]]}},d=0;d<b.length;d++)c.geometry.coordinates[0].push(b[d].geometry.coordinates);return c.properties=b[0].properties,{type:"FeatureCollection",features:[c]}}var k=a("dsv"),l=a("sexagesimal");b.exports={isLon:d,isLat:c,csv:k.csv.parse,tsv:k.tsv.parse,dsv:k,auto:g,csv2geojson:h,toLine:i,toPolygon:j}},{dsv:7,sexagesimal:8}],7:[function(a,b){a("fs");b.exports=new Function('dsv.version = "0.0.3";\n\ndsv.tsv = dsv("\\t");\ndsv.csv = dsv(",");\n\nfunction dsv(delimiter) {\n  var dsv = {},\n      reFormat = new RegExp("[\\"" + delimiter + "\\n]"),\n      delimiterCode = delimiter.charCodeAt(0);\n\n  dsv.parse = function(text, f) {\n    var o;\n    return dsv.parseRows(text, function(row, i) {\n      if (o) return o(row, i - 1);\n      var a = new Function("d", "return {" + row.map(function(name, i) {\n        return JSON.stringify(name) + ": d[" + i + "]";\n      }).join(",") + "}");\n      o = f ? function(row, i) { return f(a(row), i); } : a;\n    });\n  };\n\n  dsv.parseRows = function(text, f) {\n    var EOL = {}, // sentinel value for end-of-line\n        EOF = {}, // sentinel value for end-of-file\n        rows = [], // output rows\n        N = text.length,\n        I = 0, // current character index\n        n = 0, // the current line number\n        t, // the current token\n        eol; // is the current token followed by EOL?\n\n    function token() {\n      if (I >= N) return EOF; // special case: end of file\n      if (eol) return eol = false, EOL; // special case: end of line\n\n      // special case: quotes\n      var j = I;\n      if (text.charCodeAt(j) === 34) {\n        var i = j;\n        while (i++ < N) {\n          if (text.charCodeAt(i) === 34) {\n            if (text.charCodeAt(i + 1) !== 34) break;\n            ++i;\n          }\n        }\n        I = i + 2;\n        var c = text.charCodeAt(i + 1);\n        if (c === 13) {\n          eol = true;\n          if (text.charCodeAt(i + 2) === 10) ++I;\n        } else if (c === 10) {\n          eol = true;\n        }\n        return text.substring(j + 1, i).replace(/""/g, "\\"");\n      }\n\n      // common case: find next delimiter or newline\n      while (I < N) {\n        var c = text.charCodeAt(I++), k = 1;\n        if (c === 10) eol = true; // \\n\n        else if (c === 13) { eol = true; if (text.charCodeAt(I) === 10) ++I, ++k; } // \\r|\\r\\n\n        else if (c !== delimiterCode) continue;\n        return text.substring(j, I - k);\n      }\n\n      // special case: last token before EOF\n      return text.substring(j);\n    }\n\n    while ((t = token()) !== EOF) {\n      var a = [];\n      while (t !== EOL && t !== EOF) {\n        a.push(t);\n        t = token();\n      }\n      if (f && !(a = f(a, n++))) continue;\n      rows.push(a);\n    }\n\n    return rows;\n  };\n\n  dsv.format = function(rows) {\n    if (Array.isArray(rows[0])) return dsv.formatRows(rows); // deprecated; use formatRows\n    var fieldSet = {}, fields = [];\n\n    // Compute unique fields in order of discovery.\n    rows.forEach(function(row) {\n      for (var field in row) {\n        if (!(field in fieldSet)) {\n          fields.push(fieldSet[field] = field);\n        }\n      }\n    });\n\n    return [fields.map(formatValue).join(delimiter)].concat(rows.map(function(row) {\n      return fields.map(function(field) {\n        return formatValue(row[field]);\n      }).join(delimiter);\n    })).join("\\n");\n  };\n\n  dsv.formatRows = function(rows) {\n    return rows.map(formatRow).join("\\n");\n  };\n\n  function formatRow(row) {\n    return row.map(formatValue).join(delimiter);\n  }\n\n  function formatValue(text) {\n    return reFormat.test(text) ? "\\"" + text.replace(/\\"/g, "\\"\\"") + "\\"" : text;\n  }\n\n  return dsv;\n}\n;return dsv')()
},{fs:2}],8:[function(a,b){b.exports=function(a,b){if(b||(b="NSEW"),"string"!=typeof a)return null;var c=/^([0-9.]+)°? *(?:([0-9.]+)['’′‘] *)?(?:([0-9.]+)(?:''|"|”|″) *)?([NSEW])?/,d=a.match(c);return d?d[4]&&-1===b.indexOf(d[4])?null:((d[1]?parseFloat(d[1]):0)+(d[2]?parseFloat(d[2])/60:0)+(d[3]?parseFloat(d[3])/3600:0))*(d[4]&&"S"===d[4]||"W"===d[4]?-1:1):null}},{}],9:[function(a,b,c){(function(d){toGeoJSON=function(){"use strict";function b(a){if(!a||!a.length)return 0;for(var b=0,c=0;b<a.length;b++)c=(c<<5)-c+a.charCodeAt(b)|0;return c}function e(a,b){return a.getElementsByTagName(b)}function f(a,b){return a.getAttribute(b)}function g(a,b){return parseFloat(f(a,b))}function h(a,b){var c=e(a,b);return c.length?c[0]:null}function i(a){return a.normalize&&a.normalize(),a}function j(a){for(var b=0,c=[];b<a.length;b++)c[b]=parseFloat(a[b]);return c}function k(a){var b={};for(var c in a)a[c]&&(b[c]=a[c]);return b}function l(a){return a&&i(a),a&&a.firstChild&&a.firstChild.nodeValue}function m(a){return j(a.replace(s,"").split(","))}function n(a){for(var b=a.replace(t,"").split(u),c=[],d=0;d<b.length;d++)c.push(m(b[d]));return c}function o(a){var b=[g(a,"lon"),g(a,"lat")],c=h(a,"ele");return c&&b.push(parseFloat(l(c))),b}function p(){return{type:"FeatureCollection",features:[]}}function q(a){return r.serializeToString(a)}var r,s=/\s*/g,t=/^\s*|\s*$/g,u=/\s+/;"undefined"!=typeof XMLSerializer?r=new XMLSerializer:"object"!=typeof c||"object"!=typeof d||d.browser||(r=new(a("xmldom").XMLSerializer));var v={kml:function(a,c){function d(a){return j(a.split(" "))}function g(a){for(var b=e(a,"coord","gx"),c=[],f=0;f<b.length;f++)c.push(d(l(b[f])));return c}function i(a){var b,c,d,f,j,k=[];if(h(a,"MultiGeometry"))return i(h(a,"MultiGeometry"));if(h(a,"MultiTrack"))return i(h(a,"MultiTrack"));for(d=0;d<s.length;d++)if(c=e(a,s[d]))for(f=0;f<c.length;f++)if(b=c[f],"Point"==s[d])k.push({type:"Point",coordinates:m(l(h(b,"coordinates")))});else if("LineString"==s[d])k.push({type:"LineString",coordinates:n(l(h(b,"coordinates")))});else if("Polygon"==s[d]){var o=e(b,"LinearRing"),p=[];for(j=0;j<o.length;j++)p.push(n(l(h(o[j],"coordinates"))));k.push({type:"Polygon",coordinates:p})}else"Track"==s[d]&&k.push({type:"LineString",coordinates:g(b)});return k}function k(a){var b,c=i(a),d={},f=l(h(a,"name")),g=l(h(a,"styleUrl")),j=l(h(a,"description")),k=h(a,"TimeSpan"),m=h(a,"ExtendedData");if(!c.length)return[];if(f&&(d.name=f),g&&r[g]&&(d.styleUrl=g,d.styleHash=r[g]),j&&(d.description=j),k){var n=l(h(k,"begin")),o=l(h(k,"end"));d.timespan={begin:n,end:o}}if(m){var p=e(m,"Data"),q=e(m,"SimpleData");for(b=0;b<p.length;b++)d[p[b].getAttribute("name")]=l(h(p[b],"value"));for(b=0;b<q.length;b++)d[q[b].getAttribute("name")]=l(q[b])}return[{type:"Feature",geometry:1===c.length?c[0]:{type:"GeometryCollection",geometries:c},properties:d}]}c=c||{};for(var o=p(),r={},s=["Polygon","LineString","Point","Track"],t=e(a,"Placemark"),u=e(a,"Style"),v=0;v<u.length;v++)r["#"+f(u[v],"id")]=b(q(u[v])).toString(16);for(var w=0;w<t.length;w++)o.features=o.features.concat(k(t[w]));return o},gpx:function(a){function b(a,b){var c,f=e(a,b),g=[];for(c=0;c<f.length;c++)g.push(o(f[c]));return{type:"Feature",properties:d(a),geometry:{type:"LineString",coordinates:g}}}function c(a){var b=d(a);return b.sym=l(h(a,"sym")),{type:"Feature",properties:b,geometry:{type:"Point",coordinates:o(a)}}}function d(a){var b,c=["name","desc","author","copyright","link","time","keywords"],d={};for(b=0;b<c.length;b++)d[c[b]]=l(h(a,c[b]));return k(d)}var f,g=e(a,"trk"),i=e(a,"rte"),j=e(a,"wpt"),m=p();for(f=0;f<g.length;f++)m.features.push(b(g[f],"trkpt"));for(f=0;f<i.length;f++)m.features.push(b(i[f],"rtept"));for(f=0;f<j.length;f++)m.features.push(c(j[f]));return m}};return v}(),"undefined"!=typeof b&&(b.exports=toGeoJSON)}).call(this,a("/Users/tmcw/src/leaflet-omnivore/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"))},{"/Users/tmcw/src/leaflet-omnivore/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":4,xmldom:3}],10:[function(a,b){var c=b.exports=a("./topojson");c.topology=a("./lib/topojson/topology"),c.simplify=a("./lib/topojson/simplify"),c.clockwise=a("./lib/topojson/clockwise"),c.filter=a("./lib/topojson/filter"),c.prune=a("./lib/topojson/prune"),c.bind=a("./lib/topojson/bind"),c.stitch=a("./lib/topojson/stitch"),c.scale=a("./lib/topojson/scale")},{"./lib/topojson/bind":11,"./lib/topojson/clockwise":14,"./lib/topojson/filter":18,"./lib/topojson/prune":22,"./lib/topojson/scale":24,"./lib/topojson/simplify":25,"./lib/topojson/stitch":27,"./lib/topojson/topology":28,"./topojson":40}],11:[function(a,b){function c(){}{var d=a("./type");a("../../")}b.exports=function(a,b){var e=d({geometry:function(a){var c=a.properties,d=b[a.id];if(d)if(c)for(var e in d)c[e]=d[e];else for(var e in d){a.properties=d;break}this.defaults.geometry.call(this,a)},LineString:c,MultiLineString:c,Point:c,MultiPoint:c,Polygon:c,MultiPolygon:c});for(var f in a.objects)e.object(a.objects[f])}},{"../../":10,"./type":39}],12:[function(a,b){b.exports=function(a){function b(a){a&&j.hasOwnProperty(a.type)&&j[a.type](a)}function c(a){var b=a[0],c=a[1];f>b&&(f=b),b>h&&(h=b),g>c&&(g=c),c>i&&(i=c)}function d(a){a.forEach(c)}function e(a){a.forEach(d)}var f=1/0,g=1/0,h=-1/0,i=-1/0,j={GeometryCollection:function(a){a.geometries.forEach(b)},Point:function(a){c(a.coordinates)},MultiPoint:function(a){a.coordinates.forEach(c)},LineString:function(a){d(a.coordinates)},MultiLineString:function(a){a.coordinates.forEach(d)},Polygon:function(a){a.coordinates.forEach(d)},MultiPolygon:function(a){a.coordinates.forEach(e)}};for(var k in a)b(a[k]);return[f,g,h,i]}},{}],13:[function(a,b,c){function d(a){return a.toString()}function e(a){for(var b,c=-1,d=a.length,e=a[d-1],f=0;++c<d;)b=e,e=a[c],f+=b[0]*e[1]-b[1]*e[0];return.5*f}function f(a){return Math.abs((a[0][0]-a[2][0])*(a[1][1]-a[0][1])-(a[0][0]-a[1][0])*(a[2][1]-a[0][1]))}function g(a,b,c,d){var e=a-c,f=b-d;return Math.sqrt(e*e+f*f)}c.name="cartesian",c.formatDistance=d,c.ringArea=e,c.absoluteArea=Math.abs,c.triangleArea=f,c.distance=g},{}],14:[function(a,b){function c(a,b){function c(a){a.reverse()}var d=null;b&&"coordinate-system"in b&&(d=h[b["coordinate-system"]]);var i=e(d.ringArea,c);g({LineString:f,MultiLineString:f,Point:f,MultiPoint:f,Polygon:function(a){i(a.coordinates)},MultiPolygon:function(a){a.coordinates.forEach(i)}}).object(a)}function d(a,b){function c(b){return j.ringArea(i.feature(a,{type:"Polygon",arcs:[b]}).geometry.coordinates[0])}function d(a){var b=-1,c=a.length;for(a.reverse();++b<c;)a[b]=~a[b]}var j=null;b&&"coordinate-system"in b&&(j=h[b["coordinate-system"]]);var k=e(c,d),l=g({LineString:f,MultiLineString:f,Point:f,MultiPoint:f,Polygon:function(a){k(a.arcs)},MultiPolygon:function(a){a.arcs.forEach(k)}});for(var m in a.objects)l.object(a.objects[m])}function e(a,b){return function(c){if(d=c.length){for(var d,e,f,g,h=new Array(d),i=-1/0,j=0;d>j;++j){var f=Math.abs(h[j]=a(c[j]));f>i&&(i=f,e=j)}e&&(g=c[e],c[e]=c[0],c[0]=g,g=h[e],h[e]=h[0],h[0]=g),h[0]<0&&b(c[0]);for(var j=1;d>j;++j)h[j]>0&&b(c[j])}}}function f(){}var g=a("./type"),h=a("./coordinate-systems"),i=a("../../");b.exports=function(a,b){"Topology"===a.type?d(a,b):c(a,b)}},{"../../":10,"./coordinate-systems":16,"./type":39}],15:[function(a,b){b.exports=function(a,b){function c(a){a&&e.hasOwnProperty(a.type)&&e[a.type](a)}function d(a){var c=b(a);null==c?delete a.id:a.id=c}arguments.length<2&&(b=function(a){return a.id});var e={Feature:d,FeatureCollection:function(a){a.features.forEach(d)}};for(var f in a)c(a[f]);return a}},{}],16:[function(a,b){b.exports={cartesian:a("./cartesian"),spherical:a("./spherical")}},{"./cartesian":13,"./spherical":26}],17:[function(a,b){b.exports=function(a){for(var b=a.arcs,c=-1,d=b.length;++c<d;)for(var e,f,g=b[c],h=0,i=g.length,j=g[0],k=j[0],l=j[1];++h<i;)j=g[h],e=j[0],f=j[1],g[h]=[e-k,f-l],k=e,l=f;return a}},{}],18:[function(a,b){function c(){}function d(){return!1}var e=a("./type"),f=a("./prune"),g=a("./clockwise"),h=a("./coordinate-systems"),i=a("../../");b.exports=function(a,b){function j(a){return a.length&&k(a[0])?[a.shift()].concat(a.filter(l)):null}function k(a){return r(a)||o.absoluteArea(m(a))>=n}function l(a){return r(a)||o.absoluteArea(-m(a))>=n}function m(b){return o.ringArea(i.feature(a,{type:"Polygon",arcs:[b]}).geometry.coordinates[0])}var n,o=null,p=!0,q=!0,r=d;if(b&&("coordinate-system"in b&&(o=h[b["coordinate-system"]]),"minimum-area"in b&&(n=+b["minimum-area"]),"preserve-attached"in b&&(q=!!b["preserve-attached"]),"force-clockwise"in b&&(p=!!b["force-clockwise"])),p&&g(a,b),n>0||(n=Number.MIN_VALUE),q){var s={},t=0,u=e({LineString:c,MultiLineString:c,Point:c,MultiPoint:c,MultiPolygon:function(a){for(var b=a.arcs,c=-1,d=b.length;++c<d;)this.polygon(b[c])},Polygon:function(a){this.polygon(a.arcs)},polygon:function(a){for(var b=0,c=a.length;c>b;++b,++t)for(var d=a[b],e=0,f=d.length;f>e;++e){var g=d[e];0>g&&(g=~g);var h=s[g];s[g]=h>=0&&h!==t?-1:t}}});r=function(a){for(var b=0,c=a.length;c>b;++b){var d=a[b];if(s[0>d?~d:d]<0)return!0}};for(var v in a.objects)u.object(a.objects[v])}var w=e({LineString:c,MultiLineString:c,Point:c,MultiPoint:c,Polygon:function(a){a.arcs=j(a.arcs),a.arcs&&a.arcs.length||(a.type=null,delete a.arcs)},MultiPolygon:function(a){a.arcs=a.arcs.map(j).filter(function(a){return a&&a.length}),a.arcs.length||(a.type=null,delete a.arcs)},GeometryCollection:function(a){this.defaults.GeometryCollection.call(this,a),a.geometries=a.geometries.filter(function(a){return null!=a.type}),a.geometries.length||(a.type=null,delete a.geometries)}});for(var v in a.objects)w.object(a.objects[v]);f(a,b)}},{"../../":10,"./clockwise":14,"./coordinate-systems":16,"./prune":22,"./type":39}],19:[function(a,b){b.exports=function(a){function b(a){return(a&&e.hasOwnProperty(a.type)?e[a.type]:d)(a)}function c(a){var b=a.geometry;return null==b?a.type=null:(d(b),a.type=b.type,b.geometries?a.geometries=b.geometries:b.coordinates&&(a.coordinates=b.coordinates)),delete a.geometry,a}function d(a){return a?(f.hasOwnProperty(a.type)&&f[a.type](a),a):{type:null}}var e={Feature:c,FeatureCollection:function(a){return a.type="GeometryCollection",a.geometries=a.features,a.features.forEach(c),delete a.features,a}},f={GeometryCollection:function(a){for(var b=a.geometries,c=-1,e=b.length;++c<e;)b[c]=d(b[c])},MultiPoint:function(a){a.coordinates.length?a.coordinates.length<2&&(a.type="Point",a.coordinates=a.coordinates[0]):(a.type=null,delete a.coordinates)},LineString:function(a){a.coordinates.length||(a.type=null,delete a.coordinates)},MultiLineString:function(a){for(var b=a.coordinates,c=0,d=0,e=b.length;e>c;++c){var f=b[c];f.length&&(b[d++]=f)}d?2>d?(a.type="LineString",a.coordinates=b[0]):a.coordinates.length=d:(a.type=null,delete a.coordinates)},Polygon:function(a){for(var b=a.coordinates,c=0,d=0,e=b.length;e>c;++c){var f=b[c];f.length&&(b[d++]=f)}d?a.coordinates.length=d:(a.type=null,delete a.coordinates)},MultiPolygon:function(a){for(var b=a.coordinates,c=0,d=0,e=b.length;e>c;++c){for(var f=b[c],g=0,h=0,i=f.length;i>g;++g){var j=f[g];j.length&&(f[h++]=j)}h&&(f.length=h,b[d++]=f)}d?2>d?(a.type="Polygon",a.coordinates=b[0]):b.length=d:(a.type=null,delete a.coordinates)}};for(var g in a)a[g]=b(a[g]);return a}},{}],20:[function(a,b){var c=a("./quantize");b.exports=function(a,b,d){function e(a){a&&o.hasOwnProperty(a.type)&&o[a.type](a)}if(b){if(d===b||!a.bbox.every(isFinite))return a;var f=d/b,g=c(0,0,f,f);a.transform.scale[0]/=f,a.transform.scale[1]/=f}else{var h=a.bbox,i=isFinite(h[0])?h[0]:0,j=isFinite(h[1])?h[1]:0,k=isFinite(h[2])?h[2]:0,l=isFinite(h[3])?h[3]:0,m=k-i?(d-1)/(k-i):1,n=l-j?(d-1)/(l-j):1,g=c(-i,-j,m,n);a.transform=g.transform}var o={GeometryCollection:function(a){a.geometries.forEach(e)},Point:function(a){g.point(a.coordinates)},MultiPoint:function(a){a.coordinates.forEach(g.point)}};for(var p in a.objects)e(a.objects[p]);return a.arcs=a.arcs.map(function(a){return g.line(a=a.map(function(a){return a.slice()})),a.length<2&&a.push(a[0]),a}),a}},{"./quantize":23}],21:[function(a,b){var c=a("./quantize");b.exports=function(a,b,d,e){function f(a){a&&n.hasOwnProperty(a.type)&&n[a.type](a)}arguments.length<4&&(e=d);var g=isFinite(b[0])?b[0]:0,h=isFinite(b[1])?b[1]:0,i=isFinite(b[2])?b[2]:0,j=isFinite(b[3])?b[3]:0,k=i-g?(e-1)/(i-g)*d/e:1,l=j-h?(e-1)/(j-h)*d/e:1,m=c(-g,-h,k,l),n={GeometryCollection:function(a){a.geometries.forEach(f)},Point:function(a){m.point(a.coordinates)},MultiPoint:function(a){a.coordinates.forEach(m.point)},LineString:function(a){var b=a.coordinates;m.line(b),b.length<2&&(b[1]=b[0])},MultiLineString:function(a){for(var b=a.coordinates,c=0,d=b.length;d>c;++c){var e=b[c];m.line(e),e.length<2&&(e[1]=e[0])}},Polygon:function(a){for(var b=a.coordinates,c=0,d=b.length;d>c;++c){var e=b[c];for(m.line(e);e.length<4;)e.push(e[0])}},MultiPolygon:function(a){for(var b=a.coordinates,c=0,d=b.length;d>c;++c)for(var e=b[c],f=0,g=e.length;g>f;++f){var h=e[f];for(m.line(h);h.length<4;)h.push(h[0])}}};for(var o in a)f(a[o]);return m.transform}},{"./quantize":23}],22:[function(a,b){b.exports=function(a,b){function c(a){a&&l.hasOwnProperty(a.type)&&l[a.type](a)}function d(a){for(var b=0,c=a.length;c>b;++b){var d,e=a[b],f=0>e&&(e=~e,!0);null==(d=k[e])&&(k[e]=d=j++,i[d]=h[e]),a[b]=f?~d:d}}function e(a){a.forEach(d)}var f=!1,g=a.objects,h=a.arcs,i=(h.length,a.arcs=[]),j=0,k=new Array(h.length);b&&"verbose"in b&&(f=!!b.verbose);var l={GeometryCollection:function(a){a.geometries.forEach(c)},LineString:function(a){d(a.arcs)},MultiLineString:function(a){a.arcs.forEach(d)},Polygon:function(a){a.arcs.forEach(d)},MultiPolygon:function(a){a.arcs.forEach(e)}};for(var m in g)c(g[m]);return a}},{}],23:[function(a,b){b.exports=function(a,b,c,d){function e(e){return e[0]=Math.round((e[0]+a)*c),e[1]=Math.round((e[1]+b)*d),e}function f(a){for(var b,c,d,f=0,g=1,h=a.length,i=e(a[0]),j=i[0],k=i[1];++f<h;)i=e(a[f]),c=i[0],d=i[1],(c!==j||d!==k)&&(b=a[g++],b[0]=j=c,b[1]=k=d);a.length=g}return{point:e,line:f,transform:{scale:[1/c,1/d],translate:[-a,-b]}}}},{}],24:[function(a,b){function c(){}var d=a("./type");b.exports=function(a,b){function e(a){return[a[0]*j+(f/2-n*j)+h,a[1]*q+(g/2-o*q)+h]}var f,g,h=0,i=!0;b&&("width"in b&&(f=+b.width),"height"in b&&(g=+b.height),"margin"in b&&(h=+b.margin),"invert"in b&&(i=!!b.invert));var j,k=a.bbox,l=k[2]-k[0],m=k[3]-k[1],n=(k[2]+k[0])/2,o=(k[3]+k[1])/2;f=Math.max(0,f-2*h),g=Math.max(0,g-2*h),f&&g?j=Math.min(f/l,g/m):f?(j=f/l,g=j*m):(j=g/m,f=j*l);var p,q=i?-j:j,r=e([k[0],k[1]]),s=e([k[2],k[3]]);if(a.bbox=i?[r[0],s[1],s[0],r[1]]:[r[0],r[1],s[0],s[1]],p=a.transform)p.scale[0]*=j,p.scale[1]*=q,p.translate[0]=f/2+h-(n-p.translate[0])*j,p.translate[1]=g/2+h-(o-p.translate[1])*q;else{var t=d({LineString:c,MultiLineString:c,Point:function(a){a.coordinates=e(a.coordinates)},MultiPoint:function(a){a.coordinates=a.coordinates.map(e)},Polygon:c,MultiPolygon:c});for(var u in a.objects)t.object(a.objects[u]);a.arcs=a.arcs.map(function(a){return a.map(e)})}return a}},{"./type":39}],25:[function(a,b){var c=a("../../"),d=a("./coordinate-systems");b.exports=function(a,b){var e,f=0,g=!1,h=null,i=a.arcs.reduce(function(a,b){return a+b.length},0),j=0;if(b&&("minimum-area"in b&&(f=+b["minimum-area"]),"coordinate-system"in b&&(h=d[b["coordinate-system"]]),"retain-proportion"in b&&(e=+b["retain-proportion"]),"verbose"in b&&(g=!!b.verbose)),c.presimplify(a,h.triangleArea),e){var k=[];a.arcs.forEach(function(a){a.forEach(function(a){isFinite(a[2])&&k.push(a[2])})}),b["minimum-area"]=f=i?k.sort(function(a,b){return b-a})[Math.ceil((i-1)*e)]:0}return a.arcs.forEach(a.transform?function(a){for(var b,c,d=0,e=0,g=-1,h=-1,i=a.length;++g<i;)b=a[g],b[2]>=f?(c=a[++h],c[0]=b[0]+d,c[1]=b[1]+e,d=e=0):(d+=b[0],e+=b[1]);a.length=++h}:function(a){for(var b,c=-1,d=-1,e=a.length;++c<e;)b=a[c],b[2]>=f&&(a[++d]=b);a.length=++d}),a.arcs.forEach(a.transform?function(a){var b=0,c=0,d=a.length,e=a[0];for(e.length=2;++b<d;)e=a[b],e.length=2,(e[0]||e[1])&&(a[++c]=e);j+=a.length=(c||1)+1}:function(a){var b,c,d=0,e=0,f=a.length,g=a[0],h=g[0],i=g[1];for(g.length=2;++d<f;)g=a[d],b=g[0],c=g[1],g.length=2,(h!==b||i!==c)&&(a[++e]=g,h=b,i=c);j+=a.length=(e||1)+1}),a}},{"../../":10,"./coordinate-systems":16}],26:[function(a,b,c){function d(a){var b=a*m*6371;return(b>1?b.toFixed(3)+"km":(1e3*b).toPrecision(3)+"m")+" ("+a.toPrecision(3)+"°)"}function e(a){if(!a.length)return 0;for(var b=0,c=a[0],d=c[0]*m,e=c[1]*m/2+l,f=d,g=Math.cos(e),h=Math.sin(e),i=1,j=a.length;j>i;++i){c=a[i],d=c[0]*m,e=c[1]*m/2+l;var n=d-f,o=Math.cos(e),p=Math.sin(e),q=h*p,r=g*o+q*Math.cos(n),s=q*Math.sin(n);b+=Math.atan2(s,r),f=d,g=o,h=p}return 2*(b>k?b-2*k:-k>b?b+2*k:b)}function f(a){return 0>a?a+4*k:a}function g(a){var b=h(a[0],a[1]),c=h(a[1],a[2]),d=h(a[2],a[0]),e=(b+c+d)/2;return 4*Math.atan(Math.sqrt(Math.max(0,Math.tan(e/2)*Math.tan((e-b)/2)*Math.tan((e-c)/2)*Math.tan((e-d)/2))))}function h(a,b){var c,d=(b[0]-a[0])*m,e=Math.sin(d),f=Math.cos(d),g=Math.sin(a[1]*m),h=Math.cos(a[1]*m),i=Math.sin(b[1]*m),j=Math.cos(b[1]*m);return Math.atan2(Math.sqrt((c=j*e)*c+(c=h*i-g*j*f)*c),g*i+h*j*f)}function i(a,b,c,d){return a*=m,b*=m,c*=m,d*=m,2*Math.asin(Math.sqrt(j(d-b)+Math.cos(b)*Math.cos(d)*j(c-a)))}function j(a){return(a=Math.sin(a/2))*a}var k=Math.PI,l=k/4,m=k/180;c.name="spherical",c.formatDistance=d,c.ringArea=e,c.absoluteArea=f,c.triangleArea=g,c.distance=i},{}],27:[function(a,b){var c=a("./type");b.exports=function(a,b){function d(a){return l>=a?[0,k]:a>=n?[0,m]:[g,a]}function e(a){for(var b=[],c=0,e=a.length;e>c;++c){for(var f=a[c],g=0,i=f.length;i>g;++g){var k=f[g];k.polygon=f,b.push(k);for(var m=0,o=k.length;o>m;++m){var p=k[m],q=p[0],r=p[1];if(h>=q||q>=j||l>=r||r>=n){for(var s=m+1;o>s;++s){var t=k[s],u=t[0],v=t[1];if(u>h&&j>u&&v>l&&n>v)break}if(s===m+1)continue;if(m){var w=k.slice(0,m+1);w.polygon=f,w[w.length-1]=d(r),b[b.length-1]=w}else b.pop();if(s>=o)break;b.push(k=k.slice(s-1)),k[0]=d(k[0][1]),k.polygon=f,m=-1,o=k.length}}}f.length=0}for(var x={},y={},m=0,o=b.length;o>m;++m){var z=b[m],A=z[0],B=z[z.length-1];A[0]!==B[0]||A[1]!==B[1]?(z.index=m,x[A]=y[B]=z):(z.polygon.push(z),b[m]=null)}for(var m=0;o>m;++m){var z=b[m];if(z){var A=z[0],B=z[z.length-1],C=y[A],D=x[B];if(delete x[A],delete y[B],A[0]===B[0]&&A[1]===B[1]){z.polygon.push(z);continue}C?(delete y[A],delete x[C[0]],C.pop(),b[C.index]=null,z=C.concat(z),z.polygon=C.polygon,C===D?z.polygon.push(z):(z.index=o++,b.push(x[z[0]]=y[z[z.length-1]]=z))):D?(delete x[B],delete y[D[D.length-1]],z.pop(),z=z.concat(D),z.polygon=D.polygon,z.index=o++,b[D.index]=null,b.push(x[z[0]]=y[z[z.length-1]]=z)):(z.push(z[0]),z.polygon.push(z))}}}var f=.01,g=-180,h=g+f,i=180,j=i-f,k=-90,l=k+f,m=90,n=m-f;if(b){var o=b.scale[0],p=b.scale[1],q=b.translate[0],r=b.translate[1];g=Math.round((g-q)/o),i=Math.round((i-q)/o),k=Math.round((k-r)/p),m=Math.round((m-r)/p),h=Math.round((h-q)/o),j=Math.round((j-q)/o),l=Math.round((l-r)/p),n=Math.round((n-r)/p)}var s=c({Polygon:function(a){e([a.coordinates])},MultiPolygon:function(a){e(a.coordinates)}});for(var t in a)s.object(a[t])}},{"./type":39}],28:[function(a,b){var c=(a("./type"),a("./stitch")),d=a("./coordinate-systems"),e=a("./topology/index"),f=a("./delta"),g=a("./geomify"),h=a("./pre-quantize"),i=a("./post-quantize"),j=a("./bounds"),k=a("./compute-id"),l=a("./transform-properties"),m=1e-6;b.exports=function(a,b){var n,o=1e4,p=1e4,q=function(a){return a.id},r=function(){},s=0,t=!0,u=!1,v=null;if(b&&("verbose"in b&&(u=!!b.verbose),"stitch-poles"in b&&(t=!!b["stitch-poles"]),"coordinate-system"in b&&(v=d[b["coordinate-system"]]),"minimum-area"in b&&(s=+b["minimum-area"]),"quantization"in b&&(o=p=+b.quantization),"pre-quantization"in b&&(o=+b["pre-quantization"]),"post-quantization"in b&&(p=+b["post-quantization"]),"id"in b&&(q=b.id),"property-transform"in b&&(r=b["property-transform"])),o/p%1)throw new Error("post-quantization is not a divisor of pre-quantization");if(o&&!p)throw new Error("post-quantization is required when input is already quantized");k(a,q),l(a,r),g(a);var w=j(a),x=w[0]<-180-m||w[1]<-90-m||w[2]>180+m||w[3]>90+m;if(v||(v=d[x?"cartesian":"spherical"],b&&(b["coordinate-system"]=v.name)),v===d.spherical){if(x)throw new Error("spherical coordinates outside of [±180°, ±90°]");w[0]<-180+m&&(w[0]=-180),w[1]<-90+m&&(w[1]=-90),w[2]>180-m&&(w[2]=180),w[3]>90-m&&(w[3]=90)}o&&(n=h(a,w,o,p)),v===d.spherical&&t&&c(a,n);var y=e(a);return o&&(y.transform=n),y.bbox=w,p&&p!==o&&(i(y,o,p),n=y.transform),p&&f(y),y}},{"./bounds":12,"./compute-id":15,"./coordinate-systems":16,"./delta":17,"./geomify":19,"./post-quantize":20,"./pre-quantize":21,"./stitch":27,"./topology/index":34,"./transform-properties":38,"./type":39}],29:[function(a,b){function c(a,b,c,e){d(a,b,c),d(a,b,b+e),d(a,b+e,c)}function d(a,b,c){for(var d,e=b+(c-- -b>>1);e>b;++b,--c)d=a[b],a[b]=a[c],a[c]=d}var e=a("./join");b.exports=function(a){for(var b=e(a),d=a.coordinates,f=a.lines,g=a.rings,h=0,i=f.length;i>h;++h)for(var j=f[h],k=j[0],l=j[1];++k<l;)if(b.has(d[k])){var m={0:k,1:j[1]};j[1]=k,j=j.next=m}for(var h=0,i=g.length;i>h;++h)for(var n=g[h],o=n[0],p=o,q=n[1],r=b.has(d[o]);++p<q;)if(b.has(d[p]))if(r){var m={0:p,1:n[1]};n[1]=p,n=n.next=m}else c(d,o,q,q-p),d[q]=d[o],r=!0,p=o;return a}},{"./join":35}],30:[function(a,b){var c=(a("./join"),a("./hashmap")),d=a("./point-hash"),e=a("./point-equal");b.exports=function(a){function b(a){var b,c,d,e;if(d=t.get(b=l[a[0]]))for(var f=0,i=d.length;i>f;++f){var j=d[f];if(g(j,a))return a[0]=j[0],void(a[1]=j[1])}if(e=t.get(c=l[a[1]]))for(var f=0,i=e.length;i>f;++f){var k=e[f];if(h(k,a))return a[1]=k[0],void(a[0]=k[1])}d?d.push(a):t.set(b,[a]),e?e.push(a):t.set(c,[a]),u.push(a)}function f(a){var b,c;if(c=t.get(b=l[a[0]]))for(var d=0,e=c.length;e>d;++d){var f=c[d];if(i(f,a))return a[0]=f[0],void(a[1]=f[1]);if(j(f,a))return a[0]=f[1],void(a[1]=f[0])}if(c=t.get(b=l[a[0]+k(a)]))for(var d=0,e=c.length;e>d;++d){var f=c[d];if(i(f,a))return a[0]=f[0],void(a[1]=f[1]);if(j(f,a))return a[0]=f[1],void(a[1]=f[0])}c?c.push(a):t.set(b,[a]),u.push(a)}function g(a,b){var c=a[0],d=b[0],f=a[1],g=b[1];if(c-f!==d-g)return!1;for(;f>=c;++c,++d)if(!e(l[c],l[d]))return!1;return!0}function h(a,b){var c=a[0],d=b[0],f=a[1],g=b[1];if(c-f!==d-g)return!1;for(;f>=c;++c,--g)if(!e(l[c],l[g]))return!1;return!0}function i(a,b){var c=a[0],d=b[0],f=a[1],g=b[1],h=f-c;if(h!==g-d)return!1;for(var i=k(a),j=k(b),m=0;h>m;++m)if(!e(l[c+(m+i)%h],l[d+(m+j)%h]))return!1;return!0}function j(a,b){var c=a[0],d=b[0],f=a[1],g=b[1],h=f-c;if(h!==g-d)return!1;for(var i=k(a),j=h-k(b),m=0;h>m;++m)if(!e(l[c+(m+i)%h],l[g-(m+j)%h]))return!1;return!0}function k(a){for(var b=a[0],c=a[1],d=b,e=d,f=l[d];++d<c;){var g=l[d];(g[0]<f[0]||g[0]===f[0]&&g[1]<f[1])&&(e=d,f=g)}return e-b}var l=a.coordinates,m=a.lines,n=a.rings,o=m.length+n.length;delete a.lines,delete a.rings;for(var p=0,q=m.length;q>p;++p)for(var r=m[p];r=r.next;)++o;for(var p=0,q=n.length;q>p;++p)for(var s=n[p];s=s.next;)++o;for(var t=c(2*o*1.4,d,e),u=a.arcs=[],p=0,q=m.length;q>p;++p){var r=m[p];do b(r);while(r=r.next)}for(var p=0,q=n.length;q>p;++p){var s=n[p];if(s.next){do b(s);while(s=s.next)}else f(s)}return a}},{"./hashmap":32,"./join":35,"./point-equal":36,"./point-hash":37}],31:[function(a,b){b.exports=function(a){function b(a){a&&j.hasOwnProperty(a.type)&&j[a.type](a)}function c(a){for(var b=0,c=a.length;c>b;++b)i[++f]=a[b];var d={0:f-c+1,1:f};return g.push(d),d}function d(a){for(var b=0,c=a.length;c>b;++b)i[++f]=a[b];var d={0:f-c+1,1:f};return h.push(d),d}function e(a){return a.map(d)}var f=-1,g=[],h=[],i=[],j={GeometryCollection:function(a){a.geometries.forEach(b)},LineString:function(a){a.arcs=c(a.coordinates),delete a.coordinates},MultiLineString:function(a){a.arcs=a.coordinates.map(c),delete a.coordinates},Polygon:function(a){a.arcs=a.coordinates.map(d),delete a.coordinates},MultiPolygon:function(a){a.arcs=a.coordinates.map(e),delete a.coordinates}};for(var k in a)b(a[k]);return{type:"Topology",coordinates:i,lines:g,rings:h,objects:a}}},{}],32:[function(a,b){b.exports=function(a,b,c,d,e,f){function g(d,f){for(var g=b(d)&m,h=k[g],i=0;h!=e;){if(c(h,d))return l[g]=f;if(++i>=a)throw new Error("full hashmap");h=k[g=g+1&m]}return k[g]=d,l[g]=f,--n,f}function h(d,f){for(var g=b(d)&m,h=k[g],i=0;h!=e;){if(c(h,d))return l[g];if(++i>=a)throw new Error("full hashmap");h=k[g=g+1&m]}return k[g]=d,l[g]=f,--n,f}function i(d,f){for(var g=b(d)&m,h=k[g],i=0;h!=e;){if(c(h,d))return l[g];if(++i>=a)break;h=k[g=g+1&m]}return f}function j(){for(var a=[],b=0,c=k.length;c>b;++b){var d=k[b];d!=e&&a.push(d)}return a}3===arguments.length&&(d=f=Array,e=null);for(var k=new d(a=1<<Math.max(4,Math.ceil(Math.log(a)/Math.LN2))),l=new f(a),m=a-1,n=a,o=0;a>o;++o)k[o]=e;return{set:g,maybeSet:h,get:i,keys:j}}},{}],33:[function(a,b){b.exports=function(a,b,c,d,e){function f(d){for(var f=b(d)&j,g=i[f],h=0;g!=e;){if(c(g,d))return!0;if(++h>=a)throw new Error("full hashset");g=i[f=f+1&j]}return i[f]=d,--k,!0}function g(d){for(var f=b(d)&j,g=i[f],h=0;g!=e;){if(c(g,d))return!0;if(++h>=a)break;g=i[f=f+1&j]}return!1}function h(){for(var a=[],b=0,c=i.length;c>b;++b){var d=i[b];d!=e&&a.push(d)}return a}3===arguments.length&&(d=Array,e=null);for(var i=new d(a=1<<Math.max(4,Math.ceil(Math.log(a)/Math.LN2))),j=a-1,k=a,l=0;a>l;++l)i[l]=e;return{add:f,has:g,values:h}}},{}],34:[function(a,b){function c(a){var b,c=a[0],d=a[1];return c>d&&(b=c,c=d,d=b),c+31*d}function d(a,b){var c,d=a[0],e=a[1],f=b[0],g=b[1];return d>e&&(c=d,d=e,e=c),f>g&&(c=f,f=g,g=c),d===f&&e===g}var e=a("./hashmap"),f=a("./extract"),g=a("./cut"),h=a("./dedup");b.exports=function(a){function b(a){a&&n.hasOwnProperty(a.type)&&n[a.type](a)}function i(a){var b=[];do{var c=m.get(a);b.push(a[0]<a[1]?c:~c)}while(a=a.next);return b}function j(a){return a.map(i)}var k=h(g(f(a))),l=k.coordinates,m=e(1.4*k.arcs.length,c,d);a=k.objects,k.arcs=k.arcs.map(function(a,b){return m.set(a,b),l.slice(a[0],a[1]+1)}),delete k.coordinates,l=null;var n={GeometryCollection:function(a){a.geometries.forEach(b)},LineString:function(a){a.arcs=i(a.arcs)},MultiLineString:function(a){a.arcs=a.arcs.map(i)},Polygon:function(a){a.arcs=a.arcs.map(i)},MultiPolygon:function(a){a.arcs=a.arcs.map(j)}};for(var o in a)b(a[o]);return k}},{"./cut":29,"./dedup":30,"./extract":31,"./hashmap":32}],35:[function(a,b){var c=a("./hashset"),d=a("./hashmap"),e=a("./point-hash"),f=a("./point-equal");b.exports=function(a){function b(a,b,c,d){if(n[c]!==a){n[c]=a;var e=o[c];if(e>=0){var f=p[c];e===b&&f===d||e===d&&f===b||(++r,q[c]=1)}else o[c]=b,p[c]=d}}function g(){for(var a=d(1.4*j.length,h,i,Int32Array,-1,Int32Array),b=new Int32Array(j.length),c=0,e=j.length;e>c;++c)b[c]=a.maybeSet(c,c);return b}function h(a){return e(j[a])}function i(a,b){return f(j[a],j[b])}for(var j=a.coordinates,k=a.lines,l=a.rings,m=g(),n=new Int32Array(j.length),o=new Int32Array(j.length),p=new Int32Array(j.length),q=new Int8Array(j.length),r=0,s=0,t=j.length;t>s;++s)n[s]=o[s]=p[s]=-1;for(var s=0,t=k.length;t>s;++s){var u,v=k[s],w=v[0],x=v[1],y=m[w],z=m[++w];for(++r,q[y]=1;++w<=x;)b(s,u=y,y=z,z=m[w]);++r,q[z]=1}for(var s=0,t=j.length;t>s;++s)n[s]=-1;for(var s=0,t=l.length;t>s;++s){var A=l[s],B=A[0]+1,C=A[1],u=m[C-1],y=m[B-1],z=m[B];for(b(s,u,y,z);++B<=C;)b(s,u=y,y=z,z=m[B])}n=o=p=null;for(var D,E=c(1.4*r,e,f),s=0,t=j.length;t>s;++s)q[D=m[s]]&&E.add(j[D]);return E}},{"./hashmap":32,"./hashset":33,"./point-equal":36,"./point-hash":37}],36:[function(a,b){b.exports=function(a,b){return a[0]===b[0]&&a[1]===b[1]}},{}],37:[function(a,b){var c=new ArrayBuffer(16),d=new Float64Array(c),e=new Uint32Array(c);b.exports=function(a){d[0]=a[0],d[1]=a[1];var b=e[0]^e[1];return b=b<<5^b>>7^e[2]^e[3],2147483647&b}},{}],38:[function(a,b){b.exports=function(a,b){function c(a){a&&e.hasOwnProperty(a.type)&&e[a.type](a)}function d(a){if(a.properties){var c=a.properties,d={},e=!0;for(var f in c)b(d,f,c[f])&&(e=!1);e?delete a.properties:a.properties=d}}arguments.length<2&&(b=function(){});var e={Feature:d,FeatureCollection:function(a){a.features.forEach(d)}};for(var f in a)c(a[f]);return a}},{}],39:[function(a,b){b.exports=function(a){for(var b in c)b in a||(a[b]=c[b]);return a.defaults=c,a};var c={Feature:function(a){a.geometry&&this.geometry(a.geometry)},FeatureCollection:function(a){for(var b=a.features,c=-1,d=b.length;++c<d;)this.Feature(b[c])},GeometryCollection:function(a){for(var b=a.geometries,c=-1,d=b.length;++c<d;)this.geometry(b[c])},LineString:function(a){this.line(a.coordinates)},MultiLineString:function(a){for(var b=a.coordinates,c=-1,d=b.length;++c<d;)this.line(b[c])},MultiPoint:function(a){for(var b=a.coordinates,c=-1,d=b.length;++c<d;)this.point(b[c])},MultiPolygon:function(a){for(var b=a.coordinates,c=-1,d=b.length;++c<d;)this.polygon(b[c])},Point:function(a){this.point(a.coordinates)},Polygon:function(a){this.polygon(a.coordinates)},object:function(a){return null==a?null:e.hasOwnProperty(a.type)?this[a.type](a):this.geometry(a)},geometry:function(a){return null==a?null:d.hasOwnProperty(a.type)?this[a.type](a):null},point:function(){},line:function(a){for(var b=-1,c=a.length;++b<c;)this.point(a[b])},polygon:function(a){for(var b=-1,c=a.length;++b<c;)this.line(a[b])}},d={LineString:1,MultiLineString:1,MultiPoint:1,MultiPolygon:1,Point:1,Polygon:1,GeometryCollection:1},e={Feature:1,FeatureCollection:1}},{}],40:[function(b,c){!function(){function b(a,b){function c(b){var c,d=a.arcs[0>b?~b:b],e=d[0];return a.transform?(c=[0,0],d.forEach(function(a){c[0]+=a[0],c[1]+=a[1]})):c=d[d.length-1],0>b?[c,e]:[e,c]}function d(a,b){for(var c in a){var d=a[c];delete b[d.start],delete d.start,delete d.end,d.forEach(function(a){e[0>a?~a:a]=1}),h.push(d)}}var e={},f={},g={},h=[],i=-1;return b.forEach(function(c,d){var e,f=a.arcs[0>c?~c:c];f.length<3&&!f[1][0]&&!f[1][1]&&(e=b[++i],b[i]=c,b[d]=e)}),b.forEach(function(a){var b,d,e=c(a),h=e[0],i=e[1];if(b=g[h])if(delete g[b.end],b.push(a),b.end=i,d=f[i]){delete f[d.start];var j=d===b?b:b.concat(d);f[j.start=b.start]=g[j.end=d.end]=j}else f[b.start]=g[b.end]=b;else if(b=f[i])if(delete f[b.start],b.unshift(a),b.start=h,d=g[h]){delete g[d.end];var k=d===b?b:d.concat(b);f[k.start=d.start]=g[k.end=b.end]=k}else f[b.start]=g[b.end]=b;else b=[a],f[b.start=h]=g[b.end=i]=b}),d(g,f),d(f,g),b.forEach(function(a){e[0>a?~a:a]||h.push([a])}),h}function d(a,c,d){function e(a){var b=0>a?~a:a;(k[b]||(k[b]=[])).push({i:a,g:j})}function f(a){a.forEach(e)}function g(a){a.forEach(f)}function h(a){"GeometryCollection"===a.type?a.geometries.forEach(h):a.type in l&&(j=a,l[a.type](a.arcs))}var i=[];if(arguments.length>1){var j,k=[],l={LineString:f,MultiLineString:g,Polygon:g,MultiPolygon:function(a){a.forEach(g)}};h(c),k.forEach(arguments.length<3?function(a){i.push(a[0].i)}:function(a){d(a[0].g,a[a.length-1].g)&&i.push(a[0].i)})}else for(var m=0,n=a.arcs.length;n>m;++m)i.push(m);return{type:"MultiLineString",arcs:b(a,i)}}function e(a,c){function d(a){a.forEach(function(b){b.forEach(function(b){(f[b=0>b?~b:b]||(f[b]=[])).push(a)})}),g.push(a)}function e(b){return m(h(a,{type:"Polygon",arcs:[b]}).coordinates[0])>0}var f={},g=[],i=[];return c.forEach(function(a){"Polygon"===a.type?d(a.arcs):"MultiPolygon"===a.type&&a.arcs.forEach(d)}),g.forEach(function(a){if(!a._){var b=[],c=[a];for(a._=1,i.push(b);a=c.pop();)b.push(a),a.forEach(function(a){a.forEach(function(a){f[0>a?~a:a].forEach(function(a){a._||(a._=1,c.push(a))})})})}}),g.forEach(function(a){delete a._}),{type:"MultiPolygon",arcs:i.map(function(c){var d=[];if(c.forEach(function(a){a.forEach(function(a){a.forEach(function(a){f[0>a?~a:a].length<2&&d.push(a)})})}),d=b(a,d),(n=d.length)>1)for(var g,h=e(c[0][0]),i=0;n>i;++i)if(h===e(d[i])){g=d[0],d[0]=d[i],d[i]=g;break}return d})}}function f(a,b){return"GeometryCollection"===b.type?{type:"FeatureCollection",features:b.geometries.map(function(b){return g(a,b)})}:g(a,b)}function g(a,b){var c={type:"Feature",id:b.id,properties:b.properties||{},geometry:h(a,b)};return null==b.id&&delete c.id,c}function h(a,b){function c(a,b){b.length&&b.pop();
for(var c,d=k[0>a?~a:a],e=0,f=d.length;f>e;++e)b.push(c=d[e].slice()),j(c,e);0>a&&i(b,f)}function d(a){return a=a.slice(),j(a,0),a}function e(a){for(var b=[],d=0,e=a.length;e>d;++d)c(a[d],b);return b.length<2&&b.push(b[0].slice()),b}function f(a){for(var b=e(a);b.length<4;)b.push(b[0].slice());return b}function g(a){return a.map(f)}function h(a){var b=a.type;return"GeometryCollection"===b?{type:b,geometries:a.geometries.map(h)}:b in l?{type:b,coordinates:l[b](a)}:null}var j=r(a.transform),k=a.arcs,l={Point:function(a){return d(a.coordinates)},MultiPoint:function(a){return a.coordinates.map(d)},LineString:function(a){return e(a.arcs)},MultiLineString:function(a){return a.arcs.map(e)},Polygon:function(a){return g(a.arcs)},MultiPolygon:function(a){return a.arcs.map(g)}};return h(b)}function i(a,b){for(var c,d=a.length,e=d-b;e<--d;)c=a[e],a[e++]=a[d],a[d]=c}function j(a,b){for(var c=0,d=a.length;d>c;){var e=c+d>>>1;a[e]<b?c=e+1:d=e}return c}function k(a){function b(a,b){a.forEach(function(a){0>a&&(a=~a);var c=e[a];c?c.push(b):e[a]=[b]})}function c(a,c){a.forEach(function(a){b(a,c)})}function d(a,b){"GeometryCollection"===a.type?a.geometries.forEach(function(a){d(a,b)}):a.type in g&&g[a.type](a.arcs,b)}var e={},f=a.map(function(){return[]}),g={LineString:b,MultiLineString:c,Polygon:c,MultiPolygon:function(a,b){a.forEach(function(a){c(a,b)})}};a.forEach(d);for(var h in e)for(var i=e[h],k=i.length,l=0;k>l;++l)for(var m=l+1;k>m;++m){var n,o=i[l],p=i[m];(n=f[o])[h=j(n,p)]!==p&&n.splice(h,0,p),(n=f[p])[h=j(n,o)]!==o&&n.splice(h,0,o)}return f}function l(a,b){function c(a){g.remove(a),a[1][2]=b(a),g.push(a)}var d,e=r(a.transform),f=s(a.transform),g=q(),h=0;for(b||(b=o),a.arcs.forEach(function(a){var c=[];a.forEach(e);for(var f=1,h=a.length-1;h>f;++f)d=a.slice(f-1,f+2),d[1][2]=b(d),c.push(d),g.push(d);a[0][2]=a[h][2]=1/0;for(var f=0,h=c.length;h>f;++f)d=c[f],d.previous=c[f-1],d.next=c[f+1]});d=g.pop();){var i=d.previous,j=d.next;d[1][2]<h?d[1][2]=h:h=d[1][2],i&&(i.next=j,i[2]=d[2],c(i)),j&&(j.previous=i,j[0]=d[0],c(j))}return a.arcs.forEach(function(a){a.forEach(f)}),a}function m(a){for(var b,c=-1,d=a.length,e=a[d-1],f=0;++c<d;)b=e,e=a[c],f+=b[0]*e[1]-b[1]*e[0];return.5*f}function o(a){var b=a[0],c=a[1],d=a[2];return Math.abs((b[0]-d[0])*(c[1]-b[1])-(b[0]-c[0])*(d[1]-b[1]))}function p(a,b){return a[1][2]-b[1][2]}function q(){function a(a,b){for(;b>0;){var c=(b+1>>1)-1,e=d[c];if(p(a,e)>=0)break;d[e._=b]=e,d[a._=b=c]=a}}function b(a,b){for(;;){var c=b+1<<1,f=c-1,g=b,h=d[g];if(e>f&&p(d[f],h)<0&&(h=d[g=f]),e>c&&p(d[c],h)<0&&(h=d[g=c]),g===b)break;d[h._=b]=h,d[a._=b=g]=a}}var c={},d=[],e=0;return c.push=function(b){return a(d[b._=e]=b,e++),e},c.pop=function(){if(!(0>=e)){var a,c=d[0];return--e>0&&(a=d[e],b(d[a._=0]=a,0)),c}},c.remove=function(c){var f,g=c._;if(d[g]===c)return g!==--e&&(f=d[e],(p(f,c)<0?a:b)(d[f._=g]=f,g)),g},c}function r(a){if(!a)return t;var b,c,d=a.scale[0],e=a.scale[1],f=a.translate[0],g=a.translate[1];return function(a,h){h||(b=c=0),a[0]=(b+=a[0])*d+f,a[1]=(c+=a[1])*e+g}}function s(a){if(!a)return t;var b,c,d=a.scale[0],e=a.scale[1],f=a.translate[0],g=a.translate[1];return function(a,h){h||(b=c=0);var i=(a[0]-f)/d|0,j=(a[1]-g)/e|0;a[0]=i-b,a[1]=j-c,b=i,c=j}}function t(){}var u={version:"1.6.8",mesh:function(a){return h(a,d.apply(this,arguments))},meshArcs:d,merge:function(a){return h(a,e.apply(this,arguments))},mergeArcs:e,feature:f,neighbors:k,presimplify:l};"function"==typeof a&&a.amd?a(u):"object"==typeof c&&c.exports?c.exports=u:this.topojson=u}()},{}],41:[function(a,b){function c(a){function b(b){var c=a.substring(n).match(b);return c?(n+=c[0].length,c[0]):null}function c(){b(/^\s*/)}function d(){c();for(var a,d=0,f=[],g=f;a=b(/^(\()/)||b(/^(\))/)||b(/^(\,)/)||e();){if("("==a)d++;else if(")"==a){if(d--,0==d)break}else a&&Array.isArray(a)&&a.length&&g.push(a);c()}return 0!==d?null:f}function e(){for(var a,d,e=[];d=b(/^[-+]?([0-9]*\.[0-9]+|[0-9]+)/)||b(/^(\,)/);)","==d?(e.push(a),a=[]):(a||(a=[]),a.push(parseFloat(d))),c();return a&&e.push(a),e.length?e:null}function f(){if(!b(/^(point)/i))return null;if(c(),!b(/^(\()/))return null;var a=e();return c(),b(/^(\))/)?{type:"Point",coordinates:a[0]}:null}function g(){if(!b(/^(multipoint)/i))return null;c();var a=d();return c(),{type:"MultiPoint",coordinates:a[0]}}function h(){if(!b(/^(multilinestring)/i))return null;c();var a=d();return c(),{type:"MultiLineString",coordinates:a}}function i(){if(!b(/^(linestring)/i))return null;if(c(),!b(/^(\()/))return null;var a=e();return b(/^(\))/)?{type:"LineString",coordinates:a}:null}function j(){return b(/^(polygon)/i)?(c(),{type:"Polygon",coordinates:d()}):null}function k(){return b(/^(multipolygon)/i)?(c(),{type:"MultiPolygon",coordinates:d()}):null}function l(){var a,d=[];if(!b(/^(geometrycollection)/i))return null;if(c(),!b(/^(\()/))return null;for(;a=m();)d.push(a),c(),b(/^(\,)/),c();return b(/^(\))/)?{type:"GeometryCollection",geometries:d}:null}function m(){return f()||i()||j()||g()||h()||k()||l()}var n=0;return m()}b.exports=c},{}]},{},[1])(1)}),L.GeoJSON=L.FeatureGroup.extend({initialize:function(a,b){L.setOptions(this,b),this._layers={},a&&this.addData(a)},addData:function(a){var b,c,d,e=L.Util.isArray(a)?a:a.features;if(e){for(b=0,c=e.length;c>b;b++)d=e[b],(d.geometries||d.geometry||d.features||d.coordinates)&&this.addData(e[b]);return this}var f=this.options;if(!f.filter||f.filter(a)){var g=L.GeoJSON.geometryToLayer(a,f.pointToLayer,f.coordsToLatLng,f);return g.feature=L.GeoJSON.asFeature(a),g.defaultOptions=g.options,this.resetStyle(g),f.onEachFeature&&f.onEachFeature(a,g),this.addLayer(g)}},resetStyle:function(a){var b=this.options.style;b&&(L.Util.extend(a.options,a.defaultOptions),this._setLayerStyle(a,b))},setStyle:function(a){this.eachLayer(function(b){this._setLayerStyle(b,a)},this)},_setLayerStyle:function(a,b){"function"==typeof b&&(b=b(a.feature)),a.setStyle&&a.setStyle(b)}}),L.extend(L.GeoJSON,{geometryToLayer:function(a,b,c,d){var e,f,g,h,i="Feature"===a.type?a.geometry:a,j=i.coordinates,k=[];switch(c=c||this.coordsToLatLng,i.type){case"Point":return e=c(j),b?b(a,e):new L.Marker(e);case"MultiPoint":for(g=0,h=j.length;h>g;g++)e=c(j[g]),k.push(b?b(a,e):new L.Marker(e));return new L.FeatureGroup(k);case"LineString":return f=this.coordsToLatLngs(j,0,c),new L.Polyline(f,d);case"Polygon":if(2===j.length&&!j[1].length)throw new Error("Invalid GeoJSON object.");return f=this.coordsToLatLngs(j,1,c),new L.Polygon(f,d);case"MultiLineString":return f=this.coordsToLatLngs(j,1,c),new L.MultiPolyline(f,d);case"MultiPolygon":return f=this.coordsToLatLngs(j,2,c),new L.MultiPolygon(f,d);case"GeometryCollection":for(g=0,h=i.geometries.length;h>g;g++)k.push(this.geometryToLayer({geometry:i.geometries[g],type:"Feature",properties:a.properties},b,c,d));return new L.FeatureGroup(k);case"Circle":var l=j[0];return e=new L.LatLng(l[1],l[0]),new L.Circle(e,i.radius);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(a){return new L.LatLng(a[1],a[0],a[2])},coordsToLatLngs:function(a,b,c){var d,e,f,g=[];for(e=0,f=a.length;f>e;e++)d=b?this.coordsToLatLngs(a[e],b-1,c):(c||this.coordsToLatLng)(a[e]),g.push(d);return g},latLngToCoords:function(a){var b=[a.lng,a.lat];return void 0!==a.alt&&b.push(a.alt),b},latLngsToCoords:function(a){for(var b=[],c=0,d=a.length;d>c;c++)b.push(L.GeoJSON.latLngToCoords(a[c]));return b},getFeature:function(a,b){return a.feature?L.extend({},a.feature,{geometry:b}):L.GeoJSON.asFeature(b)},asFeature:function(a){return"Feature"===a.type?a:{type:"Feature",properties:{},geometry:a}}});var PointToGeoJSON={toGeoJSON:function(){return L.GeoJSON.getFeature(this,{type:"Point",coordinates:L.GeoJSON.latLngToCoords(this.getLatLng())})}};L.Marker.include(PointToGeoJSON),L.CircleMarker.include(PointToGeoJSON),L.Circle.include({toGeoJSON:function(){return{type:"Circle",coordinates:[[this.getLatLng().lng,this.getLatLng().lat]],radius:this.getRadius()}}}),L.Polyline.include({toGeoJSON:function(){return L.GeoJSON.getFeature(this,{type:"LineString",coordinates:L.GeoJSON.latLngsToCoords(this.getLatLngs())})}}),L.Polygon.include({toGeoJSON:function(){var a,b,c,d=[L.GeoJSON.latLngsToCoords(this.getLatLngs())];if(d[0].push(d[0][0]),this._holes)for(a=0,b=this._holes.length;b>a;a++)c=L.GeoJSON.latLngsToCoords(this._holes[a]),c.push(c[0]),d.push(c);return L.GeoJSON.getFeature(this,{type:"Polygon",coordinates:d})}}),function(){function a(a){return function(){var b=[];return this.eachLayer(function(a){b.push(a.toGeoJSON().geometry.coordinates)}),L.GeoJSON.getFeature(this,{type:a,coordinates:b})}}L.LayerGroup.include({toGeoJSON:function(){var b,c=this.feature&&this.feature.geometry,d=[];if(c&&"MultiPoint"===c.type)return a("MultiPoint").call(this);var e=c&&"GeometryCollection"===c.type;return this.eachLayer(function(a){a.toGeoJSON&&(b=a.toGeoJSON(),d.push(e?b.geometry:L.GeoJSON.asFeature(b)))}),e?L.GeoJSON.getFeature(this,{geometries:d,type:"GeometryCollection"}):{type:"FeatureCollection",features:d}}})}(),L.geoJson=function(a,b){return new L.GeoJSON(a,b)},function(a,b){L.drawVersion="0.2.3-dev",L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."}},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},polyline:{error:"<strong>Error:</strong> shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes.",text:"Save"},cancel:{title:"Cancel editing, discards all changes.",text:"Cancel"}},buttons:{edit:"Edit layers.",editDisabled:"No layers to edit.",remove:"Delete layers.",removeDisabled:"No layers to delete."}},handlers:{edit:{tooltip:{text:"Drag handles, or marker to edit feature.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove"}}}}},L.Draw={},L.Draw.Feature=L.Handler.extend({includes:L.Mixin.Events,initialize:function(a,b){this._map=a,this._container=a._container,this._overlayPane=a._panes.overlayPane,this._popupPane=a._panes.popupPane,b&&b.shapeOptions&&(b.shapeOptions=L.Util.extend({},this.options.shapeOptions,b.shapeOptions)),L.setOptions(this,b)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire("draw:drawstart",{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this.fire("disabled",{handler:this.type}),this._map.fire("draw:drawstop",{layerType:this.type}))},addHooks:function(){var a=this._map;a&&(L.DomUtil.disableTextSelection(),a.getContainer().focus(),this._tooltip=new L.Tooltip(this._map),L.DomEvent.addListener(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.removeListener(this._container,"keyup",this._cancelDrawing))},setOptions:function(a){L.setOptions(this,a)},_fireCreatedEvent:function(a){this._map.fire("draw:created",{layer:a,layerType:this.type})},_cancelDrawing:function(a){27===a.keyCode&&this.disable()}}),L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),guidelineDistance:20,shapeOptions:{stroke:!0,color:"#f06eaa",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,showLength:!0,zIndexOffset:2e3},initialize:function(a,b){this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error,b&&b.drawError&&(b.drawError=L.Util.extend({},this.options.drawError,b.drawError)),this.type=L.Draw.Polyline.TYPE,L.Draw.Feature.prototype.initialize.call(this,a,b)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._clearHideErrorTimeout(),this._cleanUpShape(),this._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers,this._map.removeLayer(this._poly),delete this._poly,this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._clearGuides(),this._map.off("mousemove",this._onMouseMove,this).off("zoomend",this._onZoomEnd,this)},_finishShape:function(){var a=this._poly.newLatLngIntersects(this._poly.getLatLngs()[0],!0);return!this.options.allowIntersection&&a||!this._shapeIsValid()?void this._showErrorTooltip():(this._fireCreatedEvent(),this.disable(),void(this.options.repeatMode&&this.enable()))},_shapeIsValid:function(){return!0},_onZoomEnd:function(){this._updateGuide()},_onMouseMove:function(a){var b=a.layerPoint,c=a.latlng;this._currentLatLng=c,this._updateTooltip(c),this._updateGuide(b),this._mouseMarker.setLatLng(c),L.DomEvent.preventDefault(a.originalEvent)},_onClick:function(a){var b=a.target.getLatLng(),c=this._markers.length;return c>0&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(b)?void this._showErrorTooltip():(this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(b)),this._poly.addLatLng(b),2===this._poly.getLatLngs().length&&this._map.addLayer(this._poly),this._updateFinishHandler(),this._vertexAdded(b),this._clearGuides(),void this._updateTooltip())},_updateFinishHandler:function(){var a=this._markers.length;a>1&&this._markers[a-1].on("click",this._finishShape,this),a>2&&this._markers[a-2].off("click",this._finishShape,this)},_createMarker:function(a){var b=new L.Marker(a,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(b),b},_updateGuide:function(a){var b=this._markers.length;b>0&&(a=a||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[b-1].getLatLng()),a))},_updateTooltip:function(a){var b=this._getTooltipText();a&&this._tooltip.updatePosition(a),this._errorShown||this._tooltip.updateContent(b)},_drawGuide:function(a,b){var c,d,e,f,g=Math.floor(Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2)));for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane)),c=this.options.guidelineDistance;g>c;c+=this.options.guidelineDistance)d=c/g,e={x:Math.floor(a.x*(1-d)+d*b.x),y:Math.floor(a.y*(1-d)+d*b.y)},f=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer),f.style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color,L.DomUtil.setPosition(f,e)},_updateGuideColor:function(a){if(this._guidesContainer)for(var b=0,c=this._guidesContainer.childNodes.length;c>b;b++)this._guidesContainer.childNodes[b].style.backgroundColor=a},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var a,b,c=this.options.showLength;return 0===this._markers.length?a={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(b=c?this._getMeasurementString():"",a=1===this._markers.length?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:b}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:b}),a},_getMeasurementString:function(){var a,b=this._currentLatLng,c=this._markers[this._markers.length-1].getLatLng();return a=this._measurementRunningTotal+b.distanceTo(c),L.GeometryUtil.readableDistance(a,this.options.metric)},_showErrorTooltip:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._updateGuideColor(this.options.drawError.color),this._poly.setStyle({color:this.options.drawError.color}),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent(this._getTooltipText()),this._updateGuideColor(this.options.shapeOptions.color),this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_vertexAdded:function(a){1===this._markers.length?this._measurementRunningTotal=0:this._measurementRunningTotal+=a.distanceTo(this._markers[this._markers.length-2].getLatLng())},_cleanUpShape:function(){this._markers.length>1&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var a=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,a)}}),L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,shapeOptions:{stroke:!0,color:"#f06eaa",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0}},initialize:function(a,b){L.Draw.Polyline.prototype.initialize.call(this,a,b),this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var a=this._markers.length;1===a&&this._markers[0].on("click",this._finishShape,this),a>2&&(this._markers[a-1].on("dblclick",this._finishShape,this),a>3&&this._markers[a-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var a,b;return 0===this._markers.length?a=L.drawLocal.draw.handlers.polygon.tooltip.start:3>this._markers.length?a=L.drawLocal.draw.handlers.polygon.tooltip.cont:(a=L.drawLocal.draw.handlers.polygon.tooltip.end,b=this._getMeasurementString()),{text:a,subtext:b}},_getMeasurementString:function(){var a=this._area;return a?L.GeometryUtil.readableArea(a,this.options.metric):null},_shapeIsValid:function(){return this._markers.length>=3},_vertexAdded:function(){if(!this.options.allowIntersection&&this.options.showArea){var a=this._poly.getLatLngs();this._area=L.GeometryUtil.geodesicArea(a)}},_cleanUpShape:function(){var a=this._markers.length;a>0&&(this._markers[0].off("click",this._finishShape,this),a>2&&this._markers[a-1].off("dblclick",this._finishShape,this))}}),L.SimpleShape={},L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!1},initialize:function(a,b){this._endLabelText=L.drawLocal.draw.handlers.simpleshape.tooltip.end,L.Draw.Feature.prototype.initialize.call(this,a,b)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this),L.DomEvent.off(b,"mouseup",this._onMouseUp),this._shape&&(this._map.removeLayer(this._shape),delete this._shape)),this._isDrawing=!1},_onMouseDown:function(a){this._isDrawing=!0,this._startLatLng=a.latlng,L.DomEvent.on(b,"mouseup",this._onMouseUp,this).preventDefault(a.originalEvent)},_onMouseMove:function(a){var b=a.latlng;this._tooltip.updatePosition(b),this._isDrawing&&(this._tooltip.updateContent({text:this._endLabelText}),this._drawShape(b))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()}}),L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#f06eaa",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0}},initialize:function(a,b){this.type=L.Draw.Rectangle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,a,b)},_drawShape:function(a){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,a)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,a),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var a=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,a)}}),L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#f06eaa",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showRadius:!0,metric:!0},initialize:function(a,b){this.type=L.Draw.Circle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,a,b)},_drawShape:function(a){this._shape?this._shape.setRadius(this._startLatLng.distanceTo(a)):(this._shape=new L.Circle(this._startLatLng,this._startLatLng.distanceTo(a),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var a=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,a)},_onMouseMove:function(a){var b,c=a.latlng,d=(this.options.metric,this.options.showRadius),e=this.options.metric;this._tooltip.updatePosition(c),this._isDrawing&&(this._drawShape(c),b=this._shape.getRadius().toFixed(1),this._tooltip.updateContent({text:this._endLabelText,subtext:d?"Radius: "+L.GeometryUtil.readableDistance(b,e):""}))}}),L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2e3},initialize:function(a,b){this.type=L.Draw.Marker.TYPE,L.Draw.Feature.prototype.initialize.call(this,a,b)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._tooltip.updateContent({text:L.drawLocal.draw.handlers.marker.tooltip.start}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._marker&&(this._marker.off("click",this._onClick,this),this._map.off("click",this._onClick,this).removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(a){var b=a.latlng;this._tooltip.updatePosition(b),this._mouseMarker.setLatLng(b),this._marker?(b=this._mouseMarker.getLatLng(),this._marker.setLatLng(b)):(this._marker=new L.Marker(b,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset}),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_onClick:function(){this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_fireCreatedEvent:function(){var a=new L.Marker(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,a)}}),L.Edit=L.Edit||{},L.Edit.Poly=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"})},initialize:function(a,b){this._poly=a,L.setOptions(this,b)},addHooks:function(){this._poly._map&&(this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){this._poly._map&&(this._poly._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var a,b,c,d,e=this._poly._latlngs;for(a=0,c=e.length;c>a;a++)d=this._createMarker(e[a],a),d.on("click",this._onMarkerClick,this),this._markers.push(d);var f,g;for(a=0,b=c-1;c>a;b=a++)(0!==a||L.Polygon&&this._poly instanceof L.Polygon)&&(f=this._markers[b],g=this._markers[a],this._createMiddleMarker(f,g),this._updatePrevNext(f,g))},_createMarker:function(a,b){var c=new L.Marker(a,{draggable:!0,icon:this.options.icon});return c._origLatLng=a,c._index=b,c.on("drag",this._onMarkerDrag,this),c.on("dragend",this._fireEdit,this),this._markerGroup.addLayer(c),c},_removeMarker:function(a){var b=a._index;this._markerGroup.removeLayer(a),this._markers.splice(b,1),this._poly.spliceLatLngs(b,1),this._updateIndexes(b,-1),a.off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("click",this._onMarkerClick,this)},_fireEdit:function(){this._poly.edited=!0,this._poly.fire("edit")},_onMarkerDrag:function(a){var b=a.target;L.extend(b._origLatLng,b._latlng),b._middleLeft&&b._middleLeft.setLatLng(this._getMiddleLatLng(b._prev,b)),b._middleRight&&b._middleRight.setLatLng(this._getMiddleLatLng(b,b._next)),this._poly.redraw()},_onMarkerClick:function(a){var b=L.Polygon&&this._poly instanceof L.Polygon?4:3,c=a.target;b>this._poly._latlngs.length||(this._removeMarker(c),this._updatePrevNext(c._prev,c._next),c._middleLeft&&this._markerGroup.removeLayer(c._middleLeft),c._middleRight&&this._markerGroup.removeLayer(c._middleRight),c._prev&&c._next?this._createMiddleMarker(c._prev,c._next):c._prev?c._next||(c._prev._middleRight=null):c._next._middleLeft=null,this._fireEdit())},_updateIndexes:function(a,b){this._markerGroup.eachLayer(function(c){c._index>a&&(c._index+=b)})},_createMiddleMarker:function(a,b){var c,d,e,f=this._getMiddleLatLng(a,b),g=this._createMarker(f);g.setOpacity(.6),a._middleRight=b._middleLeft=g,d=function(){var d=b._index;g._index=d,g.off("click",c,this).on("click",this._onMarkerClick,this),f.lat=g.getLatLng().lat,f.lng=g.getLatLng().lng,this._poly.spliceLatLngs(d,0,f),this._markers.splice(d,0,g),g.setOpacity(1),this._updateIndexes(d,1),b._index++,this._updatePrevNext(a,g),this._updatePrevNext(g,b)},e=function(){g.off("dragstart",d,this),g.off("dragend",e,this),this._createMiddleMarker(a,g),this._createMiddleMarker(g,b)},c=function(){d.call(this),e.call(this),this._fireEdit()},g.on("click",c,this).on("dragstart",d,this).on("dragend",e,this),this._markerGroup.addLayer(g)},_updatePrevNext:function(a,b){a&&(a._next=b),b&&(b._prev=a)},_getMiddleLatLng:function(a,b){var c=this._poly._map,d=c.project(a.getLatLng()),e=c.project(b.getLatLng());return c.unproject(d._add(e)._divideBy(2))}}),L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))}),L.Edit=L.Edit||{},L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"})},initialize:function(a,b){this._shape=a,L.Util.setOptions(this,b)},addHooks:function(){this._shape._map&&(this._map=this._shape._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup))},removeHooks:function(){if(this._shape._map){this._unbindMarker(this._moveMarker);for(var a=0,b=this._resizeMarkers.length;b>a;a++)this._unbindMarker(this._resizeMarkers[a]);this._resizeMarkers=null,this._map.removeLayer(this._markerGroup),delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._createMoveMarker(),this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(a,b){var c=new L.Marker(a,{draggable:!0,icon:b,zIndexOffset:10});return this._bindMarker(c),this._markerGroup.addLayer(c),c},_bindMarker:function(a){a.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this)},_unbindMarker:function(a){a.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this)},_onMarkerDragStart:function(a){var b=a.target;b.setOpacity(0)},_fireEdit:function(){this._shape.edited=!0,this._shape.fire("edit")},_onMarkerDrag:function(a){var b=a.target,c=b.getLatLng();b===this._moveMarker?this._move(c):this._resize(c),this._shape.redraw()},_onMarkerDragEnd:function(a){var b=a.target;b.setOpacity(1),this._fireEdit()},_move:function(){},_resize:function(){}}),L.Edit=L.Edit||{},L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var a=this._shape.getBounds(),b=a.getCenter();this._moveMarker=this._createMarker(b,this.options.moveIcon)},_createResizeMarker:function(){var a=this._getCorners();this._resizeMarkers=[];for(var b=0,c=a.length;c>b;b++)this._resizeMarkers.push(this._createMarker(a[b],this.options.resizeIcon)),this._resizeMarkers[b]._cornerIndex=b},_onMarkerDragStart:function(a){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,a);var b=this._getCorners(),c=a.target,d=c._cornerIndex;this._oppositeCorner=b[(d+2)%4],this._toggleCornerMarkers(0,d)},_onMarkerDragEnd:function(a){var b,c,d=a.target;d===this._moveMarker&&(b=this._shape.getBounds(),c=b.getCenter(),d.setLatLng(c)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,a)},_move:function(a){for(var b,c=this._shape.getLatLngs(),d=this._shape.getBounds(),e=d.getCenter(),f=[],g=0,h=c.length;h>g;g++)b=[c[g].lat-e.lat,c[g].lng-e.lng],f.push([a.lat+b[0],a.lng+b[1]]);this._shape.setLatLngs(f),this._repositionCornerMarkers()},_resize:function(a){var b;this._shape.setBounds(L.latLngBounds(a,this._oppositeCorner)),b=this._shape.getBounds(),this._moveMarker.setLatLng(b.getCenter())},_getCorners:function(){var a=this._shape.getBounds(),b=a.getNorthWest(),c=a.getNorthEast(),d=a.getSouthEast(),e=a.getSouthWest();return[b,c,d,e]},_toggleCornerMarkers:function(a){for(var b=0,c=this._resizeMarkers.length;c>b;b++)this._resizeMarkers[b].setOpacity(a)},_repositionCornerMarkers:function(){for(var a=this._getCorners(),b=0,c=this._resizeMarkers.length;c>b;b++)this._resizeMarkers[b].setLatLng(a[b])}}),L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Circle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var a=this._shape.getLatLng();this._moveMarker=this._createMarker(a,this.options.moveIcon)},_createResizeMarker:function(){var a=this._shape.getLatLng(),b=this._getResizeMarkerPoint(a);this._resizeMarkers=[],this._resizeMarkers.push(this._createMarker(b,this.options.resizeIcon))},_getResizeMarkerPoint:function(a){var b=this._shape._radius*Math.cos(Math.PI/4),c=this._map.project(a);return this._map.unproject([c.x+b,c.y-b])},_move:function(a){var b=this._getResizeMarkerPoint(a);
this._resizeMarkers[0].setLatLng(b),this._shape.setLatLng(a)},_resize:function(a){var b=this._moveMarker.getLatLng(),c=b.distanceTo(a);this._shape.setRadius(c)}}),L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.LatLngUtil={cloneLatLngs:function(a){for(var b=[],c=0,d=a.length;d>c;c++)b.push(this.cloneLatLng(a[c]));return b},cloneLatLng:function(a){return L.latLng(a.lat,a.lng)}},L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(a){var b,c,d=a.length,e=0,f=L.LatLng.DEG_TO_RAD;if(d>2){for(var g=0;d>g;g++)b=a[g],c=a[(g+1)%d],e+=(c.lng-b.lng)*f*(2+Math.sin(b.lat*f)+Math.sin(c.lat*f));e=40680631590769*e/2}return Math.abs(e)},readableArea:function(a,b){var c;return b?c=a>=1e4?(1e-4*a).toFixed(2)+" ha":a.toFixed(2)+" m&sup2;":(a*=.836127,c=a>=3097600?(a/3097600).toFixed(2)+" mi&sup2;":a>=4840?(a/4840).toFixed(2)+" acres":Math.ceil(a)+" yd&sup2;"),c},readableDistance:function(a,b){var c;return b?c=a>1e3?(a/1e3).toFixed(2)+" km":Math.ceil(a)+" m":(a*=1.09361,c=a>1760?(a/1760).toFixed(2)+" miles":Math.ceil(a)+" yd"),c}}),L.Util.extend(L.LineUtil,{segmentsIntersect:function(a,b,c,d){return this._checkCounterclockwise(a,c,d)!==this._checkCounterclockwise(b,c,d)&&this._checkCounterclockwise(a,b,c)!==this._checkCounterclockwise(a,b,d)},_checkCounterclockwise:function(a,b,c){return(c.y-a.y)*(b.x-a.x)>(b.y-a.y)*(c.x-a.x)}}),L.Polyline.include({intersects:function(){var a,b,c,d=this._originalPoints,e=d?d.length:0;if(this._tooFewPointsForIntersection())return!1;for(a=e-1;a>=3;a--)if(b=d[a-1],c=d[a],this._lineSegmentsIntersectsRange(b,c,a-2))return!0;return!1},newLatLngIntersects:function(a,b){return this._map?this.newPointIntersects(this._map.latLngToLayerPoint(a),b):!1},newPointIntersects:function(a,b){var c=this._originalPoints,d=c?c.length:0,e=c?c[d-1]:null,f=d-2;return this._tooFewPointsForIntersection(1)?!1:this._lineSegmentsIntersectsRange(e,a,f,b?1:0)},_tooFewPointsForIntersection:function(a){var b=this._originalPoints,c=b?b.length:0;return c+=a||0,!this._originalPoints||3>=c},_lineSegmentsIntersectsRange:function(a,b,c,d){var e,f,g=this._originalPoints;d=d||0;for(var h=c;h>d;h--)if(e=g[h-1],f=g[h],L.LineUtil.segmentsIntersect(a,b,e,f))return!0;return!1}}),L.Polygon.include({intersects:function(){var a,b,c,d,e,f=this._originalPoints;return this._tooFewPointsForIntersection()?!1:(a=L.Polyline.prototype.intersects.call(this))?!0:(b=f.length,c=f[0],d=f[b-1],e=b-2,this._lineSegmentsIntersectsRange(d,c,e,1))}}),L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(a){if("0.7">L.version)throw Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");L.Control.prototype.initialize.call(this,a);var b,c;this._toolbars={},L.DrawToolbar&&this.options.draw&&(c=new L.DrawToolbar(this.options.draw),b=L.stamp(c),this._toolbars[b]=c,this._toolbars[b].on("enable",this._toolbarEnabled,this)),L.EditToolbar&&this.options.edit&&(c=new L.EditToolbar(this.options.edit),b=L.stamp(c),this._toolbars[b]=c,this._toolbars[b].on("enable",this._toolbarEnabled,this))},onAdd:function(a){var b,c=L.DomUtil.create("div","leaflet-draw"),d=!1,e="leaflet-draw-toolbar-top";for(var f in this._toolbars)this._toolbars.hasOwnProperty(f)&&(b=this._toolbars[f].addToolbar(a),d||(L.DomUtil.hasClass(b,e)||L.DomUtil.addClass(b.childNodes[0],e),d=!0),c.appendChild(b));return c},onRemove:function(){for(var a in this._toolbars)this._toolbars.hasOwnProperty(a)&&this._toolbars[a].removeToolbar()},setDrawingOptions:function(a){for(var b in this._toolbars)this._toolbars[b]instanceof L.DrawToolbar&&this._toolbars[b].setOptions(a)},_toolbarEnabled:function(a){var b=""+L.stamp(a.target);for(var c in this._toolbars)this._toolbars.hasOwnProperty(c)&&c!==b&&this._toolbars[c].disable()}}),L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1}),L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))}),L.Toolbar=L.Class.extend({includes:[L.Mixin.Events],initialize:function(a){L.setOptions(this,a),this._modes={},this._actionButtons=[],this._activeMode=null},enabled:function(){return null!==this._activeMode},disable:function(){this.enabled()&&this._activeMode.handler.disable()},removeToolbar:function(){for(var a in this._modes)this._modes.hasOwnProperty(a)&&(this._disposeButton(this._modes[a].button,this._modes[a].handler.enable),this._modes[a].handler.disable(),this._modes[a].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};for(var b=0,c=this._actionButtons.length;c>b;b++)this._disposeButton(this._actionButtons[b].button,this._actionButtons[b].callback);this._actionButtons=[],this._actionsContainer=null},_initModeHandler:function(a,b,c,d,e){var f=a.type;this._modes[f]={},this._modes[f].handler=a,this._modes[f].button=this._createButton({title:e,className:d+"-"+f,container:b,callback:this._modes[f].handler.enable,context:this._modes[f].handler}),this._modes[f].buttonIndex=c,this._modes[f].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_createButton:function(a){var b=L.DomUtil.create("a",a.className||"",a.container);return b.href="#",a.text&&(b.innerHTML=a.text),a.title&&(b.title=a.title),L.DomEvent.on(b,"click",L.DomEvent.stopPropagation).on(b,"mousedown",L.DomEvent.stopPropagation).on(b,"dblclick",L.DomEvent.stopPropagation).on(b,"click",L.DomEvent.preventDefault).on(b,"click",a.callback,a.context),b},_disposeButton:function(a,b){L.DomEvent.off(a,"click",L.DomEvent.stopPropagation).off(a,"mousedown",L.DomEvent.stopPropagation).off(a,"dblclick",L.DomEvent.stopPropagation).off(a,"click",L.DomEvent.preventDefault).off(a,"click",b)},_handlerActivated:function(a){this._activeMode&&this._activeMode.handler.enabled()&&this._activeMode.handler.disable(),this._activeMode=this._modes[a.handler],L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._showActionsToolbar(),this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar(),L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._activeMode=null,this.fire("disable")},_createActions:function(a){for(var b,c,d=L.DomUtil.create("ul","leaflet-draw-actions"),e=a.length,f=0;e>f;f++)b=L.DomUtil.create("li","",d),c=this._createButton({title:a[f].title,text:a[f].text,container:b,callback:a[f].callback,context:a[f].context}),this._actionButtons.push({button:c,callback:a[f].callback});return d},_showActionsToolbar:function(){var a=this._activeMode.buttonIndex,b=this._lastButtonIndex,c=26,d=1,e=a*c+a*d-1;this._actionsContainer.style.top=e+"px",0===a&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top")),a===b&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom")),this._actionsContainer.style.display="block"},_hideActionsToolbar:function(){this._actionsContainer.style.display="none",L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom")}}),L.Tooltip=L.Class.extend({initialize:function(a){this._map=a,this._popupPane=a._panes.popupPane,this._container=a.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null,this._singleLineLabel=!1},dispose:function(){this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(a){return this._container?(a.subtext=a.subtext||"",0!==a.subtext.length||this._singleLineLabel?a.subtext.length>0&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(a.subtext.length>0?'<span class="leaflet-draw-tooltip-subtext">'+a.subtext+"</span><br />":"")+"<span>"+a.text+"</span>",this):this},updatePosition:function(a){var b=this._map.latLngToLayerPoint(a),c=this._container;return this._container&&(c.style.visibility="inherit",L.DomUtil.setPosition(c,b)),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this}}),L.DrawToolbar=L.Toolbar.extend({options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{}},initialize:function(a){for(var b in this.options)this.options.hasOwnProperty(b)&&a[b]&&(a[b]=L.extend({},this.options[b],a[b]));L.Toolbar.prototype.initialize.call(this,a)},addToolbar:function(a){var b=L.DomUtil.create("div","leaflet-draw-section"),c=0,d="leaflet-draw-draw";return this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this.options.polyline&&this._initModeHandler(new L.Draw.Polyline(a,this.options.polyline),this._toolbarContainer,c++,d,L.drawLocal.draw.toolbar.buttons.polyline),this.options.polygon&&this._initModeHandler(new L.Draw.Polygon(a,this.options.polygon),this._toolbarContainer,c++,d,L.drawLocal.draw.toolbar.buttons.polygon),this.options.rectangle&&this._initModeHandler(new L.Draw.Rectangle(a,this.options.rectangle),this._toolbarContainer,c++,d,L.drawLocal.draw.toolbar.buttons.rectangle),this.options.circle&&this._initModeHandler(new L.Draw.Circle(a,this.options.circle),this._toolbarContainer,c++,d,L.drawLocal.draw.toolbar.buttons.circle),this.options.marker&&this._initModeHandler(new L.Draw.Marker(a,this.options.marker),this._toolbarContainer,c++,d,L.drawLocal.draw.toolbar.buttons.marker),this._lastButtonIndex=--c,this._actionsContainer=this._createActions([{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]),b.appendChild(this._toolbarContainer),b.appendChild(this._actionsContainer),b},setOptions:function(a){L.setOptions(this,a);for(var b in this._modes)this._modes.hasOwnProperty(b)&&a.hasOwnProperty(b)&&this._modes[b].handler.setOptions(a[b])}}),L.EditToolbar=L.Toolbar.extend({options:{edit:{selectedPathOptions:{color:"#fe57a1",opacity:.6,dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1}},remove:{},featureGroup:null},initialize:function(a){a.edit&&(void 0===a.edit.selectedPathOptions&&(a.edit.selectedPathOptions=this.options.edit.selectedPathOptions),a.edit=L.extend({},this.options.edit,a.edit)),a.remove&&(a.remove=L.extend({},this.options.remove,a.remove)),L.Toolbar.prototype.initialize.call(this,a),this._selectedFeatureCount=0},addToolbar:function(a){var b=L.DomUtil.create("div","leaflet-draw-section"),c=0,d="leaflet-draw-edit",e=this.options.featureGroup;return this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this._map=a,this.options.edit&&this._initModeHandler(new L.EditToolbar.Edit(a,{featureGroup:e,selectedPathOptions:this.options.edit.selectedPathOptions}),this._toolbarContainer,c++,d,L.drawLocal.edit.toolbar.buttons.edit),this.options.remove&&this._initModeHandler(new L.EditToolbar.Delete(a,{featureGroup:e}),this._toolbarContainer,c++,d,L.drawLocal.edit.toolbar.buttons.remove),this._lastButtonIndex=--c,this._actionsContainer=this._createActions([{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}]),b.appendChild(this._toolbarContainer),b.appendChild(this._actionsContainer),this._checkDisabled(),e.on("layeradd layerremove",this._checkDisabled,this),b},removeToolbar:function(){L.Toolbar.prototype.removeToolbar.call(this),this.options.featureGroup.off("layeradd layerremove",this._checkDisabled,this)},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save(),this._activeMode.handler.disable()},_checkDisabled:function(){var a,b=this.options.featureGroup,c=0!==b.getLayers().length;this.options.edit&&(a=this._modes[L.EditToolbar.Edit.TYPE].button,c?L.DomUtil.removeClass(a,"leaflet-disabled"):L.DomUtil.addClass(a,"leaflet-disabled"),a.setAttribute("title",c?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled)),this.options.remove&&(a=this._modes[L.EditToolbar.Delete.TYPE].button,c?L.DomUtil.removeClass(a,"leaflet-disabled"):L.DomUtil.addClass(a,"leaflet-disabled"),a.setAttribute("title",c?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled))}}),L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},includes:L.Mixin.Events,initialize:function(a,b){if(L.Handler.prototype.initialize.call(this,a),this._selectedPathOptions=b.selectedPathOptions,this._featureGroup=b.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={},this.type=L.EditToolbar.Edit.TYPE},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this),this.fire("enabled",{handler:this.type}),this._map.fire("draw:editstart",{handler:this.type}))},disable:function(){this._enabled&&(this.fire("disabled",{handler:this.type}),this._map.fire("draw:editstop",{handler:this.type}),this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this))},addHooks:function(){var a=this._map;a&&(a.getContainer().focus(),this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._featureGroup.eachLayer(function(a){this._revertLayer(a)},this)},save:function(){var a=new L.LayerGroup;this._featureGroup.eachLayer(function(b){b.edited&&(a.addLayer(b),b.edited=!1)}),this._map.fire("draw:edited",{layers:a})},_backupLayer:function(a){var b=L.Util.stamp(a);this._uneditedLayerProps[b]||(this._uneditedLayerProps[b]=a instanceof L.Polyline||a instanceof L.Polygon||a instanceof L.Rectangle?{latlngs:L.LatLngUtil.cloneLatLngs(a.getLatLngs())}:a instanceof L.Circle?{latlng:L.LatLngUtil.cloneLatLng(a.getLatLng()),radius:a.getRadius()}:{latlng:L.LatLngUtil.cloneLatLng(a.getLatLng())})},_revertLayer:function(a){var b=L.Util.stamp(a);a.edited=!1,this._uneditedLayerProps.hasOwnProperty(b)&&(a instanceof L.Polyline||a instanceof L.Polygon||a instanceof L.Rectangle?a.setLatLngs(this._uneditedLayerProps[b].latlngs):a instanceof L.Circle?(a.setLatLng(this._uneditedLayerProps[b].latlng),a.setRadius(this._uneditedLayerProps[b].radius)):a.setLatLng(this._uneditedLayerProps[b].latlng))},_toggleMarkerHighlight:function(a){if(a._icon){var b=a._icon;b.style.display="none",L.DomUtil.hasClass(b,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(b,"leaflet-edit-marker-selected"),this._offsetMarker(b,-4)):(L.DomUtil.addClass(b,"leaflet-edit-marker-selected"),this._offsetMarker(b,4)),b.style.display=""}},_offsetMarker:function(a,b){var c=parseInt(a.style.marginTop,10)-b,d=parseInt(a.style.marginLeft,10)-b;a.style.marginTop=c+"px",a.style.marginLeft=d+"px"},_enableLayerEdit:function(a){var b,c=a.layer||a.target||a,d=c instanceof L.Marker;(!d||c._icon)&&(this._backupLayer(c),this._selectedPathOptions&&(b=L.Util.extend({},this._selectedPathOptions),d?this._toggleMarkerHighlight(c):(c.options.previousOptions=c.options,c instanceof L.Circle||c instanceof L.Polygon||c instanceof L.Rectangle||(b.fill=!1),c.setStyle(b))),d?(c.dragging.enable(),c.on("dragend",this._onMarkerDragEnd)):c.editing.enable())},_disableLayerEdit:function(a){var b=a.layer||a.target||a;b.edited=!1,this._selectedPathOptions&&(b instanceof L.Marker?this._toggleMarkerHighlight(b):(b.setStyle(b.options.previousOptions),delete b.options.previousOptions)),b instanceof L.Marker?(b.dragging.disable(),b.off("dragend",this._onMarkerDragEnd,this)):b.editing.disable()},_onMarkerDragEnd:function(a){var b=a.target;b.edited=!0},_onMouseMove:function(a){this._tooltip.updatePosition(a.latlng)},_hasAvailableLayers:function(){return 0!==this._featureGroup.getLayers().length}}),L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},includes:L.Mixin.Events,initialize:function(a,b){if(L.Handler.prototype.initialize.call(this,a),L.Util.setOptions(this,b),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this),this.fire("enabled",{handler:this.type}),this._map.fire("draw:editstart",{handler:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),this.fire("disabled",{handler:this.type}),this._map.fire("draw:editstop",{handler:this.type}))},addHooks:function(){var a=this._map;a&&(a.getContainer().focus(),this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.layerGroup,this._tooltip=new L.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(a){this._deletableLayers.addLayer(a)},this)},save:function(){this._map.fire("draw:deleted",{layers:this._deletedLayers})},_enableLayerDelete:function(a){var b=a.layer||a.target||a;b.on("click",this._removeLayer,this)},_disableLayerDelete:function(a){var b=a.layer||a.target||a;b.off("click",this._removeLayer,this),this._deletedLayers.removeLayer(b)},_removeLayer:function(a){var b=a.layer||a.target||a;this._deletableLayers.removeLayer(b),this._deletedLayers.addLayer(b)},_onMouseMove:function(a){this._tooltip.updatePosition(a.latlng)},_hasAvailableLayers:function(){return 0!==this._deletableLayers.getLayers().length}})}(this,document),L.Draw.Note=L.Draw.Rectangle.extend({statics:{TYPE:"note"},options:{shapeOptions:{stroke:!0,color:"#fff",weight:10,opacity:.2,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},noteOptions:{}},initialize:function(a,b){L.Draw.SimpleShape.prototype.initialize.call(this,a,b),this.type=L.Draw.Note.TYPE,this._name="L.Draw.Note",this._initialLabelText=L.drawLocal.draw.handlers.note.tooltip.start},_drawShape:function(a){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,a)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,a),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var a=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions),b=new L.Note(this,this._map,this._shape.getBounds(),this.options.noteOptions,a);this._map.fire("draw:note:created",{rectangleLayer:a,noteLayer:b,layerType:this.type})}}),L.Note=L.Handler.extend({includes:L.Mixin.Events,options:{fontFamily:"Helvetica Neue",fontSize:1.1,color:"black",backgroundColor:"rgba(255, 255, 255, 0.8)",opacity:1,fontWeight:200,margin:0,paddingLeft:"10px",paddingRight:"10px",paddingTop:"10px",border:0,position:"absolute",borderRadius:"3px",boxShadow:"0 0 15px 0 rgba(0,0,0,0.3)",overflow:"hidden",resize:"none",zIndex:10},initialize:function(a,b,c,d,e){this._rectangle=e,this._rectangle._note=this,this._parent=a,this._map=b,this._latLngBounds=c,this._latlng=new L.LatLng(c._northEast.lat,c._southWest.lng),this._container=this._map._container,this._overlayPane=this._map._panes.overlayPane,this._popupPane=this._map._panes.popupPane,this._name="L.Note",this._initialZoom=e._initialZoom||this._map.getZoom(),this.options&&d.noteOptions&&(d=L.Util.extend({},this.options,d.noteOptions)),L.setOptions(this,d),L.Handler.prototype.initialize.call(this,this._map,d)},onAdd:function(){this._el=L.DomUtil.create("textarea","leaflet-draw-note-container");for(o in this.options)if("fontSize"!==o){"value"===o&&(this._el.value=this.options[o]);try{this._el.style[o]=this.options[o]}catch(a){"backgroundColor"==o&&(this._el.style[o]="#FFF",this._el.style.filter="alpha(opacity=80)")}}else this._el.style[o]=this.options[o]+"em";this._el.disabled=!0,this._map.getPanes().overlayPane.appendChild(this._el),this._map.on("viewreset",this._reset,this),this._map.on("zoomstart",this._zoomStart,this),this._reset(),Wu.DomEvent.on(this._el,"mousemove",function(){this._map._popup&&this._map._popup._close()},this),this.addHooks()},onRemove:function(){this._map.getPanes().overlayPane.removeChild(this._el),this._map.off("viewreset",this._reset,this)},_zoomStart:function(){this._el.style.opacity=0},_reset:function(){this._latlng=this._rectangle._latlngs[1]||this._latlng,this._latLngBounds=this._rectangle.getBounds()||this._latLngBounds;var a=this._map.latLngToLayerPoint(this._latLngBounds._northEast),b=this._map.latLngToLayerPoint(this._latLngBounds._southWest);this._width=a.x-b.x,this._height=b.y-a.y,this._el.style.height=this._height+"px",this._el.style.width=this._width+"px",this._zoomOffset=this._initialZoom-this._map.getZoom(),0==this._zoomOffset&&(this._fontScale=this.options.fontSize),-1==this._zoomOffset&&(this._fontScale=2*this.options.fontSize),1==this._zoomOffset&&(this._fontScale=this.options.fontSize/2),this._el.style.fontSize=this._fontScale+"em",this._el.style.lineHeight=1;var c=this._map.latLngToLayerPoint(this._latlng);L.DomUtil.setPosition(this._el,c);var d=this;window.setTimeout(function(){d._updateOpacity()},10)},_updateOpacity:function(){if(0==this._zoomOffset){this._el.style.opacity=1;try{var a=this;a._rectangle._path.style.opacity=1}catch(b){window.dummy=this,window.dummy._rectangle._path.style.opacity=1}}else{var c=Math.abs(this._zoomOffset);c=4*c;var d=1/c;.2>d&&(d=0),this._el.style.opacity=d;try{this._rectangle._path.style.opacity=d}catch(b){}}},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire("draw:drawstart",{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this.fire("disabled",{handler:this.type}),this._map.fire("draw:drawstop",{layerType:this.type}))},addHooks:function(){this._map;this._map&&(L.DomUtil.disableTextSelection(),this._map.getContainer().focus(),this._tooltip=new L.Tooltip(this._map),L.DomEvent.addListener(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.removeListener(this._container,"keyup",this._cancelDrawing))},setOptions:function(a){L.setOptions(this,a)},_fireCreatedEvent:function(){},_cancelDrawing:function(a){27===a.keyCode&&this.disable()}}),L.Edit=L.Edit||{},L.Edit.Rectangle=L.Edit.SimpleShape.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move leaflet-edit-move-note"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize leaflet-edit-resize-note"})},_createMoveMarker:function(){var a=this._shape.getBounds(),b=a.getCenter();this._moveMarker=this._createMarker(b,this.options.moveIcon)},_createResizeMarker:function(){var a=this._getCorners();this._resizeMarkers=[];for(var b=0,c=a.length;c>b;b++)this._resizeMarkers.push(this._createMarker(a[b],this.options.resizeIcon)),this._resizeMarkers[b]._cornerIndex=b},_onMarkerDragStart:function(a){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,a);var b=this._getCorners(),c=a.target,d=c._cornerIndex;this._oppositeCorner=b[(d+2)%4],this._toggleCornerMarkers(0,d)},_onMarkerDragEnd:function(a){var b,c,d=a.target;d===this._moveMarker&&(b=this._shape.getBounds(),c=b.getCenter(),d.setLatLng(c)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,a)},_move:function(a){for(var b,c=this._shape.getLatLngs(),d=this._shape.getBounds(),e=d.getCenter(),f=[],g=0,h=c.length;h>g;g++)b=[c[g].lat-e.lat,c[g].lng-e.lng],f.push([a.lat+b[0],a.lng+b[1]]);if(this._shape.setLatLngs(f),this._repositionCornerMarkers(),this._shape._note){var i=this._getCorners(),j=map.latLngToLayerPoint(i[0]);L.DomUtil.setPosition(this._shape._note._el,j)}},_resize:function(a){var b;if(this._shape.setBounds(L.latLngBounds(a,this._oppositeCorner)),b=this._shape.getBounds(),this._moveMarker.setLatLng(b.getCenter()),this._shape._note){var c=this._getCorners(),d=this._map.latLngToLayerPoint(c[0]),e=this._map.latLngToLayerPoint(c[2]),f=e.y-d.y,g=e.x-d.x;this._shape._note._el.style.height=f+"px",this._shape._note._el.style.width=g+"px",L.DomUtil.setPosition(this._shape._note._el,d)}},_getCorners:function(){var a=this._shape.getBounds(),b=a.getNorthWest(),c=a.getNorthEast(),d=a.getSouthEast(),e=a.getSouthWest();return[b,c,d,e]},_toggleCornerMarkers:function(a){for(var b=0,c=this._resizeMarkers.length;c>b;b++)this._resizeMarkers[b].setOpacity(a)},_repositionCornerMarkers:function(){for(var a=this._getCorners(),b=0,c=this._resizeMarkers.length;c>b;b++)this._resizeMarkers[b].setLatLng(a[b])}}),L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),this.options.editable&&(this.editing.enable(),map.LeafletDrawEditEnabled=!0)),this.rectangle=!0}),L.drawLocal.draw.toolbar.buttons.note="Place a note",L.drawLocal.draw.handlers.note={tooltip:{start:"Click map to place note"}},L.DrawToolbar.prototype.options.note={},L.DrawToolbar.prototype.addToolbar=function(a){var b=L.DomUtil.create("div","leaflet-draw-section"),c=0,d="leaflet-draw-draw";return this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this.options.polyline&&this._initModeHandler(new L.Draw.Polyline(a,this.options.polyline),this._toolbarContainer,c++,d,L.drawLocal.draw.toolbar.buttons.polyline),this.options.polygon&&this._initModeHandler(new L.Draw.Polygon(a,this.options.polygon),this._toolbarContainer,c++,d,L.drawLocal.draw.toolbar.buttons.polygon),this.options.rectangle&&this._initModeHandler(new L.Draw.Rectangle(a,this.options.rectangle),this._toolbarContainer,c++,d,L.drawLocal.draw.toolbar.buttons.rectangle),this.options.circle&&this._initModeHandler(new L.Draw.Circle(a,this.options.circle),this._toolbarContainer,c++,d,L.drawLocal.draw.toolbar.buttons.circle),this.options.marker&&this._initModeHandler(new L.Draw.Marker(a,this.options.marker),this._toolbarContainer,c++,d,L.drawLocal.draw.toolbar.buttons.marker),this.options.note&&this._initModeHandler(new L.Draw.Note(a,this.options.note),this._toolbarContainer,c++,d,L.drawLocal.draw.toolbar.buttons.note),this._lastButtonIndex=--c,this._actionsContainer=this._createActions([{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]),b.appendChild(this._toolbarContainer),b.appendChild(this._actionsContainer),b},L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},includes:L.Mixin.Events,initialize:function(a,b){if(L.Draw._editshortcut=this,L.Handler.prototype.initialize.call(this,a),this._selectedPathOptions=b.selectedPathOptions,this._featureGroup=b.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={},this.type=L.EditToolbar.Edit.TYPE},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(map.LeafletDrawEditEnabled=!0,L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this),this.fire("enabled",{handler:this.type}),this._map.fire("draw:editstart",{handler:this.type}))},disable:function(){this._enabled&&(this.fire("disabled",{handler:this.type}),this._map.fire("draw:editstop",{handler:this.type}),this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this))},addHooks:function(){var a=this._map;a&&(a.getContainer().focus(),this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._featureGroup.eachLayer(function(a){this._revertLayer(a)},this)},save:function(){var a=new L.LayerGroup;this._featureGroup.eachLayer(function(b){b.edited&&(a.addLayer(b),b.edited=!1)}),this._map.fire("draw:edited",{layers:a})},_backupLayer:function(a){var b=L.Util.stamp(a);if(!this._uneditedLayerProps[b])if(a instanceof L.Polyline||a instanceof L.Polygon||a instanceof L.Rectangle)this._uneditedLayerProps[b]={latlngs:L.LatLngUtil.cloneLatLngs(a.getLatLngs())};else if(a instanceof L.Circle)this._uneditedLayerProps[b]={latlng:L.LatLngUtil.cloneLatLng(a.getLatLng()),radius:a.getRadius()};else if(a instanceof L.Note);else if(a instanceof L.GeoJSON);else try{this._uneditedLayerProps[b]={latlng:L.LatLngUtil.cloneLatLng(a.getLatLng())}}catch(c){}},_revertLayer:function(a){var b=L.Util.stamp(a);a.edited=!1,this._uneditedLayerProps.hasOwnProperty(b)&&(a instanceof L.Polyline||a instanceof L.Polygon||a instanceof L.Rectangle?a.setLatLngs(this._uneditedLayerProps[b].latlngs):a instanceof L.Circle?(a.setLatLng(this._uneditedLayerProps[b].latlng),a.setRadius(this._uneditedLayerProps[b].radius)):a instanceof L.Note||a.setLatLng(this._uneditedLayerProps[b].latlng))},_toggleMarkerHighlight:function(a){if(a._icon){var b=a._icon;b.style.display="none",L.DomUtil.hasClass(b,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(b,"leaflet-edit-marker-selected"),this._offsetMarker(b,-4)):(L.DomUtil.addClass(b,"leaflet-edit-marker-selected"),this._offsetMarker(b,4)),b.style.display=""}},_offsetMarker:function(a,b){var c=parseInt(a.style.marginTop,10)-b,d=parseInt(a.style.marginLeft,10)-b;a.style.marginTop=c+"px",a.style.marginLeft=d+"px"},_enableLayerEdit:function(a){map.LeafletDrawEditEnabled=!0;var b,c=a.layer||a.target||a,d=c instanceof L.Marker;if(!d||c._icon){if(c instanceof L.Note)return void(a._el.disabled=!1);if(this._backupLayer(c),this._selectedPathOptions)if(b=L.Util.extend({},this._selectedPathOptions),d)this._toggleMarkerHighlight(c);
else if(c instanceof L.GeoJSON)for(l in c._layers){var e=c._layers[l];e.options.previousStyle=e.getStyle(),e.setStyle(b)}else c.options.previousOptions=c.options,c instanceof L.Circle||c instanceof L.Polygon||c instanceof L.Rectangle||(b.fill=!1),c.setStyle(b);if(d)c.dragging.enable(),c.on("dragend",this._onMarkerDragEnd);else if(c instanceof L.GeoJSON&&c._layers)for(l in c._layers)c._layers[l].editing.enable();else c.editing.enable()}},_disableLayerEdit:function(a){var b=a.layer||a.target||a;if(b.edited=!1,b instanceof L.Note)return void(a._el.disabled=!0);if(this._selectedPathOptions)if(b instanceof L.Marker)this._toggleMarkerHighlight(b);else if(b instanceof L.GeoJSON&&b._layers)for(l in b._layers){var c=b._layers[l];c.setStyle(c.options.previousStyle),delete c.options.previousStyle}else b.setStyle(b.options.previousOptions),delete b.options.previousOptions;if(b instanceof L.Marker)b.dragging.disable(),b.off("dragend",this._onMarkerDragEnd,this);else if(b instanceof L.GeoJSON&&b._layers)for(l in b._layers)b._layers[l].editing.disable();else b.editing.disable()},_onMarkerDragEnd:function(a){var b=a.target;b.edited=!0},_onMouseMove:function(a){this._tooltip.updatePosition(a.latlng)},_hasAvailableLayers:function(){return 0!==this._featureGroup.getLayers().length}}),L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},includes:L.Mixin.Events,initialize:function(a,b){if(L.Handler.prototype.initialize.call(this,a),L.Util.setOptions(this,b),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this),this.fire("enabled",{handler:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),this.fire("disabled",{handler:this.type}))},addHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.layerGroup,this._tooltip=new L.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(a){this._deletableLayers.addLayer(a)},this)},save:function(){this._map.fire("draw:deleted",{layers:this._deletedLayers});try{this._svgparent.style.zIndex=""}catch(a){}},_enableLayerDelete:function(a){var b=a.layer||a.target||a;a._note&&this._hideNote(a),b.on("click",this._removeLayer,this)},_hideNote:function(a){a._note._el.style.opacity=0,a._note._el.style.zIndex=0,this._svgparent=a._path.parentNode.parentNode,this._svgparent.style.zIndex=1},_unhideNote:function(a){a._note._el.style.opacity=1,a._note._el.style.zIndex=1,a._path.parentNode.parentNode.style.zIndex=""},_disableLayerDelete:function(a){var b=a.layer||a.target||a;a._note&&(this._unhideNote(a),this._deletedLayers.removeLayer(a._note)),b.off("click",this._removeLayer,this),this._deletedLayers.removeLayer(b)},_removeLayer:function(a){a.target._note&&(this._deletableLayers.removeLayer(a.target._note),this._deletedLayers.addLayer(a.target._note));var b=a.layer||a.target||a;this._deletableLayers.removeLayer(b),this._deletedLayers.addLayer(b)},_removeAllLayers:function(){var a=Wu.app.MapPane._drawControlLayers;for(layer in map.myDrawnItems._layers)a._deletableLayers.removeLayer(map.myDrawnItems._layers[layer]),a._deletedLayers.addLayer(map.myDrawnItems._layers[layer])},_onMouseMove:function(a){this._tooltip.updatePosition(a.latlng)}}),L.Draw.Feature.prototype.enable=function(){map.LeafletDrawEditEnabled=!0,this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire("draw:drawstart",{layerType:this.type}))},L.Draw.Feature.prototype.disable=function(){this._enabled&&(L.Handler.prototype.disable.call(this),this.fire("disabled",{handler:this.type}),this._map.fire("draw:drawstop",{layerType:this.type}))},L.Toolbar.prototype.getModeHandlers=function(a){var b=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(a,{featureGroup:b,selectedPathOptions:this.options.edit.selectedPathOptions}),title:L.drawLocal.edit.toolbar.buttons.edit},{enabled:this.options.remove,handler:new L.EditToolbar.Delete(a,{featureGroup:b}),title:L.drawLocal.edit.toolbar.buttons.remove},{enabled:!0,handler:new L.EditToolbar.Style(a,{featureGroup:b,selectedPathOptions:this.options.edit.selectedPathOptions}),title:"Style"}]},L.Toolbar.prototype.editStyle=function(){},L.EditToolbar.Style=L.Handler.extend({initialize:function(a){L.Handler.prototype.initialize.call(this,a)},enable:function(){},disable:function(){}}),L.Path.include({getStyle:function(){return this._renderer?this._renderer._getStyle(this):this._getStyle(this)},_getStyle:function(a){var b=a._path,c={};return c.color=b.getAttribute("stroke"),c.opacity=parseFloat(b.getAttribute("stroke-opacity")),c.strokeWidth=parseFloat(b.getAttribute("stroke-width")),c.lineCap=b.getAttribute("stroke-linecap"),c.lineJoin=b.getAttribute("stroke-linejoin"),c.dashArray=b.getAttribute("stroke-dasharray"),c.dashOffset=b.getAttribute("stroke-dashoffset"),c.fill=!0,c.fillColor=b.getAttribute("fill"),c.fillOpacity=parseFloat(b.getAttribute("fill-opacity")),c.fillRule=b.getAttribute("fill-rule"),c.pointerEvents=b.getAttribute("pointer-events"),c}}),L.Map.include({reframe:function(){return this._loaded?(this._sizeChanged=!0,void this.fire("moveend")):this}}),L.Control.StyleEditor=L.Control.extend({options:{position:"topleft",enabled:!1,colorRamp:["#1abc9c","#2ecc71","#3498db","#9b59b6","#34495e","#16a085","#27ae60","#2980b9","#8e44ad","#2c3e50","#f1c40f","#e67e22","#e74c3c","#ecf0f1","#95a5a6","#f39c12","#d35400","#c0392b","#bdc3c7","#7f8c8d"],markerApi:"http://api.tiles.mapbox.com/v3/marker/",markers:["circle-stroked","circle","square-stroked","square","triangle-stroked","triangle","star-stroked","star","cross","marker-stroked","marker","religious-jewish","religious-christian","religious-muslim","cemetery","rocket","airport","heliport","rail","rail-metro","rail-light","bus","fuel","parking","parking-garage","airfield","roadblock","ferry","harbor","bicycle","park","park2","museum","lodging","monument","zoo","garden","campsite","theatre","art-gallery","pitch","soccer","america-football","tennis","basketball","baseball","golf","swimming","cricket","skiing","school","college","library","post","fire-station","town-hall","police","prison","embassy","beer","restaurant","cafe","shop","fast-food","bar","bank","grocery","cinema","pharmacy","hospital","danger","industrial","warehouse","commercial","building","place-of-worship","alcohol-shop","logging","oil-well","slaughterhouse","dam","water","wetland","disability","telephone","emergency-telephone","toilets","waste-basket","music","land-use","city","town","village","farm","bakery","dog-park","lighthouse","clothing-store","polling-place","playground","entrance","heart","london-underground","minefield","rail-underground","rail-above","camera","laundry","car","suitcase","hairdresser","chemist","mobilephone","scooter"],editlayers:[],openOnLeafletDraw:!1,showTooltip:!0},onAdd:function(a){return this.options.map=a,this.createUi()},onRemove:function(){L.DomEvent.off(this.options.controlDiv,"click",this.clickHandler,this),L.DomEvent.off(this.options.styleEditorDiv,"mouseenter",this.disableLeafletActions,this),L.DomEvent.off(this.options.styleEditorDiv,"mouseleave",this.enableLeafletActions,this),this.disable(),L.Control.Draw&&this.options.openOnLeafletDraw&&this.options.map.off("draw:created",function(a){this.initChangeStyle({target:a.layer})},this)},createUi:function(){var a=this.options.controlDiv=L.DomUtil.create("div","leaflet-control-styleeditor"),b=this.options.controlUI=L.DomUtil.create("div","leaflet-control-styleeditor-interior",a);b.title="Style Editor";var c=this.options.styleEditorDiv=L.DomUtil.create("div","leaflet-styleeditor",this.options.map._container);return this.options.styleEditorHeader=L.DomUtil.create("div","leaflet-styleeditor-header",c),this.options.styleEditorUi=L.DomUtil.create("div","leaflet-styleeditor-interior",c),this.addDomEvents(),this.addLeafletDrawEvents(),this.addButtons(),a},addDomEvents:function(){L.DomEvent.on(this.options.controlDiv,"click",this.clickHandler,this),L.DomEvent.on(this.options.styleEditorDiv,"mouseenter",this.disableLeafletActions,this),L.DomEvent.on(this.options.styleEditorDiv,"mouseleave",this.enableLeafletActions,this)},addLeafletDrawEvents:function(){L.Control.Draw&&this.options.openOnLeafletDraw&&this.options.map.on("draw:created",function(a){this.initChangeStyle({target:a.layer})},this)},addButtons:function(){var a=L.DomUtil.create("button","leaflet-styleeditor-button styleeditor-closeBtn",this.options.styleEditorHeader),b=this.options.sizeToggleBtn=L.DomUtil.create("button","leaflet-styleeditor-button styleeditor-inBtn",this.options.styleEditorHeader);L.DomEvent.addListener(a,"click",this.hideEditor,this),L.DomEvent.addListener(b,"click",this.toggleEditorSize,this)},clickHandler:function(){this.options.enabled=!this.options.enabled,this.options.enabled?this.enable():(L.DomUtil.removeClass(this.options.controlUI,"enabled"),this.disable())},disableLeafletActions:function(){this.options.map.dragging.disable(),this.options.map.touchZoom.disable(),this.options.map.doubleClickZoom.disable(),this.options.map.scrollWheelZoom.disable(),this.options.map.boxZoom.disable(),this.options.map.keyboard.disable()},enableLeafletActions:function(){this.options.map.dragging.enable(),this.options.map.touchZoom.enable(),this.options.map.doubleClickZoom.enable(),this.options.map.scrollWheelZoom.enable(),this.options.map.boxZoom.enable(),this.options.map.keyboard.enable()},enable:function(){L.DomUtil.addClass(this.options.controlUI,"enabled"),this.options.map.eachLayer(this.addEditClickEvents,this),this.createMouseTooltip()},disable:function(){this.options.editlayers.forEach(this.removeEditClickEvents,this),this.options.editlayers=[],this.hideEditor(),this.removeMouseTooltip()},addEditClickEvents:function(a){if(a._latlng||a._latlngs){var b=a.on("click",this.initChangeStyle,this);this.options.editlayers.push(b)}},removeEditClickEvents:function(a){a.off("click",this.initChangeStyle,this)},hideEditor:function(){L.DomUtil.removeClass(this.options.styleEditorDiv,"editor-enabled")},toggleEditorSize:function(){L.DomUtil.hasClass(this.options.styleEditorDiv,"leaflet-styleeditor-full")?(L.DomUtil.removeClass(this.options.styleEditorDiv,"leaflet-styleeditor-full"),L.DomUtil.removeClass(this.options.styleEditorUi,"leaflet-styleeditor-full"),L.DomUtil.removeClass(this.options.sizeToggleBtn,"styleeditor-outBtn"),L.DomUtil.addClass(this.options.sizeToggleBtn,"styleeditor-inBtn")):(L.DomUtil.addClass(this.options.styleEditorDiv,"leaflet-styleeditor-full"),L.DomUtil.addClass(this.options.styleEditorUi,"leaflet-styleeditor-full"),L.DomUtil.removeClass(this.options.sizeToggleBtn,"styleeditor-inBtn"),L.DomUtil.addClass(this.options.sizeToggleBtn,"styleeditor-outBtn"))},showEditor:function(){var a=this.options.styleEditorDiv;L.DomUtil.hasClass(a,"editor-enabled")||L.DomUtil.addClass(a,"editor-enabled")},initChangeStyle:function(a){this.options.currentElement=a,this.showEditor(),this.removeMouseTooltip();var b=a.target;b instanceof L.Marker?this.createMarkerForm(b):this.createGeometryForm(b)},createGeometryForm:function(){var a=new L.StyleForms({colorRamp:this.options.colorRamp,styleEditorUi:this.options.styleEditorUi,currentElement:this.options.currentElement});a.createGeometryForm()},createMarkerForm:function(){var a=new L.StyleForms({colorRamp:this.options.colorRamp,styleEditorUi:this.options.styleEditorUi,currentElement:this.options.currentElement,markerApi:this.options.markerApi,markers:this.options.markers});a.createMarkerForm()},createMouseTooltip:function(){if(this.options.showTooltip){var a=this.options.mouseTooltip=L.DomUtil.create("div","leaflet-styleeditor-mouseTooltip",document.body);a.innerHTML="Click on the element you want to style",L.DomEvent.addListener(window,"mousemove",this.moveMouseTooltip,this)}},removeMouseTooltip:function(){L.DomEvent.removeListener(window,"mousemove",this.moveMouseTooltip),this.options.mouseTooltip&&this.options.mouseTooltip.parentNode&&this.options.mouseTooltip.parentNode.removeChild(this.options.mouseTooltip)},moveMouseTooltip:function(a){var b=a.clientX,c=a.clientY;this.options.mouseTooltip.style.top=c+15+"px",this.options.mouseTooltip.style.left=b+"px"}}),L.control.styleEditor=function(a){return new L.Control.StyleEditor(a)},L.StyleForms=L.Class.extend({options:{currentMarkerStyle:{size:"m",color:"48a"}},initialize:function(a){L.setOptions(this,a)},clearForm:function(){this.options.styleEditorUi.innerHTML=""},createGeometryForm:function(){this.clearForm(),this.createColor(),this.createOpacity(),this.createStroke(),this.options.currentElement.target instanceof L.Polygon&&(this.createFillColor(),this.createFillOpacity())},createMarkerForm:function(){this.clearForm(),this.createIconUrl(),this.createMarkerColor(),this.createMarkerSize()},setNewMarker:function(){var a=this.options.currentMarkerStyle;if(a.size&&a.icon&&a.color){var b;switch(a.size){case"s":b=[20,50];break;case"m":b=[30,70];break;case"l":b=[35,90]}var c=new L.Icon({iconUrl:this.options.markerApi+"pin-"+a.size+"-"+a.icon+"+"+a.color+".png",iconSize:b}),d=this.options.currentElement.target;d.setIcon(c),this.fireChangeEvent(d)}},createIconUrl:function(){var a=L.DomUtil.create("label","leaflet-styleeditor-label",this.options.styleEditorUi);a.innerHTML="Icon:",this.createSelectInput(this.options.styleEditorUi,function(a){var b=a.target.value;this.options.currentMarkerStyle.icon=b,this.setNewMarker()}.bind(this),this.options.markers)},createMarkerColor:function(){var a=L.DomUtil.create("label","leaflet-styleeditor-label",this.options.styleEditorUi);a.innerHTML="Color:",this.createColorPicker(this.options.styleEditorUi,function(a){var b=this.rgbToHex(a.target.style.backgroundColor);this.options.currentMarkerStyle.color=b.replace("#",""),this.setNewMarker()}.bind(this))},createMarkerSize:function(){var a=L.DomUtil.create("label","leaflet-styleeditor-label",this.options.styleEditorUi);a.innerHTML="Size:";var b=L.DomUtil.create("div","leaflet-styleeditor-sizeicon sizeicon-small",this.options.styleEditorUi),c=L.DomUtil.create("div","leaflet-styleeditor-sizeicon sizeicon-medium",this.options.styleEditorUi),d=L.DomUtil.create("div","leaflet-styleeditor-sizeicon sizeicon-large",this.options.styleEditorUi);L.DomEvent.addListener(b,"click",function(){this.options.currentMarkerStyle.size="s",this.setNewMarker()},this),L.DomEvent.addListener(c,"click",function(){this.options.currentMarkerStyle.size="m",this.setNewMarker()},this),L.DomEvent.addListener(d,"click",function(){this.options.currentMarkerStyle.size="l",this.setNewMarker()},this)},createColor:function(){var a=L.DomUtil.create("label","leaflet-styleeditor-label",this.options.styleEditorUi);a.innerHTML="Color:",this.createColorPicker(this.options.styleEditorUi,function(a){var b=this.rgbToHex(a.target.style.backgroundColor);this.setStyle("color",b)}.bind(this))},createStroke:function(){var a=L.DomUtil.create("label","leaflet-styleeditor-label",this.options.styleEditorUi);a.innerHTML="Line Stroke:";var b=L.DomUtil.create("div","leaflet-styleeditor-stroke",this.options.styleEditorUi);b.style.backgroundPosition="0px -75px";var c=L.DomUtil.create("div","leaflet-styleeditor-stroke",this.options.styleEditorUi);c.style.backgroundPosition="0px -95px";var d=L.DomUtil.create("div","leaflet-styleeditor-stroke",this.options.styleEditorUi);d.style.backgroundPosition="0px -115px",L.DomUtil.create("br","bla",this.options.styleEditorUi),L.DomEvent.addListener(b,"click",function(){this.setStyle("dashArray","1")},this),L.DomEvent.addListener(c,"click",function(){this.setStyle("dashArray","10,10")},this),L.DomEvent.addListener(d,"click",function(){this.setStyle("dashArray","15, 10, 1, 10")},this)},createOpacity:function(){var a=L.DomUtil.create("label","leaflet-styleeditor-label",this.options.styleEditorUi);a.innerHTML="Opacity:",this.createNumberInput(this.options.styleEditorUi,function(a){var b=a.target.value;this.setStyle("opacity",b)}.bind(this),this.options.currentElement.target.options.opacity,0,1,.1)},createFillColor:function(){var a=L.DomUtil.create("label","leaflet-styleeditor-label",this.options.styleEditorUi);a.innerHTML="Fill Color:",this.createColorPicker(this.options.styleEditorUi,function(a){var b=this.rgbToHex(a.target.style.backgroundColor);this.setStyle("fillColor",b)}.bind(this))},createFillOpacity:function(){var a=L.DomUtil.create("label","leaflet-styleeditor-label",this.options.styleEditorUi);a.innerHTML="Fill Opacity:",this.createNumberInput(this.options.styleEditorUi,function(a){var b=a.target.value;this.setStyle("fillOpacity",b)}.bind(this),this.options.currentElement.target.options.fillOpacity,0,1,.1)},createColorPicker:function(a,b){var c=L.DomUtil.create("div","leaflet-styleeditor-colorpicker",a);return this.options.colorRamp.forEach(function(a){var d=L.DomUtil.create("div","leaflet-styleeditor-color",c);d.style.backgroundColor=a,L.DomEvent.addListener(d,"click",b,this)},this),L.DomUtil.create("br","",a),L.DomUtil.create("br","",a),c},createNumberInput:function(a,b,c,d,e,f){var g=L.DomUtil.create("input","leaflet-styleeditor-input",a);return g.setAttribute("type","number"),g.setAttribute("value",c),g.setAttribute("min",d),g.setAttribute("max",e),g.setAttribute("step",f),L.DomEvent.addListener(g,"change",b,this),L.DomEvent.addListener(g,"keyup",b,this),L.DomUtil.create("br","",a),L.DomUtil.create("br","",a),g},createSelectInput:function(a,b,c){var d=L.DomUtil.create("select","leaflet-styleeditor-select",a);return c.forEach(function(a){var b=L.DomUtil.create("option","leaflet-styleeditor-option",d);b.setAttribute("value",a),b.innerHTML=a},this),L.DomEvent.addListener(d,"change",b,this),d},setStyle:function(a,b){var c={};c[a]=b;var d=this.options.currentElement.target;d.setStyle(c),this.fireChangeEvent(d)},fireChangeEvent:function(a){this.options.currentElement.target._map.fireEvent("styleeditor:changed",a)},componentToHex:function(a){var b=a.toString(16);return 1===b.length?"0"+b:b},rgbToHex:function(a){return a=a.substring(4).replace(")","").split(","),"#"+this.componentToHex(parseInt(a[0],10))+this.componentToHex(parseInt(a[1],10))+this.componentToHex(parseInt(a[2],10))}}),!function(){function a(b){var c=a.modules[b];if(!c)throw new Error('failed to require "'+b+'"');return"exports"in c||"function"!=typeof c.definition||(c.client=c.component=!0,c.definition.call(this,c.exports={},c),delete c.definition),c.exports}a.modules={},a.register=function(b,c){a.modules[b]={definition:c}},a.define=function(b,c){a.modules[b]={exports:c}},a.register("component~emitter@1.1.2",function(a,b){function c(a){return a?d(a):void 0}function d(a){for(var b in c.prototype)a[b]=c.prototype[b];return a}b.exports=c,c.prototype.on=c.prototype.addEventListener=function(a,b){return this._callbacks=this._callbacks||{},(this._callbacks[a]=this._callbacks[a]||[]).push(b),this},c.prototype.once=function(a,b){function c(){d.off(a,c),b.apply(this,arguments)}var d=this;return this._callbacks=this._callbacks||{},c.fn=b,this.on(a,c),this},c.prototype.off=c.prototype.removeListener=c.prototype.removeAllListeners=c.prototype.removeEventListener=function(a,b){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var c=this._callbacks[a];if(!c)return this;if(1==arguments.length)return delete this._callbacks[a],this;for(var d,e=0;e<c.length;e++)if(d=c[e],d===b||d.fn===b){c.splice(e,1);break}return this},c.prototype.emit=function(a){this._callbacks=this._callbacks||{};var b=[].slice.call(arguments,1),c=this._callbacks[a];if(c){c=c.slice(0);for(var d=0,e=c.length;e>d;++d)c[d].apply(this,b)}return this},c.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks[a]||[]},c.prototype.hasListeners=function(a){return!!this.listeners(a).length}}),a.register("dropzone",function(b,c){c.exports=a("dropzone/lib/dropzone.js")}),a.register("dropzone/lib/dropzone.js",function(b,c){(function(){var b,d,e,f,g,h,i,j,k={}.hasOwnProperty,l=function(a,b){function c(){this.constructor=a}for(var d in b)k.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},m=[].slice;d="undefined"!=typeof Emitter&&null!==Emitter?Emitter:a("component~emitter@1.1.2"),i=function(){},b=function(a){function b(a,d){var e,f,g;if(this.element=a,this.version=b.version,this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,""),this.clickableElements=[],this.listeners=[],this.files=[],"string"==typeof this.element&&(this.element=document.querySelector(this.element)),!this.element||null==this.element.nodeType)throw new Error("Invalid dropzone element.");if(this.element.dropzone)throw new Error("Dropzone already attached.");if(b.instances.push(this),this.element.dropzone=this,e=null!=(g=b.optionsForElement(this.element))?g:{},this.options=c({},this.defaultOptions,e,null!=d?d:{}),this.options.forceFallback||!b.isBrowserSupported())return this.options.fallback.call(this);if(null==this.options.url&&(this.options.url=this.element.getAttribute("action")),!this.options.url)throw new Error("No URL provided.");if(this.options.acceptedFiles&&this.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");this.options.acceptedMimeTypes&&(this.options.acceptedFiles=this.options.acceptedMimeTypes,delete this.options.acceptedMimeTypes),this.options.method=this.options.method.toUpperCase(),(f=this.getExistingFallback())&&f.parentNode&&f.parentNode.removeChild(f),this.previewsContainer=this.options.previewsContainer?b.getElement(this.options.previewsContainer,"previewsContainer"):this.element,this.options.clickable&&(this.clickableElements=this.options.clickable===!0?[this.element]:b.getElements(this.options.clickable,"clickable")),this.init()}var c;return l(b,a),b.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached"],b.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,parallelUploads:2,uploadMultiple:!1,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:100,thumbnailHeight:100,maxFiles:null,params:{},clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,addRemoveLinks:!1,previewsContainer:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",accept:function(a,b){return b()},init:function(){return i},forceFallback:!1,fallback:function(){var a,c,d,e,f,g;for(this.element.className=""+this.element.className+" dz-browser-not-supported",g=this.element.getElementsByTagName("div"),e=0,f=g.length;f>e;e++)a=g[e],/(^| )dz-message($| )/.test(a.className)&&(c=a,a.className="dz-message");return c||(c=b.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(c)),d=c.getElementsByTagName("span")[0],d&&(d.textContent=this.options.dictFallbackMessage),this.element.appendChild(this.getFallbackForm())},resize:function(a){var b,c,d;return b={srcX:0,srcY:0,srcWidth:a.width,srcHeight:a.height},c=a.width/a.height,d=this.options.thumbnailWidth/this.options.thumbnailHeight,a.height<this.options.thumbnailHeight||a.width<this.options.thumbnailWidth?(b.trgHeight=b.srcHeight,b.trgWidth=b.srcWidth):c>d?(b.srcHeight=a.height,b.srcWidth=b.srcHeight*d):(b.srcWidth=a.width,b.srcHeight=b.srcWidth/d),b.srcX=(a.width-b.srcWidth)/2,b.srcY=(a.height-b.srcHeight)/2,b},drop:function(){return this.element.classList.remove("dz-drag-hover")},dragstart:i,dragend:function(){return this.element.classList.remove("dz-drag-hover")},dragenter:function(){return this.element.classList.add("dz-drag-hover")},dragover:function(){return this.element.classList.add("dz-drag-hover")},dragleave:function(){return this.element.classList.remove("dz-drag-hover")},paste:i,reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(a){var c,d,e,f,g,h,i,j,k,l,m,n,o;for(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),a.previewElement=b.createElement(this.options.previewTemplate.trim()),a.previewTemplate=a.previewElement,this.previewsContainer.appendChild(a.previewElement),l=a.previewElement.querySelectorAll("[data-dz-name]"),f=0,i=l.length;i>f;f++)c=l[f],c.textContent=a.name;for(m=a.previewElement.querySelectorAll("[data-dz-size]"),g=0,j=m.length;j>g;g++)c=m[g],c.innerHTML=this.filesize(a.size);for(this.options.addRemoveLinks&&(a._removeLink=b.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>"),a.previewElement.appendChild(a._removeLink)),d=function(c){return function(d){return d.preventDefault(),d.stopPropagation(),a.status===b.UPLOADING?b.confirm(c.options.dictCancelUploadConfirmation,function(){return c.removeFile(a)}):c.options.dictRemoveFileConfirmation?b.confirm(c.options.dictRemoveFileConfirmation,function(){return c.removeFile(a)}):c.removeFile(a)}}(this),n=a.previewElement.querySelectorAll("[data-dz-remove]"),o=[],h=0,k=n.length;k>h;h++)e=n[h],o.push(e.addEventListener("click",d));return o},removedfile:function(a){var b;return null!=(b=a.previewElement)&&b.parentNode.removeChild(a.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(a,b){var c,d,e,f,g;for(a.previewElement.classList.remove("dz-file-preview"),a.previewElement.classList.add("dz-image-preview"),f=a.previewElement.querySelectorAll("[data-dz-thumbnail]"),g=[],d=0,e=f.length;e>d;d++)c=f[d],c.alt=a.name,g.push(c.src=b);return g},error:function(a,b){var c,d,e,f,g;for(a.previewElement.classList.add("dz-error"),"String"!=typeof b&&b.error&&(b=b.error),f=a.previewElement.querySelectorAll("[data-dz-errormessage]"),g=[],d=0,e=f.length;e>d;d++)c=f[d],g.push(c.textContent=b);return g},errormultiple:i,processing:function(a){return a.previewElement.classList.add("dz-processing"),a._removeLink?a._removeLink.textContent=this.options.dictCancelUpload:void 0},processingmultiple:i,uploadprogress:function(a,b){var c,d,e,f,g;for(f=a.previewElement.querySelectorAll("[data-dz-uploadprogress]"),g=[],d=0,e=f.length;e>d;d++)c=f[d],g.push(c.style.width=""+b+"%");return g},totaluploadprogress:i,sending:i,sendingmultiple:i,success:function(a){return a.previewElement.classList.add("dz-success")},successmultiple:i,canceled:function(a){return this.emit("error",a,"Upload canceled.")},canceledmultiple:i,complete:function(a){return a._removeLink?a._removeLink.textContent=this.options.dictRemoveFile:void 0},completemultiple:i,maxfilesexceeded:i,maxfilesreached:i,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-details">\n    <div class="dz-filename"><span data-dz-name></span></div>\n    <div class="dz-size" data-dz-size></div>\n    <img data-dz-thumbnail />\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-success-mark"><span>✔</span></div>\n  <div class="dz-error-mark"><span>✘</span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n</div>'},c=function(){var a,b,c,d,e,f,g;for(d=arguments[0],c=2<=arguments.length?m.call(arguments,1):[],f=0,g=c.length;g>f;f++){b=c[f];for(a in b)e=b[a],d[a]=e}return d},b.prototype.getAcceptedFiles=function(){var a,b,c,d,e;for(d=this.files,e=[],b=0,c=d.length;c>b;b++)a=d[b],a.accepted&&e.push(a);return e},b.prototype.getRejectedFiles=function(){var a,b,c,d,e;for(d=this.files,e=[],b=0,c=d.length;c>b;b++)a=d[b],a.accepted||e.push(a);return e},b.prototype.getQueuedFiles=function(){var a,c,d,e,f;for(e=this.files,f=[],c=0,d=e.length;d>c;c++)a=e[c],a.status===b.QUEUED&&f.push(a);return f},b.prototype.getUploadingFiles=function(){var a,c,d,e,f;for(e=this.files,f=[],c=0,d=e.length;d>c;c++)a=e[c],a.status===b.UPLOADING&&f.push(a);return f},b.prototype.init=function(){var a,c,d,e,f,g,h;for("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(b.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElements.length&&(d=function(a){return function(){return a.hiddenFileInput&&document.body.removeChild(a.hiddenFileInput),a.hiddenFileInput=document.createElement("input"),a.hiddenFileInput.setAttribute("type","file"),(null==a.options.maxFiles||a.options.maxFiles>1)&&a.hiddenFileInput.setAttribute("multiple","multiple"),a.hiddenFileInput.className="dz-hidden-input",null!=a.options.acceptedFiles&&a.hiddenFileInput.setAttribute("accept",a.options.acceptedFiles),a.hiddenFileInput.style.visibility="hidden",a.hiddenFileInput.style.position="absolute",a.hiddenFileInput.style.top="0",a.hiddenFileInput.style.left="0",a.hiddenFileInput.style.height="0",a.hiddenFileInput.style.width="0",document.body.appendChild(a.hiddenFileInput),a.hiddenFileInput.addEventListener("change",function(){var b,c,e,f;if(c=a.hiddenFileInput.files,c.length)for(e=0,f=c.length;f>e;e++)b=c[e],a.addFile(b);return d()})}}(this))(),this.URL=null!=(g=window.URL)?g:window.webkitURL,h=this.events,e=0,f=h.length;f>e;e++)a=h[e],this.on(a,this.options[a]);return this.on("uploadprogress",function(a){return function(){return a.updateTotalUploadProgress()}}(this)),this.on("removedfile",function(a){return function(){return a.updateTotalUploadProgress()}}(this)),this.on("canceled",function(a){return function(b){return a.emit("complete",b)}}(this)),this.on("complete",function(a){return function(){return 0===a.getUploadingFiles().length&&0===a.getQueuedFiles().length?setTimeout(function(){return a.emit("queuecomplete")},0):void 0}}(this)),c=function(a){return a.stopPropagation(),a.preventDefault?a.preventDefault():a.returnValue=!1},this.listeners=[{element:this.element,events:{dragstart:function(a){return function(b){return a.emit("dragstart",b)}}(this),dragenter:function(a){return function(b){return c(b),a.emit("dragenter",b)}}(this),dragover:function(a){return function(b){var d;try{d=b.dataTransfer.effectAllowed}catch(e){}return b.dataTransfer.dropEffect="move"===d||"linkMove"===d?"move":"copy",c(b),a.emit("dragover",b)}}(this),dragleave:function(a){return function(b){return a.emit("dragleave",b)}}(this),drop:function(a){return function(b){return c(b),a.drop(b)}}(this),dragend:function(a){return function(b){return a.emit("dragend",b)
}}(this)}}],this.clickableElements.forEach(function(a){return function(c){return a.listeners.push({element:c,events:{click:function(d){return c!==a.element||d.target===a.element||b.elementInside(d.target,a.element.querySelector(".dz-message"))?a.hiddenFileInput.click():void 0}}})}}(this)),this.enable(),this.options.init.call(this)},b.prototype.destroy=function(){var a;return this.disable(),this.removeAllFiles(!0),(null!=(a=this.hiddenFileInput)?a.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,b.instances.splice(b.instances.indexOf(this),1)},b.prototype.updateTotalUploadProgress=function(){var a,b,c,d,e,f,g,h;if(d=0,c=0,a=this.getAcceptedFiles(),a.length){for(h=this.getAcceptedFiles(),f=0,g=h.length;g>f;f++)b=h[f],d+=b.upload.bytesSent,c+=b.upload.total;e=100*d/c}else e=100;return this.emit("totaluploadprogress",e,c,d)},b.prototype.getFallbackForm=function(){var a,c,d,e;return(a=this.getExistingFallback())?a:(d='<div class="dz-fallback">',this.options.dictFallbackText&&(d+="<p>"+this.options.dictFallbackText+"</p>"),d+='<input type="file" name="'+this.options.paramName+(this.options.uploadMultiple?"[]":"")+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>',c=b.createElement(d),"FORM"!==this.element.tagName?(e=b.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>'),e.appendChild(c)):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=e?e:c)},b.prototype.getExistingFallback=function(){var a,b,c,d,e,f;for(b=function(a){var b,c,d;for(c=0,d=a.length;d>c;c++)if(b=a[c],/(^| )fallback($| )/.test(b.className))return b},f=["div","form"],d=0,e=f.length;e>d;d++)if(c=f[d],a=b(this.element.getElementsByTagName(c)))return a},b.prototype.setupEventListeners=function(){var a,b,c,d,e,f,g;for(f=this.listeners,g=[],d=0,e=f.length;e>d;d++)a=f[d],g.push(function(){var d,e;d=a.events,e=[];for(b in d)c=d[b],e.push(a.element.addEventListener(b,c,!1));return e}());return g},b.prototype.removeEventListeners=function(){var a,b,c,d,e,f,g;for(f=this.listeners,g=[],d=0,e=f.length;e>d;d++)a=f[d],g.push(function(){var d,e;d=a.events,e=[];for(b in d)c=d[b],e.push(a.element.removeEventListener(b,c,!1));return e}());return g},b.prototype.disable=function(){var a,b,c,d,e;for(this.clickableElements.forEach(function(a){return a.classList.remove("dz-clickable")}),this.removeEventListeners(),d=this.files,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(this.cancelUpload(a));return e},b.prototype.enable=function(){return this.clickableElements.forEach(function(a){return a.classList.add("dz-clickable")}),this.setupEventListeners()},b.prototype.filesize=function(a){var b;return a>=109951162777.6?(a/=109951162777.6,b="TiB"):a>=107374182.4?(a/=107374182.4,b="GiB"):a>=104857.6?(a/=104857.6,b="MiB"):a>=102.4?(a/=102.4,b="KiB"):(a=10*a,b="b"),"<strong>"+Math.round(a)/10+"</strong> "+b},b.prototype._updateMaxFilesReachedClass=function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")},b.prototype.drop=function(a){var b,c;a.dataTransfer&&(this.emit("drop",a),b=a.dataTransfer.files,b.length&&(c=a.dataTransfer.items,c&&c.length&&null!=c[0].webkitGetAsEntry?this._addFilesFromItems(c):this.handleFiles(b)))},b.prototype.paste=function(a){var b,c;return null!=(null!=a&&null!=(c=a.clipboardData)?c.items:void 0)?(this.emit("paste",a),b=a.clipboardData.items,b.length?this._addFilesFromItems(b):void 0):void 0},b.prototype.handleFiles=function(a){var b,c,d,e;for(e=[],c=0,d=a.length;d>c;c++)b=a[c],e.push(this.addFile(b));return e},b.prototype._addFilesFromItems=function(a){var b,c,d,e,f;for(f=[],d=0,e=a.length;e>d;d++)c=a[d],f.push(null!=c.webkitGetAsEntry&&(b=c.webkitGetAsEntry())?b.isFile?this.addFile(c.getAsFile()):b.isDirectory?this._addFilesFromDirectory(b,b.name):void 0:null!=c.getAsFile&&(null==c.kind||"file"===c.kind)?this.addFile(c.getAsFile()):void 0);return f},b.prototype._addFilesFromDirectory=function(a,b){var c,d;return c=a.createReader(),d=function(a){return function(c){var d,e,f;for(e=0,f=c.length;f>e;e++)d=c[e],d.isFile?d.file(function(c){return a.options.ignoreHiddenFiles&&"."===c.name.substring(0,1)?void 0:(c.fullPath=""+b+"/"+c.name,a.addFile(c))}):d.isDirectory&&a._addFilesFromDirectory(d,""+b+"/"+d.name)}}(this),c.readEntries(d,function(a){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?void 0:void 0})},b.prototype.accept=function(a,c){return a.size>1024*this.options.maxFilesize*1024?c(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(a.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):b.isValidFile(a,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(c(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",a)):this.options.accept.call(this,a,c):c(this.options.dictInvalidFileType)},b.prototype.addFile=function(a){return a.upload={progress:0,total:a.size,bytesSent:0},this.files.push(a),a.status=b.ADDED,this.emit("addedfile",a),this._enqueueThumbnail(a),this.accept(a,function(b){return function(c){return c?(a.accepted=!1,b._errorProcessing([a],c)):b.enqueueFile(a),b._updateMaxFilesReachedClass()}}(this))},b.prototype.enqueueFiles=function(a){var b,c,d;for(c=0,d=a.length;d>c;c++)b=a[c],this.enqueueFile(b);return null},b.prototype.enqueueFile=function(a){if(a.accepted=!0,a.status!==b.ADDED)throw new Error("This file can't be queued because it has already been processed or was rejected.");return a.status=b.QUEUED,this.options.autoProcessQueue?setTimeout(function(a){return function(){return a.processQueue()}}(this),0):void 0},b.prototype._thumbnailQueue=[],b.prototype._processingThumbnail=!1,b.prototype._enqueueThumbnail=function(a){return this.options.createImageThumbnails&&a.type.match(/image.*/)&&a.size<=1024*this.options.maxThumbnailFilesize*1024?(this._thumbnailQueue.push(a),setTimeout(function(a){return function(){return a._processThumbnailQueue()}}(this),0)):void 0},b.prototype._processThumbnailQueue=function(){return this._processingThumbnail||0===this._thumbnailQueue.length?void 0:(this._processingThumbnail=!0,this.createThumbnail(this._thumbnailQueue.shift(),function(a){return function(){return a._processingThumbnail=!1,a._processThumbnailQueue()}}(this)))},b.prototype.removeFile=function(a){return a.status===b.UPLOADING&&this.cancelUpload(a),this.files=j(this.files,a),this.emit("removedfile",a),0===this.files.length?this.emit("reset"):void 0},b.prototype.removeAllFiles=function(a){var c,d,e,f;for(null==a&&(a=!1),f=this.files.slice(),d=0,e=f.length;e>d;d++)c=f[d],(c.status!==b.UPLOADING||a)&&this.removeFile(c);return null},b.prototype.createThumbnail=function(a,b){var c;return c=new FileReader,c.onload=function(d){return function(){var e;return e=document.createElement("img"),e.onload=function(){var c,f,g,i,j,k,l,m;return a.width=e.width,a.height=e.height,g=d.options.resize.call(d,a),null==g.trgWidth&&(g.trgWidth=d.options.thumbnailWidth),null==g.trgHeight&&(g.trgHeight=d.options.thumbnailHeight),c=document.createElement("canvas"),f=c.getContext("2d"),c.width=g.trgWidth,c.height=g.trgHeight,h(f,e,null!=(j=g.srcX)?j:0,null!=(k=g.srcY)?k:0,g.srcWidth,g.srcHeight,null!=(l=g.trgX)?l:0,null!=(m=g.trgY)?m:0,g.trgWidth,g.trgHeight),i=c.toDataURL("image/png"),d.emit("thumbnail",a,i),null!=b?b():void 0},e.src=c.result}}(this),c.readAsDataURL(a)},b.prototype.processQueue=function(){var a,b,c,d;if(b=this.options.parallelUploads,c=this.getUploadingFiles().length,a=c,!(c>=b)&&(d=this.getQueuedFiles(),d.length>0)){if(this.options.uploadMultiple)return this.processFiles(d.slice(0,b-c));for(;b>a;){if(!d.length)return;this.processFile(d.shift()),a++}}},b.prototype.processFile=function(a){return this.processFiles([a])},b.prototype.processFiles=function(a){var c,d,e;for(d=0,e=a.length;e>d;d++)c=a[d],c.processing=!0,c.status=b.UPLOADING,this.emit("processing",c);return this.options.uploadMultiple&&this.emit("processingmultiple",a),this.uploadFiles(a)},b.prototype._getFilesWithXhr=function(a){var b,c;return c=function(){var c,d,e,f;for(e=this.files,f=[],c=0,d=e.length;d>c;c++)b=e[c],b.xhr===a&&f.push(b);return f}.call(this)},b.prototype.cancelUpload=function(a){var c,d,e,f,g,h,i;if(a.status===b.UPLOADING){for(d=this._getFilesWithXhr(a.xhr),e=0,g=d.length;g>e;e++)c=d[e],c.status=b.CANCELED;for(a.xhr.abort(),f=0,h=d.length;h>f;f++)c=d[f],this.emit("canceled",c);this.options.uploadMultiple&&this.emit("canceledmultiple",d)}else((i=a.status)===b.ADDED||i===b.QUEUED)&&(a.status=b.CANCELED,this.emit("canceled",a),this.options.uploadMultiple&&this.emit("canceledmultiple",[a]));return this.options.autoProcessQueue?this.processQueue():void 0},b.prototype.uploadFile=function(a){return this.uploadFiles([a])},b.prototype.uploadFiles=function(a){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H;for(s=new XMLHttpRequest,t=0,x=a.length;x>t;t++)d=a[t],d.xhr=s;s.open(this.options.method,this.options.url,!0),s.withCredentials=!!this.options.withCredentials,p=null,f=function(b){return function(){var c,e,f;for(f=[],c=0,e=a.length;e>c;c++)d=a[c],f.push(b._errorProcessing(a,p||b.options.dictResponseError.replace("{{statusCode}}",s.status),s));return f}}(this),q=function(b){return function(c){var e,f,g,h,i,j,k,l,m;if(null!=c)for(f=100*c.loaded/c.total,g=0,j=a.length;j>g;g++)d=a[g],d.upload={progress:f,total:c.total,bytesSent:c.loaded};else{for(e=!0,f=100,h=0,k=a.length;k>h;h++)d=a[h],(100!==d.upload.progress||d.upload.bytesSent!==d.upload.total)&&(e=!1),d.upload.progress=f,d.upload.bytesSent=d.upload.total;if(e)return}for(m=[],i=0,l=a.length;l>i;i++)d=a[i],m.push(b.emit("uploadprogress",d,f,d.upload.bytesSent));return m}}(this),s.onload=function(c){return function(d){var e;if(a[0].status!==b.CANCELED&&4===s.readyState){if(p=s.responseText,s.getResponseHeader("content-type")&&~s.getResponseHeader("content-type").indexOf("application/json"))try{p=JSON.parse(p)}catch(g){d=g,p="Invalid JSON response from server."}return q(),200<=(e=s.status)&&300>e?c._finished(a,p,d):f()}}}(this),s.onerror=function(){return function(){return a[0].status!==b.CANCELED?f():void 0}}(this),o=null!=(D=s.upload)?D:s,o.onprogress=q,i={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"},this.options.headers&&c(i,this.options.headers);for(g in i)h=i[g],s.setRequestHeader(g,h);if(e=new FormData,this.options.params){E=this.options.params;for(m in E)r=E[m],e.append(m,r)}for(u=0,y=a.length;y>u;u++)d=a[u],this.emit("sending",d,s,e);if(this.options.uploadMultiple&&this.emit("sendingmultiple",a,s,e),"FORM"===this.element.tagName)for(F=this.element.querySelectorAll("input, textarea, select, button"),v=0,z=F.length;z>v;v++)if(j=F[v],k=j.getAttribute("name"),l=j.getAttribute("type"),"SELECT"===j.tagName&&j.hasAttribute("multiple"))for(G=j.options,w=0,A=G.length;A>w;w++)n=G[w],n.selected&&e.append(k,n.value);else(!l||"checkbox"!==(H=l.toLowerCase())&&"radio"!==H||j.checked)&&e.append(k,j.value);for(C=0,B=a.length;B>C;C++)d=a[C],e.append(""+this.options.paramName+(this.options.uploadMultiple?"[]":""),d,d.name);return s.send(e)},b.prototype._finished=function(a,c,d){var e,f,g;for(f=0,g=a.length;g>f;f++)e=a[f],e.status=b.SUCCESS,this.emit("success",e,c,d),this.emit("complete",e);return this.options.uploadMultiple&&(this.emit("successmultiple",a,c,d),this.emit("completemultiple",a)),this.options.autoProcessQueue?this.processQueue():void 0},b.prototype._errorProcessing=function(a,c,d){var e,f,g;for(f=0,g=a.length;g>f;f++)e=a[f],e.status=b.ERROR,this.emit("error",e,c,d),this.emit("complete",e);return this.options.uploadMultiple&&(this.emit("errormultiple",a,c,d),this.emit("completemultiple",a)),this.options.autoProcessQueue?this.processQueue():void 0},b}(d),b.version="3.8.5",b.options={},b.optionsForElement=function(a){return a.getAttribute("id")?b.options[e(a.getAttribute("id"))]:void 0},b.instances=[],b.forElement=function(a){if("string"==typeof a&&(a=document.querySelector(a)),null==(null!=a?a.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return a.dropzone},b.autoDiscover=!0,b.discover=function(){var a,c,d,e,f,g;for(document.querySelectorAll?d=document.querySelectorAll(".dropzone"):(d=[],a=function(a){var b,c,e,f;for(f=[],c=0,e=a.length;e>c;c++)b=a[c],f.push(/(^| )dropzone($| )/.test(b.className)?d.push(b):void 0);return f},a(document.getElementsByTagName("div")),a(document.getElementsByTagName("form"))),g=[],e=0,f=d.length;f>e;e++)c=d[e],g.push(b.optionsForElement(c)!==!1?new b(c):void 0);return g},b.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i],b.isBrowserSupported=function(){var a,c,d,e,f;if(a=!0,window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a"))for(f=b.blacklistedBrowsers,d=0,e=f.length;e>d;d++)c=f[d],c.test(navigator.userAgent)&&(a=!1);else a=!1;else a=!1;return a},j=function(a,b){var c,d,e,f;for(f=[],d=0,e=a.length;e>d;d++)c=a[d],c!==b&&f.push(c);return f},e=function(a){return a.replace(/[\-_](\w)/g,function(a){return a.charAt(1).toUpperCase()})},b.createElement=function(a){var b;return b=document.createElement("div"),b.innerHTML=a,b.childNodes[0]},b.elementInside=function(a,b){if(a===b)return!0;for(;a=a.parentNode;)if(a===b)return!0;return!1},b.getElement=function(a,b){var c;if("string"==typeof a?c=document.querySelector(a):null!=a.nodeType&&(c=a),null==c)throw new Error("Invalid `"+b+"` option provided. Please provide a CSS selector or a plain HTML element.");return c},b.getElements=function(a,b){var c,d,e,f,g,h,i,j;if(a instanceof Array){e=[];try{for(f=0,h=a.length;h>f;f++)d=a[f],e.push(this.getElement(d,b))}catch(k){c=k,e=null}}else if("string"==typeof a)for(e=[],j=document.querySelectorAll(a),g=0,i=j.length;i>g;g++)d=j[g],e.push(d);else null!=a.nodeType&&(e=[a]);if(null==e||!e.length)throw new Error("Invalid `"+b+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return e},b.confirm=function(a,b,c){return window.confirm(a)?b():null!=c?c():void 0},b.isValidFile=function(a,b){var c,d,e,f,g;if(!b)return!0;for(b=b.split(","),d=a.type,c=d.replace(/\/.*$/,""),f=0,g=b.length;g>f;f++)if(e=b[f],e=e.trim(),"."===e.charAt(0)){if(-1!==a.name.toLowerCase().indexOf(e.toLowerCase(),a.name.length-e.length))return!0}else if(/\/\*$/.test(e)){if(c===e.replace(/\/.*$/,""))return!0}else if(d===e)return!0;return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(a){return this.each(function(){return new b(this,a)})}),"undefined"!=typeof c&&null!==c?c.exports=b:window.Dropzone=b,b.ADDED="added",b.QUEUED="queued",b.ACCEPTED=b.QUEUED,b.UPLOADING="uploading",b.PROCESSING=b.UPLOADING,b.CANCELED="canceled",b.ERROR="error",b.SUCCESS="success",g=function(a){var b,c,d,e,f,g,h,i,j,k;for(h=a.naturalWidth,g=a.naturalHeight,c=document.createElement("canvas"),c.width=1,c.height=g,d=c.getContext("2d"),d.drawImage(a,0,0),e=d.getImageData(0,0,1,g).data,k=0,f=g,i=g;i>k;)b=e[4*(i-1)+3],0===b?f=i:k=i,i=f+k>>1;return j=i/g,0===j?1:j},h=function(a,b,c,d,e,f,h,i,j,k){var l;return l=g(b),a.drawImage(b,c,d,e,f,h,i,j,k/l)},f=function(a,b){var c,d,e,f,g,h,i,j,k;if(e=!1,k=!0,d=a.document,j=d.documentElement,c=d.addEventListener?"addEventListener":"attachEvent",i=d.addEventListener?"removeEventListener":"detachEvent",h=d.addEventListener?"":"on",f=function(c){return"readystatechange"!==c.type||"complete"===d.readyState?(("load"===c.type?a:d)[i](h+c.type,f,!1),!e&&(e=!0)?b.call(a,c.type||c):void 0):void 0},g=function(){var a;try{j.doScroll("left")}catch(b){return a=b,void setTimeout(g,50)}return f("poll")},"complete"!==d.readyState){if(d.createEventObject&&j.doScroll){try{k=!a.frameElement}catch(l){}k&&g()}return d[c](h+"DOMContentLoaded",f,!1),d[c](h+"readystatechange",f,!1),a[c](h+"load",f,!1)}},b._autoDiscoverFunction=function(){return b.autoDiscover?b.discover():void 0},f(window,b._autoDiscoverFunction)}).call(this)}),"object"==typeof exports?module.exports=a("dropzone"):"function"==typeof define&&define.amd?define([],function(){return a("dropzone")}):this.Dropzone=a("dropzone")}(),function(){var a,b=Object.prototype.toString;Array.isArray=Array.isArray||function(a){return"[object Array]"==b.call(a)};var c,d=String.prototype.trim;if(d)c=function(a){return null==a?"":d.call(a)};else{var e,f;/\S/.test(" ")?(e=/^[\s\xA0]+/,f=/[\s\xA0]+$/):(e=/^\s+/,f=/\s+$/),c=function(a){return null==a?"":a.toString().replace(e,"").replace(f,"")}}var g={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},h={},i=function(){};i.prototype={otag:"{{",ctag:"}}",pragmas:{},buffer:[],pragmas_implemented:{"IMPLICIT-ITERATOR":!0},context:{},render:function(a,b,c,d){if(d||(this.context=b,this.buffer=[]),this.includes("",a)){a=this.render_pragmas(a);var e=this.render_section(a,b,c);if(!1===e&&(e=this.render_tags(a,b,c,d)),d)return e;this.sendLines(e)}else{if(d)return a;this.send(a)}},send:function(a){""!==a&&this.buffer.push(a)},sendLines:function(a){if(a){a=a.split("\n");for(var b=0;b<a.length;b++)this.send(a[b])}},render_pragmas:function(a){if(!this.includes("%",a))return a;var b=this,c=this.getCachedRegex("render_pragmas",function(a,b){return RegExp(a+"%([\\w-]+) ?([\\w]+=[\\w]+)?"+b,"g")});return a.replace(c,function(a,c,d){if(!b.pragmas_implemented[c])throw{message:"This implementation of mustache doesn't understand the '"+c+"' pragma"};return b.pragmas[c]={},d&&(a=d.split("="),b.pragmas[c][a[0]]=a[1]),""})},render_partial:function(a,b,d){if(a=c(a),!d||void 0===d[a])throw{message:"unknown_partial '"+a+"'"};return b&&"object"==typeof b[a]?this.render(d[a],b[a],d,!0):this.render(d[a],b,d,!0)},render_section:function(a,b,c){if(!this.includes("#",a)&&!this.includes("^",a))return!1;var d=this,e=this.getCachedRegex("render_section",function(a,b){return RegExp("^([\\s\\S]*?)"+a+"(\\^|\\#)\\s*(.+)\\s*"+b+"\n*([\\s\\S]*?)"+a+"\\/\\s*\\3\\s*"+b+"\\s*([\\s\\S]*)$","g")});return a.replace(e,function(a,e,f,g,h,i){a=e?d.render_tags(e,b,c,!0):"",i=i?d.render(i,b,c,!0):"";var j;return g=d.find(g,b),"^"===f?j=!g||Array.isArray(g)&&0===g.length?d.render(h,b,c,!0):"":"#"===f&&(j=Array.isArray(g)?d.map(g,function(a){return d.render(h,d.create_context(a),c,!0)}).join(""):d.is_object(g)?d.render(h,d.create_context(g),c,!0):"function"==typeof g?g.call(b,h,function(a){return d.render(a,b,c,!0)}):g?d.render(h,b,c,!0):""),a+j+i})},render_tags:function(a,b,c,d){var e=this,f=function(){return e.getCachedRegex("render_tags",function(a,b){return RegExp(a+"(=|!|>|&|\\{|%)?([^#\\^]+?)\\1?"+b+"+","g")})},h=f(),i=function(a,d,i){switch(d){case"!":return"";case"=":return e.set_delimiters(i),h=f(),"";case">":return e.render_partial(i,b,c);case"{":case"&":return e.find(i,b);default:return a=e.find(i,b),String(a).replace(/&(?!\w+;)|[<>"']/g,function(a){return g[a]||a})}};a=a.split("\n");for(var j=0;j<a.length;j++)a[j]=a[j].replace(h,i,this),d||this.send(a[j]);return d?a.join("\n"):void 0},set_delimiters:function(a){a=a.split(" "),this.otag=this.escape_regex(a[0]),this.ctag=this.escape_regex(a[1])},escape_regex:function(a){return arguments.callee.sRE||(arguments.callee.sRE=RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\)","g")),a.replace(arguments.callee.sRE,"\\$1")},find:function(a,b){a=c(a);var d;if(a.match(/([a-z_]+)\./gi)){var e=this.walk_context(a,b);(!1===e||0===e||e)&&(d=e)}else!1===b[a]||0===b[a]||b[a]?d=b[a]:(!1===this.context[a]||0===this.context[a]||this.context[a])&&(d=this.context[a]);return"function"==typeof d?d.apply(b):void 0!==d?d:""},walk_context:function(a,b){for(var c=a.split("."),d=void 0!=b[c[0]]?b:this.context,e=d[c.shift()];void 0!=e&&0<c.length;)d=e,e=e[c.shift()];return"function"==typeof e?e.apply(d):e},includes:function(a,b){return-1!=b.indexOf(this.otag+a)},create_context:function(a){if(this.is_object(a))return a;var b=".";this.pragmas["IMPLICIT-ITERATOR"]&&(b=this.pragmas["IMPLICIT-ITERATOR"].iterator);var c={};return c[b]=a,c},is_object:function(a){return a&&"object"==typeof a},map:function(a,b){if("function"==typeof a.map)return a.map(b);for(var c=[],d=a.length,e=0;d>e;e++)c.push(b(a[e]));return c},getCachedRegex:function(a,b){var c=h[this.otag];c||(c=h[this.otag]={});var d=c[this.ctag];return d||(d=c[this.ctag]={}),(c=d[a])||(c=d[a]=b(this.otag,this.ctag)),c}},a={name:"mustache.js",version:"0.4.0",to_html:function(a,b,c,d){var e=new i;return d&&(e.send=d),e.render(a,b||{},c),d?void 0:e.buffer.join("\n")}},function(){function b(a){return"".trim?a.trim():a.replace(/^\s+/,"").replace(/\s+$/,"")}var c={VERSION:"0.10.2",templates:{},$:"undefined"!=typeof window?window.jQuery||window.Zepto||null:null,addTemplate:function(d,e){if("object"==typeof d)for(var f in d)this.addTemplate(f,d[f]);else c[d]?void 0:c.templates[d]?void 0:(c.templates[d]=e,c[d]=function(e,f){e=e||{};var g=a.to_html(c.templates[d],e,c.templates);return c.$&&!f?c.$(b(g)):g})},clearAll:function(){for(var a in c.templates)delete c[a];c.templates={}},refresh:function(){c.clearAll(),c.grabTemplates()},grabTemplates:function(){var a,d,e,f=document.getElementsByTagName("script"),g=[];for(a=0,d=f.length;d>a;a++)(e=f[a])&&e.innerHTML&&e.id&&("text/html"===e.type||"text/x-icanhaz"===e.type)&&(c.addTemplate(e.id,b(e.innerHTML)),g.unshift(e));for(a=0,d=g.length;d>a;a++)g[a].parentNode.removeChild(g[a])}};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=c),exports.ich=c):this.ich=c,"undefined"!=typeof document&&(c.$?c.$(function(){c.grabTemplates()}):document.addEventListener("DOMContentLoaded",function(){c.grabTemplates()},!0))}()}(),!function(){function a(b,c,d){var e=a.resolve(b);if(null==e){d=d||b,c=c||"root";var f=new Error('Failed to require "'+d+'" from "'+c+'"');throw f.path=d,f.parent=c,f.require=!0,f}var g=a.modules[e];if(!g._resolving&&!g.exports){var h={};h.exports={},h.client=h.component=!0,g._resolving=!0,g.call(this,h.exports,a.relative(e),h),delete g._resolving,g.exports=h.exports}return g.exports}a.modules={},a.aliases={},a.resolve=function(b){"/"===b.charAt(0)&&(b=b.slice(1));for(var c=[b,b+".js",b+".json",b+"/index.js",b+"/index.json"],d=0;d<c.length;d++){var b=c[d];if(a.modules.hasOwnProperty(b))return b;if(a.aliases.hasOwnProperty(b))return a.aliases[b]}},a.normalize=function(a,b){var c=[];if("."!=b.charAt(0))return b;a=a.split("/"),b=b.split("/");for(var d=0;d<b.length;++d)".."==b[d]?a.pop():"."!=b[d]&&""!=b[d]&&c.push(b[d]);return a.concat(c).join("/")},a.register=function(b,c){a.modules[b]=c},a.alias=function(b,c){if(!a.modules.hasOwnProperty(b))throw new Error('Failed to alias "'+b+'", it does not exist');a.aliases[c]=b},a.relative=function(b){function c(a,b){for(var c=a.length;c--;)if(a[c]===b)return c;return-1}function d(c){var e=d.resolve(c);return a(e,b,c)}var e=a.normalize(b,"..");return d.resolve=function(d){var f=d.charAt(0);if("/"==f)return d.slice(1);if("."==f)return a.normalize(e,d);var g=b.split("/"),h=c(g,"deps")+1;return h||(h=0),d=g.slice(0,h+1).join("/")+"/deps/"+d},d.exists=function(b){return a.modules.hasOwnProperty(d.resolve(b))},d},a.register("component-classes/index.js",function(a,b,c){function d(a){if(!a)throw new Error("A DOM element reference is required");this.el=a,this.list=a.classList}var e=b("indexof"),f=/\s+/,g=Object.prototype.toString;c.exports=function(a){return new d(a)},d.prototype.add=function(a){if(this.list)return this.list.add(a),this;var b=this.array(),c=e(b,a);return~c||b.push(a),this.el.className=b.join(" "),this},d.prototype.remove=function(a){if("[object RegExp]"==g.call(a))return this.removeMatching(a);if(this.list)return this.list.remove(a),this;var b=this.array(),c=e(b,a);return~c&&b.splice(c,1),this.el.className=b.join(" "),this},d.prototype.removeMatching=function(a){for(var b=this.array(),c=0;c<b.length;c++)a.test(b[c])&&this.remove(b[c]);return this},d.prototype.toggle=function(a,b){return this.list?("undefined"!=typeof b?b!==this.list.toggle(a,b)&&this.list.toggle(a):this.list.toggle(a),this):("undefined"!=typeof b?b?this.add(a):this.remove(a):this.has(a)?this.remove(a):this.add(a),this)},d.prototype.array=function(){var a=this.el.className.replace(/^\s+|\s+$/g,""),b=a.split(f);return""===b[0]&&b.shift(),b},d.prototype.has=d.prototype.contains=function(a){return this.list?this.list.contains(a):!!~e(this.array(),a)}}),a.register("segmentio-extend/index.js",function(a,b,c){c.exports=function(a){for(var b,c=Array.prototype.slice.call(arguments,1),d=0;b=c[d];d++)if(b)for(var e in b)a[e]=b[e];return a}}),a.register("component-indexof/index.js",function(a,b,c){c.exports=function(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}}),a.register("component-event/index.js",function(a){var b=window.addEventListener?"addEventListener":"attachEvent",c=window.removeEventListener?"removeEventListener":"detachEvent",d="addEventListener"!==b?"on":"";a.bind=function(a,c,e,f){return a[b](d+c,e,f||!1),e},a.unbind=function(a,b,e,f){return a[c](d+b,e,f||!1),e}}),a.register("timoxley-to-array/index.js",function(a,b,c){function d(a){return"[object Array]"===Object.prototype.toString.call(a)}c.exports=function(a){if("undefined"==typeof a)return[];if(null===a)return[null];if(a===window)return[window];if("string"==typeof a)return[a];if(d(a))return a;if("number"!=typeof a.length)return[a];if("function"==typeof a&&a instanceof Function)return[a];for(var b=[],c=0;c<a.length;c++)(Object.prototype.hasOwnProperty.call(a,c)||c in a)&&b.push(a[c]);return b.length?b:[]}}),a.register("javve-events/index.js",function(a,b){var c=b("event"),d=b("to-array");a.bind=function(a,b,e,f){a=d(a);for(var g=0;g<a.length;g++)c.bind(a[g],b,e,f)},a.unbind=function(a,b,e,f){a=d(a);for(var g=0;g<a.length;g++)c.unbind(a[g],b,e,f)}}),a.register("javve-get-by-class/index.js",function(a,b,c){c.exports=function(){return document.getElementsByClassName?function(a,b,c){return c?a.getElementsByClassName(b)[0]:a.getElementsByClassName(b)}:document.querySelector?function(a,b,c){return b="."+b,c?a.querySelector(b):a.querySelectorAll(b)}:function(a,b,c){var d=[],e="*";null==a&&(a=document);for(var f=a.getElementsByTagName(e),g=f.length,h=new RegExp("(^|\\s)"+b+"(\\s|$)"),i=0,j=0;g>i;i++)if(h.test(f[i].className)){if(c)return f[i];d[j]=f[i],j++}return d}}()}),a.register("javve-get-attribute/index.js",function(a,b,c){c.exports=function(a,b){var c=a.getAttribute&&a.getAttribute(b)||null;if(!c)for(var d=a.attributes,e=d.length,f=0;e>f;f++)void 0!==b[f]&&b[f].nodeName===b&&(c=b[f].nodeValue);return c}}),a.register("javve-natural-sort/index.js",function(a,b,c){c.exports=function(a,b,c){var d,e,f=/(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,g=/(^[ ]*|[ ]*$)/g,h=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,i=/^0x[0-9a-f]+$/i,j=/^0/,c=c||{},k=function(a){return c.insensitive&&(""+a).toLowerCase()||""+a},l=k(a).replace(g,"")||"",m=k(b).replace(g,"")||"",n=l.replace(f,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,"").split("\x00"),o=m.replace(f,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,"").split("\x00"),p=parseInt(l.match(i))||1!=n.length&&l.match(h)&&Date.parse(l),q=parseInt(m.match(i))||p&&m.match(h)&&Date.parse(m)||null,r=c.desc?-1:1;if(q){if(q>p)return-1*r;if(p>q)return 1*r}for(var s=0,t=Math.max(n.length,o.length);t>s;s++){if(d=!(n[s]||"").match(j)&&parseFloat(n[s])||n[s]||0,e=!(o[s]||"").match(j)&&parseFloat(o[s])||o[s]||0,isNaN(d)!==isNaN(e))return isNaN(d)?1:-1;if(typeof d!=typeof e&&(d+="",e+=""),e>d)return-1*r;if(d>e)return 1*r}return 0}}),a.register("javve-to-string/index.js",function(a,b,c){c.exports=function(a){return a=void 0===a?"":a,a=null===a?"":a,a=a.toString()}}),a.register("component-type/index.js",function(a,b,c){var d=Object.prototype.toString;c.exports=function(a){switch(d.call(a)){case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object Error]":return"error"}return null===a?"null":void 0===a?"undefined":a!==a?"nan":a&&1===a.nodeType?"element":typeof a.valueOf()}}),a.register("list.js/index.js",function(a,b,c){!function(a,d){"use strict";var e=a.document,f=b("get-by-class"),g=b("extend"),h=b("indexof"),i=function(a,c,i){var j,k=this,l=b("./src/item")(k),m=b("./src/add-async")(k),n=b("./src/parse")(k);j={start:function(){k.listClass="list",k.searchClass="search",k.sortClass="sort",k.page=200,k.i=1,k.items=[],k.visibleItems=[],k.matchingItems=[],k.searched=!1,k.filtered=!1,k.handlers={updated:[]},k.plugins={},k.helpers={getByClass:f,extend:g,indexOf:h},g(k,c),k.listContainer="string"==typeof a?e.getElementById(a):a,k.listContainer&&(k.list=f(k.listContainer,k.listClass,!0),k.templater=b("./src/templater")(k),k.search=b("./src/search")(k),k.filter=b("./src/filter")(k),k.sort=b("./src/sort")(k),this.items(),k.update(),this.plugins())},items:function(){n(k.list),i!==d&&k.add(i)},plugins:function(){for(var a=0;a<k.plugins.length;a++){var b=k.plugins[a];k[b.name]=b,b.init(k)}}},this.add=function(a,b){if(b)return void m(a,b);var c=[],e=!1;a[0]===d&&(a=[a]);for(var f=0,g=a.length;g>f;f++){var h=null;a[f]instanceof l?(h=a[f],h.reload()):(e=k.items.length>k.page?!0:!1,h=new l(a[f],d,e)),k.items.push(h),c.push(h)}return k.update(),c},this.show=function(a,b){return this.i=a,this.page=b,k.update(),k},this.remove=function(a,b,c){for(var d=0,e=0,f=k.items.length;f>e;e++)k.items[e].values()[a]==b&&(k.templater.remove(k.items[e],c),k.items.splice(e,1),f--,e--,d++);return k.update(),d},this.get=function(a,b){for(var c=[],d=0,e=k.items.length;e>d;d++){var f=k.items[d];f.values()[a]==b&&c.push(f)}return c},this.size=function(){return k.items.length},this.clear=function(){return k.templater.clear(),k.items=[],k},this.on=function(a,b){return k.handlers[a].push(b),k},this.off=function(a,b){var c=k.handlers[a],d=h(c,b);return d>-1&&c.splice(d,1),k},this.trigger=function(a){for(var b=k.handlers[a].length;b--;)k.handlers[a][b](k);return k},this.reset={filter:function(){for(var a=k.items,b=a.length;b--;)a[b].filtered=!1;return k},search:function(){for(var a=k.items,b=a.length;b--;)a[b].found=!1;return k}},this.update=function(){var a=k.items,b=a.length;k.visibleItems=[],k.matchingItems=[],k.templater.clear();for(var c=0;b>c;c++)a[c].matching()&&k.matchingItems.length+1>=k.i&&k.visibleItems.length<k.page?(a[c].show(),k.visibleItems.push(a[c]),k.matchingItems.push(a[c])):a[c].matching()?(k.matchingItems.push(a[c]),a[c].hide()):a[c].hide();return k.trigger("updated"),k},j.start()};c.exports=i}(window)}),a.register("list.js/src/search.js",function(a,b,c){var d=b("events"),e=b("get-by-class"),f=b("to-string");c.exports=function(a){var b,c,g,h,i={resetList:function(){a.i=1,a.templater.clear(),h=void 0},setOptions:function(a){2==a.length&&a[1]instanceof Array?c=a[1]:2==a.length&&"function"==typeof a[1]?h=a[1]:3==a.length&&(c=a[1],h=a[2])},setColumns:function(){c=void 0===c?i.toArray(a.items[0].values()):c},setSearchString:function(a){a=f(a).toLowerCase(),a=a.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&"),g=a},toArray:function(a){var b=[];for(var c in a)b.push(c);return b}},j={list:function(){for(var b=0,c=a.items.length;c>b;b++)j.item(a.items[b])},item:function(a){a.found=!1;for(var b=0,d=c.length;d>b;b++)if(j.values(a.values(),c[b]))return void(a.found=!0)},values:function(a,c){return a.hasOwnProperty(c)&&(b=f(a[c]).toLowerCase(),""!==g&&b.search(g)>-1)?!0:!1
},reset:function(){a.reset.search(),a.searched=!1}},k=function(b){return a.trigger("searchStart"),i.resetList(),i.setSearchString(b),i.setOptions(arguments),i.setColumns(),""===g?j.reset():(a.searched=!0,h?h(g,c):j.list()),a.update(),a.trigger("searchComplete"),a.visibleItems};return a.handlers.searchStart=a.handlers.searchStart||[],a.handlers.searchComplete=a.handlers.searchComplete||[],d.bind(e(a.listContainer,a.searchClass),"keyup",function(b){var c=b.target||b.srcElement,d=""===c.value&&!a.searched;d||k(c.value)}),d.bind(e(a.listContainer,a.searchClass),"input",function(a){var b=a.target||a.srcElement;""===b.value&&k("")}),a.helpers.toString=f,k}}),a.register("list.js/src/sort.js",function(a,b,c){var d=b("natural-sort"),e=b("classes"),f=b("events"),g=b("get-by-class"),h=b("get-attribute");c.exports=function(a){a.sortFunction=a.sortFunction||function(a,b,c){return c.desc="desc"==c.order?!0:!1,d(a.values()[c.valueName],b.values()[c.valueName],c)};var b={els:void 0,clear:function(){for(var a=0,c=b.els.length;c>a;a++)e(b.els[a]).remove("asc"),e(b.els[a]).remove("desc")},getOrder:function(a){var b=h(a,"data-order");return"asc"==b||"desc"==b?b:e(a).has("desc")?"asc":e(a).has("asc")?"desc":"asc"},getInSensitive:function(a,b){var c=h(a,"data-insensitive");b.insensitive="true"===c?!0:!1},setOrder:function(a){for(var c=0,d=b.els.length;d>c;c++){var f=b.els[c];if(h(f,"data-sort")===a.valueName){var g=h(f,"data-order");"asc"==g||"desc"==g?g==a.order&&e(f).add(a.order):e(f).add(a.order)}}}},c=function(){a.trigger("sortStart"),options={};var c=arguments[0].currentTarget||arguments[0].srcElement||void 0;c?(options.valueName=h(c,"data-sort"),b.getInSensitive(c,options),options.order=b.getOrder(c)):(options=arguments[1]||options,options.valueName=arguments[0],options.order=options.order||"asc",options.insensitive="undefined"==typeof options.insensitive?!0:options.insensitive),b.clear(),b.setOrder(options),options.sortFunction=options.sortFunction||a.sortFunction,a.items.sort(function(a,b){return options.sortFunction(a,b,options)}),a.update(),a.trigger("sortComplete")};return a.handlers.sortStart=a.handlers.sortStart||[],a.handlers.sortComplete=a.handlers.sortComplete||[],b.els=g(a.listContainer,a.sortClass),f.bind(b.els,"click",c),a.on("searchStart",b.clear),a.on("filterStart",b.clear),a.helpers.classes=e,a.helpers.naturalSort=d,a.helpers.events=f,a.helpers.getAttribute=h,c}}),a.register("list.js/src/item.js",function(a,b,c){c.exports=function(a){return function(b,c,d){var e=this;this._values={},this.found=!1,this.filtered=!1;var f=function(b,c,d){if(void 0===c)d?e.values(b,d):e.values(b);else{e.elm=c;var f=a.templater.get(e,b);e.values(f)}};this.values=function(b,c){if(void 0===b)return e._values;for(var d in b)e._values[d]=b[d];c!==!0&&a.templater.set(e,e.values())},this.show=function(){a.templater.show(e)},this.hide=function(){a.templater.hide(e)},this.matching=function(){return a.filtered&&a.searched&&e.found&&e.filtered||a.filtered&&!a.searched&&e.filtered||!a.filtered&&a.searched&&e.found||!a.filtered&&!a.searched},this.visible=function(){return e.elm.parentNode==a.list?!0:!1},f(b,c,d)}}}),a.register("list.js/src/templater.js",function(a,b,c){var d=b("get-by-class"),e=function(a){function b(b){if(void 0===b){for(var c=a.list.childNodes,d=0,e=c.length;e>d;d++)if(void 0===c[d].data)return c[d];return null}if(-1!==b.indexOf("<")){var f=document.createElement("div");return f.innerHTML=b,f.firstChild}return document.getElementById(a.item)}var c=b(a.item),e=this;this.get=function(a,b){e.create(a);for(var c={},f=0,g=b.length;g>f;f++){var h=d(a.elm,b[f],!0);c[b[f]]=h?h.innerHTML:""}return c},this.set=function(a,b){if(!e.create(a))for(var c in b)if(b.hasOwnProperty(c)){var f=d(a.elm,c,!0);f&&("IMG"===f.tagName&&""!==b[c]?f.src=b[c]:f.innerHTML=b[c])}},this.create=function(a){if(void 0!==a.elm)return!1;var b=c.cloneNode(!0);return b.removeAttribute("id"),a.elm=b,e.set(a,a.values()),!0},this.remove=function(b){a.list.removeChild(b.elm)},this.show=function(b){e.create(b),a.list.appendChild(b.elm)},this.hide=function(b){void 0!==b.elm&&b.elm.parentNode===a.list&&a.list.removeChild(b.elm)},this.clear=function(){if(a.list.hasChildNodes())for(;a.list.childNodes.length>=1;)a.list.removeChild(a.list.firstChild)}};c.exports=function(a){return new e(a)}}),a.register("list.js/src/filter.js",function(a,b,c){c.exports=function(a){return a.handlers.filterStart=a.handlers.filterStart||[],a.handlers.filterComplete=a.handlers.filterComplete||[],function(b){if(a.trigger("filterStart"),a.i=1,a.reset.filter(),void 0===b)a.filtered=!1;else{a.filtered=!0;for(var c=a.items,d=0,e=c.length;e>d;d++){var f=c[d];f.filtered=b(f)?!0:!1}}return a.update(),a.trigger("filterComplete"),a.visibleItems}}}),a.register("list.js/src/add-async.js",function(a,b,c){c.exports=function(a){return function(b,c,d){var e=b.splice(0,100);d=d||[],d=d.concat(a.add(e)),b.length>0?setTimeout(function(){addAsync(b,c,d)},10):(a.update(),c(d))}}}),a.register("list.js/src/parse.js",function(a,b,c){c.exports=function(a){var c=b("./item")(a),d=function(a){for(var b=a.childNodes,c=[],d=0,e=b.length;e>d;d++)void 0===b[d].data&&c.push(b[d]);return c},e=function(b,d){for(var e=0,f=b.length;f>e;e++)a.items.push(new c(d,b[e]))},f=function(b,c){var d=b.splice(0,100);e(d,c),b.length>0?setTimeout(function(){init.items.indexAsync(b,c)},10):a.update()};return function(){var b=d(a.list),c=a.valueNames;a.indexAsync?f(b,c):e(b,c)}}}),a.alias("component-classes/index.js","list.js/deps/classes/index.js"),a.alias("component-classes/index.js","classes/index.js"),a.alias("component-indexof/index.js","component-classes/deps/indexof/index.js"),a.alias("segmentio-extend/index.js","list.js/deps/extend/index.js"),a.alias("segmentio-extend/index.js","extend/index.js"),a.alias("component-indexof/index.js","list.js/deps/indexof/index.js"),a.alias("component-indexof/index.js","indexof/index.js"),a.alias("javve-events/index.js","list.js/deps/events/index.js"),a.alias("javve-events/index.js","events/index.js"),a.alias("component-event/index.js","javve-events/deps/event/index.js"),a.alias("timoxley-to-array/index.js","javve-events/deps/to-array/index.js"),a.alias("javve-get-by-class/index.js","list.js/deps/get-by-class/index.js"),a.alias("javve-get-by-class/index.js","get-by-class/index.js"),a.alias("javve-get-attribute/index.js","list.js/deps/get-attribute/index.js"),a.alias("javve-get-attribute/index.js","get-attribute/index.js"),a.alias("javve-natural-sort/index.js","list.js/deps/natural-sort/index.js"),a.alias("javve-natural-sort/index.js","natural-sort/index.js"),a.alias("javve-to-string/index.js","list.js/deps/to-string/index.js"),a.alias("javve-to-string/index.js","list.js/deps/to-string/index.js"),a.alias("javve-to-string/index.js","to-string/index.js"),a.alias("javve-to-string/index.js","javve-to-string/index.js"),a.alias("component-type/index.js","list.js/deps/type/index.js"),a.alias("component-type/index.js","type/index.js"),"object"==typeof exports?module.exports=a("list.js"):"function"==typeof define&&define.amd?define(function(){return a("list.js")}):this.List=a("list.js")}(),function(a){"use strict";"function"==typeof define&&define.amd?define(a):"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=a():window.Sortable=a()}(function(){"use strict";function a(a,c){this.el=a,this.options=c=c||{},c.group=c.group||Math.random(),c.handle=c.handle||null,c.draggable=c.draggable||a.children[0]&&a.children[0].nodeName||(/[uo]l/i.test(a.nodeName)?"li":"*"),c.ghostClass=c.ghostClass||"sortable-ghost",c.onAdd=b(this,c.onAdd||D),c.onUpdate=b(this,c.onUpdate||D),c.onRemove=b(this,c.onRemove||D),a[w]=c.group;for(var d in this)"_"===d.charAt(0)&&(this[d]=b(this,this[d]));e(a,"add",c.onAdd),e(a,"update",c.onUpdate),e(a,"remove",c.onRemove),e(a,"mousedown",this._onTapStart),e(a,"touchstart",this._onTapStart),A&&e(a,"selectstart",this._onTapStart),e(a,"dragover",this._onDragOver),e(a,"dragenter",this._onDragOver),F.push(this._onDragOver)}function b(a,b){var c=E.call(arguments,2);return b.bind?b.bind.apply(b,[a].concat(c)):function(){return b.apply(a,c.concat(E.call(arguments)))}}function c(a,b,c){if("*"===b)return a;if(a){c=c||y,b=b.split(".");var d=b.shift().toUpperCase(),e=new RegExp("\\s("+b.join("|")+")\\s","g");do if(!(""!==d&&a.nodeName!=d||b.length&&((" "+a.className+" ").match(e)||[]).length!=b.length))return a;while(a!==c&&(a=a.parentNode))}return null}function d(a){a.dataTransfer.dropEffect="move",a.preventDefault()}function e(a,b,c){a.addEventListener(b,c,!1)}function f(a,b,c){a.removeEventListener(b,c,!1)}function g(a,b,c){if(a)if(a.classList)a.classList[c?"add":"remove"](b);else{var d=(" "+a.className+" ").replace(/\s+/g," ").replace(" "+b+" ","");a.className=d+(c?" "+b:"")}}function h(a,b,c){if(a&&a.style){if(void 0===c)return y.defaultView&&y.defaultView.getComputedStyle?c=y.defaultView.getComputedStyle(a,""):a.currentStyle&&(c=a.currentStyle),void 0===b?c:c[b];a.style[b]=c+("string"==typeof c?"":"px")}}function i(a,b,c){if(a){var d=a.getElementsByTagName(b),e=0,f=d.length;if(c)for(;f>e;e++)c(d[e],e);return d}return[]}function j(a){return a.draggable=!1}function k(){B=!1}function l(a,b){var c=a.lastElementChild.getBoundingClientRect();return b.clientY-(c.top+c.height)>5}var m,n,o,p,q,r,s,t,u,v,w="Sortable"+(new Date).getTime(),x=window,y=x.document,z=x.parseInt,A=!!y.createElement("div").dragDrop,B=!1,C=function(a,b){var c=y.createEvent("Event");return c.initEvent(a,!0,!0),c.item=b,c},D=function(){},E=[].slice,F=[];return a.prototype={constructor:a,_applyEffects:function(){g(m,this.options.ghostClass,!0)},_onTapStart:function(a){var b=a.touches&&a.touches[0],f=(b||a).target,g=this.options,h=this.el;if(g.handle&&(f=c(f,g.handle,h)),f=g.targetWrapped?f.parentNode:c(f,g.draggable,h),f&&"selectstart"==a.type&&"A"!=f.tagName&&"IMG"!=f.tagName&&f.dragDrop(),f&&!m&&f.parentNode===h){u=a,f.draggable=!0,i(f,"a",j),i(f,"img",j),b&&(u={target:f,clientX:b.clientX,clientY:b.clientY},this._onDragStart(u,!0),a.preventDefault()),e(this.el,"dragstart",this._onDragStart),e(this.el,"dragend",this._onDrop),e(y,"dragover",d);try{y.selection?y.selection.empty():window.getSelection().removeAllRanges()}catch(k){}}},_emulateDragOver:function(){if(v){h(n,"display","none");var a=y.elementFromPoint(v.clientX,v.clientY),b=a,c=this.options.group,d=F.length;if(b)do{if(b[w]===c){for(;d--;)F[d]({clientX:v.clientX,clientY:v.clientY,target:a,rootEl:b});break}a=b}while(b=b.parentNode);h(n,"display","")}},_onTouchMove:function(a){if(u){var b=a.touches[0],c=b.clientX-u.clientX,d=b.clientY-u.clientY;v=b,h(n,"webkitTransform","translate3d("+c+"px,"+d+"px,0)")}},_onDragStart:function(a,b){var c=a.target,d=a.dataTransfer;if(o=this.el,m=c,p=c.nextSibling,t=this.options.group,b){var f,g=c.getBoundingClientRect(),i=h(c);n=c.cloneNode(!0),h(n,"top",g.top-z(i.marginTop,10)),h(n,"left",g.left-z(i.marginLeft,10)),h(n,"width",g.width),h(n,"height",g.height),h(n,"opacity","0.8"),h(n,"position","fixed"),h(n,"zIndex","100000"),o.appendChild(n),f=n.getBoundingClientRect(),h(n,"width",2*g.width-f.width),h(n,"height",2*g.height-f.height),e(y,"touchmove",this._onTouchMove),e(y,"touchend",this._onDrop),this._loopId=setInterval(this._emulateDragOver,150)}else d.effectAllowed="move",d.setData("Text",c.textContent),e(y,"drop",this._onDrop);setTimeout(this._applyEffects)},_onDragOver:function(a){if(!B&&t===this.options.group&&(void 0===a.rootEl||a.rootEl===this.el)){var b=this.el,d=c(a.target,this.options.draggable,b);if(0===b.children.length||b.children[0]===n||b===a.target&&l(b,a))b.appendChild(m);else if(d&&d!==m&&void 0!==d.parentNode[w]){q!==d&&(q=d,r=h(d),s=d.getBoundingClientRect());var e,f=s,g=f.right-f.left,i=f.bottom-f.top,j=/left|right|inline/.test(r.cssFloat+r.display),o=(j?(a.clientX-f.left)/g:(a.clientY-f.top)/i)>.5,p=d.offsetWidth>m.offsetWidth,u=d.offsetHeight>m.offsetHeight,v=d.nextSibling;B=!0,setTimeout(k,30),e=j?d.previousElementSibling===m&&!p||o>.5&&p:d.nextElementSibling!==m&&!u||o>.5&&u,e&&!v?b.appendChild(m):d.parentNode.insertBefore(m,e?v:d)}}},_onDrop:function(a){clearInterval(this._loopId),f(y,"drop",this._onDrop),f(y,"dragover",d),f(this.el,"dragend",this._onDrop),f(this.el,"dragstart",this._onDragStart),f(this.el,"selectstart",this._onTapStart),f(y,"touchmove",this._onTouchMove),f(y,"touchend",this._onDrop),a&&(a.preventDefault(),a.stopPropagation(),n&&n.parentNode.removeChild(n),m&&(j(m),g(m,this.options.ghostClass,!1),o.contains(m)?m.nextSibling!==p&&m.dispatchEvent(C("update",m)):(o.dispatchEvent(C("remove",m)),m.dispatchEvent(C("add",m)))),o=m=n=p=u=v=q=r=t=null)},destroy:function(){var a=this.el,b=this.options;f(a,"add",b.onAdd),f(a,"update",b.onUpdate),f(a,"remove",b.onRemove),f(a,"mousedown",this._onTapStart),f(a,"touchstart",this._onTapStart),f(a,"selectstart",this._onTapStart),f(a,"dragover",this._onDragOver),f(a,"dragenter",this._onDragOver),Array.prototype.forEach.call(a.querySelectorAll("[draggable]"),function(a){a.removeAttribute("draggable")}),F.splice(F.indexOf(this._onDragOver),1),this._onDrop(),this.el=null}},a.utils={on:e,off:f,css:h,find:i,bind:b,closest:c,toggleClass:g},a.version="0.1.9",a}),function(){function a(b,c,d){var e=a.resolve(b);if(null==e){d=d||b,c=c||"root";var f=Error('Failed to require "'+d+'" from "'+c+'"');throw f.path=d,f.parent=c,f.require=!0,f}var g=a.modules[e];if(!g._resolving&&!g.exports){var h={};h.exports={},h.client=h.component=!0,g._resolving=!0,g.call(this,h.exports,a.relative(e),h),delete g._resolving,g.exports=h.exports}return g.exports}a.modules={},a.aliases={},a.resolve=function(b){"/"===b.charAt(0)&&(b=b.slice(1));for(var c=[b,b+".js",b+".json",b+"/index.js",b+"/index.json"],d=0;c.length>d;d++){var b=c[d];if(a.modules.hasOwnProperty(b))return b;if(a.aliases.hasOwnProperty(b))return a.aliases[b]}},a.normalize=function(a,b){var c=[];if("."!=b.charAt(0))return b;a=a.split("/"),b=b.split("/");for(var d=0;b.length>d;++d)".."==b[d]?a.pop():"."!=b[d]&&""!=b[d]&&c.push(b[d]);return a.concat(c).join("/")},a.register=function(b,c){a.modules[b]=c},a.alias=function(b,c){if(!a.modules.hasOwnProperty(b))throw Error('Failed to alias "'+b+'", it does not exist');a.aliases[c]=b},a.relative=function(b){function c(a,b){for(var c=a.length;c--;)if(a[c]===b)return c;return-1}function d(c){var e=d.resolve(c);return a(e,b,c)}var e=a.normalize(b,"..");return d.resolve=function(d){var f=d.charAt(0);if("/"==f)return d.slice(1);if("."==f)return a.normalize(e,d);var g=b.split("/"),h=c(g,"deps")+1;return h||(h=0),d=g.slice(0,h+1).join("/")+"/deps/"+d},d.exists=function(b){return a.modules.hasOwnProperty(d.resolve(b))},d},a.register("component-event/index.js",function(a){var b=window.addEventListener?"addEventListener":"attachEvent",c=window.removeEventListener?"removeEventListener":"detachEvent",d="addEventListener"!==b?"on":"";a.bind=function(a,c,e,f){return a[b](d+c,e,f||!1),e},a.unbind=function(a,b,e,f){return a[c](d+b,e,f||!1),e}}),a.register("component-query/index.js",function(a,b,c){function d(a,b){return b.querySelector(a)}a=c.exports=function(a,b){return b=b||document,d(a,b)},a.all=function(a,b){return b=b||document,b.querySelectorAll(a)},a.engine=function(b){if(!b.one)throw Error(".one callback required");if(!b.all)throw Error(".all callback required");return d=b.one,a.all=b.all,a}}),a.register("component-matches-selector/index.js",function(a,b,c){function d(a,b){if(g)return g.call(a,b);for(var c=e.all(b,a.parentNode),d=0;c.length>d;++d)if(c[d]==a)return!0;return!1}var e=b("query"),f=Element.prototype,g=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.msMatchesSelector||f.oMatchesSelector;c.exports=d}),a.register("discore-closest/index.js",function(a,b,c){var d=b("matches-selector");c.exports=function(a,b,c,e){for(a=c?{parentNode:a}:a,e=e||document;(a=a.parentNode)&&a!==document;){if(d(a,b))return a;if(a===e)return}}}),a.register("component-delegate/index.js",function(a,b){var c=b("closest"),d=b("event");a.bind=function(a,b,e,f,g){return d.bind(a,e,function(d){var e=d.target||d.srcElement;d.delegateTarget=c(e,b,!0,a),d.delegateTarget&&f.call(a,d)},g)},a.unbind=function(a,b,c,e){d.unbind(a,b,c,e)}}),a.register("component-events/index.js",function(a,b,c){function d(a,b){if(!(this instanceof d))return new d(a,b);if(!a)throw Error("element required");if(!b)throw Error("object required");this.el=a,this.obj=b,this._events={}}function e(a){var b=a.split(/ +/);return{name:b.shift(),selector:b.join(" ")}}var f=b("event"),g=b("delegate");c.exports=d,d.prototype.sub=function(a,b,c){this._events[a]=this._events[a]||{},this._events[a][b]=c},d.prototype.bind=function(a,b){function c(){var a=[].slice.call(arguments).concat(k);i[b].apply(i,a)}var d=e(a),h=this.el,i=this.obj,j=d.name,b=b||"on"+j,k=[].slice.call(arguments,2);return d.selector?c=g.bind(h,d.selector,j,c):f.bind(h,j,c),this.sub(j,b,c),c},d.prototype.unbind=function(a,b){if(0==arguments.length)return this.unbindAll();if(1==arguments.length)return this.unbindAllOf(a);var c=this._events[a];if(c){var d=c[b];d&&f.unbind(this.el,a,d)}},d.prototype.unbindAll=function(){for(var a in this._events)this.unbindAllOf(a)},d.prototype.unbindAllOf=function(a){var b=this._events[a];if(b)for(var c in b)this.unbind(a,c)}}),a.register("component-indexof/index.js",function(a,b,c){c.exports=function(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0;a.length>c;++c)if(a[c]===b)return c;return-1}}),a.register("component-classes/index.js",function(a,b,c){function d(a){if(!a)throw Error("A DOM element reference is required");this.el=a,this.list=a.classList}var e=b("indexof"),f=/\s+/,g=Object.prototype.toString;c.exports=function(a){return new d(a)},d.prototype.add=function(a){if(this.list)return this.list.add(a),this;var b=this.array(),c=e(b,a);return~c||b.push(a),this.el.className=b.join(" "),this},d.prototype.remove=function(a){if("[object RegExp]"==g.call(a))return this.removeMatching(a);if(this.list)return this.list.remove(a),this;var b=this.array(),c=e(b,a);return~c&&b.splice(c,1),this.el.className=b.join(" "),this},d.prototype.removeMatching=function(a){for(var b=this.array(),c=0;b.length>c;c++)a.test(b[c])&&this.remove(b[c]);return this},d.prototype.toggle=function(a,b){return this.list?(void 0!==b?b!==this.list.toggle(a,b)&&this.list.toggle(a):this.list.toggle(a),this):(void 0!==b?b?this.add(a):this.remove(a):this.has(a)?this.remove(a):this.add(a),this)},d.prototype.array=function(){var a=this.el.className.replace(/^\s+|\s+$/g,""),b=a.split(f);return""===b[0]&&b.shift(),b},d.prototype.has=d.prototype.contains=function(a){return this.list?this.list.contains(a):!!~e(this.array(),a)}}),a.register("component-emitter/index.js",function(a,b,c){function d(a){return a?e(a):void 0}function e(a){for(var b in d.prototype)a[b]=d.prototype[b];return a}c.exports=d,d.prototype.on=d.prototype.addEventListener=function(a,b){return this._callbacks=this._callbacks||{},(this._callbacks[a]=this._callbacks[a]||[]).push(b),this},d.prototype.once=function(a,b){function c(){d.off(a,c),b.apply(this,arguments)}var d=this;return this._callbacks=this._callbacks||{},c.fn=b,this.on(a,c),this},d.prototype.off=d.prototype.removeListener=d.prototype.removeAllListeners=d.prototype.removeEventListener=function(a,b){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var c=this._callbacks[a];if(!c)return this;if(1==arguments.length)return delete this._callbacks[a],this;for(var d,e=0;c.length>e;e++)if(d=c[e],d===b||d.fn===b){c.splice(e,1);break}return this},d.prototype.emit=function(a){this._callbacks=this._callbacks||{};var b=[].slice.call(arguments,1),c=this._callbacks[a];if(c){c=c.slice(0);for(var d=0,e=c.length;e>d;++d)c[d].apply(this,b)}return this},d.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks[a]||[]},d.prototype.hasListeners=function(a){return!!this.listeners(a).length}}),a.register("ui-component-mouse/index.js",function(a,b,c){function d(a,b){this.obj=b||{},this.el=a}var e=b("emitter"),f=b("event");c.exports=function(a,b){return new d(a,b)},e(d.prototype),d.prototype.bind=function(){function a(e){c.onmouseup&&c.onmouseup(e),f.unbind(document,"mousemove",b),f.unbind(document,"mouseup",a),d.emit("up",e)}function b(a){c.onmousemove&&c.onmousemove(a),d.emit("move",a)}var c=this.obj,d=this;return d.down=function(e){c.onmousedown&&c.onmousedown(e),f.bind(document,"mouseup",a),f.bind(document,"mousemove",b),d.emit("down",e)},f.bind(this.el,"mousedown",d.down),this},d.prototype.unbind=function(){f.unbind(this.el,"mousedown",this.down),this.down=null}}),a.register("abpetkov-percentage-calc/percentage-calc.js",function(a){a.isNumber=function(a){return"number"==typeof a?!0:!1},a.of=function(b,c){return a.isNumber(b)&&a.isNumber(c)?b/100*c:void 0},a.from=function(b,c){return a.isNumber(b)&&a.isNumber(c)?100*(b/c):void 0}}),a.register("abpetkov-closest-num/closest-num.js",function(a){a.find=function(a,b){var c=null,d=null,e=b[0];for(i=0;b.length>i;i++)c=Math.abs(a-e),d=Math.abs(a-b[i]),c>d&&(e=b[i]);return e}}),a.register("vesln-super/lib/super.js",function(a,b,c){function d(){var b=e.call(arguments);return b.length?"function"!=typeof b[0]?a.merge(b):void a.inherits.apply(null,b):void 0}var e=Array.prototype.slice,a=c.exports=d;a.extend=function(b,c){var d=this,e=function(){return d.apply(this,arguments)};return a.merge([e,this]),a.inherits(e,this),b&&a.merge([e.prototype,b]),c&&a.merge([e,c]),e.extend=this.extend,e},a.inherits=function(a,b){a.super_=b,Object.create?a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}):(a.prototype=new b,a.prototype.constructor=a)},a.merge=function(a){for(var b=2===a.length?a.shift():{},c=null,d=0,e=a.length;e>d;d++){c=a[d];for(var f in c)c.hasOwnProperty(f)&&(b[f]=c[f])}return b}}),a.register("powerange/lib/powerange.js",function(a,b,c){var d=(b("./main"),b("./horizontal")),e=b("./vertical"),f={callback:function(){},decimal:!1,disable:!1,disableOpacity:.5,hideRange:!1,klass:"",min:0,max:100,start:null,step:null,vertical:!1};c.exports=function(a,b){b=b||{};for(var c in f)null==b[c]&&(b[c]=f[c]);return b.vertical?new e(a,b):new d(a,b)}}),a.register("powerange/lib/main.js",function(a,b,c){function d(a,b){return this instanceof d?(this.element=a,this.options=b||{},this.slider=this.create("span","range-bar"),void(null!==this.element&&"text"===this.element.type&&this.init())):new d(a,b)}var e=b("mouse"),f=b("events"),g=b("classes"),h=b("percentage-calc");c.exports=d,d.prototype.bindEvents=function(){this.handle=this.slider.querySelector(".range-handle"),this.touch=f(this.handle,this),this.touch.bind("touchstart","onmousedown"),this.touch.bind("touchmove","onmousemove"),this.touch.bind("touchend","onmouseup"),this.mouse=e(this.handle,this),this.mouse.bind()},d.prototype.hide=function(){this.element.style.display="none"},d.prototype.append=function(){var a=this.generate();this.insertAfter(this.element,a)},d.prototype.generate=function(){var a={handle:{type:"span",selector:"range-handle"},min:{type:"span",selector:"range-min"},max:{type:"span",selector:"range-max"},quantity:{type:"span",selector:"range-quantity"}};for(var b in a)if(a.hasOwnProperty(b)){var c=this.create(a[b].type,a[b].selector);this.slider.appendChild(c)}return this.slider},d.prototype.create=function(a,b){var c=document.createElement(a);return c.className=b,c},d.prototype.insertAfter=function(a,b){a.parentNode.insertBefore(b,a.nextSibling)},d.prototype.extraClass=function(a){this.options.klass&&g(this.slider).add(a)},d.prototype.setRange=function(a,b){"number"!=typeof a||"number"!=typeof b||this.options.hideRange||(this.slider.querySelector(".range-min").innerHTML=a,this.slider.querySelector(".range-max").innerHTML=b)},d.prototype.setValue=function(a,b){var c=h.from(parseFloat(a),b),d=h.of(c,this.options.max-this.options.min)+this.options.min,e=!1;d=this.options.decimal?Math.round(100*d)/100:Math.round(d),e=this.element.value!=d?!0:!1,this.element.value=d,this.options.callback(),e&&this.changeEvent()},d.prototype.step=function(a,b){var c=a-b,d=h.from(this.checkStep(this.options.step),this.options.max-this.options.min),e=h.of(d,c),f=[];for(i=0;c>=i;i+=e)f.push(i);return this.steps=f,this.steps},d.prototype.checkValues=function(a){this.options.min>a&&(this.options.start=this.options.min),a>this.options.max&&(this.options.start=this.options.max),this.options.min>=this.options.max&&(this.options.min=this.options.max)},d.prototype.checkStep=function(a){return 0>a&&(a=Math.abs(a)),this.options.step=a,this.options.step},d.prototype.disable=function(){(this.options.min==this.options.max||this.options.min>this.options.max||this.options.disable)&&(this.mouse.unbind(),this.touch.unbind(),this.slider.style.opacity=this.options.disableOpacity,g(this.handle).add("range-disabled"))},d.prototype.unselectable=function(a,b){g(this.slider).has("unselectable")||b!==!0?g(this.slider).remove("unselectable"):g(this.slider).add("unselectable")},d.prototype.changeEvent=function(){if("function"!=typeof Event&&document.fireEvent)this.element.fireEvent("onchange");else{var a=document.createEvent("HTMLEvents");a.initEvent("change",!1,!0),this.element.dispatchEvent(a)}},d.prototype.init=function(){this.hide(),this.append(),this.bindEvents(),this.extraClass(this.options.klass),this.checkValues(this.options.start),this.setRange(this.options.min,this.options.max),this.disable()}}),a.register("powerange/lib/horizontal.js",function(a,b,c){function d(){h.apply(this,arguments),this.options.step&&this.step(this.slider.offsetWidth,this.handle.offsetWidth),this.setStart(this.options.start)}var e=b("super"),f=b("closest-num"),g=b("percentage-calc"),h=b("./main");c.exports=d,e(d,h),d.prototype.setStart=function(a){var b=null===a?this.options.min:a,c=g.from(b-this.options.min,this.options.max-this.options.min)||0,d=g.of(c,this.slider.offsetWidth-this.handle.offsetWidth),e=this.options.step?f.find(d,this.steps):d;this.setPosition(e),this.setValue(this.handle.style.left,this.slider.offsetWidth-this.handle.offsetWidth)},d.prototype.setPosition=function(a){this.handle.style.left=a+"px",this.slider.querySelector(".range-quantity").style.width=a+"px"},d.prototype.onmousedown=function(a){a.touches&&(a=a.touches[0]),this.startX=a.clientX,this.handleOffsetX=this.handle.offsetLeft,this.restrictHandleX=this.slider.offsetWidth-this.handle.offsetWidth,this.unselectable(this.slider,!0)},d.prototype.onmousemove=function(a){a.preventDefault(),a.touches&&(a=a.touches[0]);var b=this.handleOffsetX+a.clientX-this.startX,c=this.steps?f.find(b,this.steps):b;this.setPosition(0>=b?0:b>=this.restrictHandleX?this.restrictHandleX:c),this.setValue(this.handle.style.left,this.slider.offsetWidth-this.handle.offsetWidth)},d.prototype.onmouseup=function(){this.unselectable(this.slider,!1)}}),a.register("powerange/lib/vertical.js",function(a,b,c){function d(){i.apply(this,arguments),f(this.slider).add("vertical"),this.options.step&&this.step(this.slider.offsetHeight,this.handle.offsetHeight),this.setStart(this.options.start)}var e=b("super"),f=b("classes"),g=b("closest-num"),h=b("percentage-calc"),i=b("./main");c.exports=d,e(d,i),d.prototype.setStart=function(a){var b=null===a?this.options.min:a,c=h.from(b-this.options.min,this.options.max-this.options.min)||0,d=h.of(c,this.slider.offsetHeight-this.handle.offsetHeight),e=this.options.step?g.find(d,this.steps):d;this.setPosition(e),this.setValue(this.handle.style.bottom,this.slider.offsetHeight-this.handle.offsetHeight)},d.prototype.setPosition=function(a){this.handle.style.bottom=a+"px",this.slider.querySelector(".range-quantity").style.height=a+"px"},d.prototype.onmousedown=function(a){a.touches&&(a=a.touches[0]),this.startY=a.clientY,this.handleOffsetY=this.slider.offsetHeight-this.handle.offsetHeight-this.handle.offsetTop,this.restrictHandleY=this.slider.offsetHeight-this.handle.offsetHeight,this.unselectable(this.slider,!0)},d.prototype.onmousemove=function(a){a.preventDefault(),a.touches&&(a=a.touches[0]);var b=this.handleOffsetY+this.startY-a.clientY,c=this.steps?g.find(b,this.steps):b;this.setPosition(0>=b?0:b>=this.restrictHandleY?this.restrictHandleY:c),this.setValue(this.handle.style.bottom,this.slider.offsetHeight-this.handle.offsetHeight)},d.prototype.onmouseup=function(){this.unselectable(this.slider,!1)}}),a.alias("component-events/index.js","powerange/deps/events/index.js"),a.alias("component-events/index.js","events/index.js"),a.alias("component-event/index.js","component-events/deps/event/index.js"),a.alias("component-delegate/index.js","component-events/deps/delegate/index.js"),a.alias("discore-closest/index.js","component-delegate/deps/closest/index.js"),a.alias("discore-closest/index.js","component-delegate/deps/closest/index.js"),a.alias("component-matches-selector/index.js","discore-closest/deps/matches-selector/index.js"),a.alias("component-query/index.js","component-matches-selector/deps/query/index.js"),a.alias("discore-closest/index.js","discore-closest/index.js"),a.alias("component-event/index.js","component-delegate/deps/event/index.js"),a.alias("component-classes/index.js","powerange/deps/classes/index.js"),a.alias("component-classes/index.js","classes/index.js"),a.alias("component-indexof/index.js","component-classes/deps/indexof/index.js"),a.alias("ui-component-mouse/index.js","powerange/deps/mouse/index.js"),a.alias("ui-component-mouse/index.js","mouse/index.js"),a.alias("component-emitter/index.js","ui-component-mouse/deps/emitter/index.js"),a.alias("component-event/index.js","ui-component-mouse/deps/event/index.js"),a.alias("abpetkov-percentage-calc/percentage-calc.js","powerange/deps/percentage-calc/percentage-calc.js"),a.alias("abpetkov-percentage-calc/percentage-calc.js","powerange/deps/percentage-calc/index.js"),a.alias("abpetkov-percentage-calc/percentage-calc.js","percentage-calc/index.js"),a.alias("abpetkov-percentage-calc/percentage-calc.js","abpetkov-percentage-calc/index.js"),a.alias("abpetkov-closest-num/closest-num.js","powerange/deps/closest-num/closest-num.js"),a.alias("abpetkov-closest-num/closest-num.js","powerange/deps/closest-num/index.js"),a.alias("abpetkov-closest-num/closest-num.js","closest-num/index.js"),a.alias("abpetkov-closest-num/closest-num.js","abpetkov-closest-num/index.js"),a.alias("vesln-super/lib/super.js","powerange/deps/super/lib/super.js"),a.alias("vesln-super/lib/super.js","powerange/deps/super/index.js"),a.alias("vesln-super/lib/super.js","super/index.js"),a.alias("vesln-super/lib/super.js","vesln-super/index.js"),a.alias("powerange/lib/powerange.js","powerange/index.js"),"object"==typeof exports?module.exports=a("powerange"):"function"==typeof define&&define.amd?define([],function(){return a("powerange")}):this.Powerange=a("powerange")}(),G={},G.Class=function(){},G.Class.extend=function(a){var b=function(){this.initialize&&this.initialize.apply(this,arguments),this._initHooks.length&&this.callInitHooks()},c=b.__super__=this.prototype,d=G.Util.create(c);d.constructor=b,b.prototype=d;for(var e in this)this.hasOwnProperty(e)&&"prototype"!==e&&(b[e]=this[e]);return a.statics&&(G.extend(b,a.statics),delete a.statics),a.includes&&(G.Util.extend.apply(null,[d].concat(a.includes)),delete a.includes),d.options&&(a.options=G.Util.extend(G.Util.create(d.options),a.options)),G.extend(d,a),d._initHooks=[],d.callInitHooks=function(){if(!this._initHooksCalled){c.callInitHooks&&c.callInitHooks.call(this),this._initHooksCalled=!0;for(var a=0,b=d._initHooks.length;b>a;a++)d._initHooks[a].call(this)}},b},G.Util={extend:function(a){var b,c,d,e,f=Array.prototype.slice.call(arguments,1);for(c=0,d=f.length;d>c;c++){e=f[c];for(b in e)a[b]=e[b]}return a},create:Object.create||function(){function a(){}return function(b){return a.prototype=b,new a}}(),bind:function(a,b){var c=Array.prototype.slice;if(a.bind)return a.bind.apply(a,c.call(arguments,1));var d=c.call(arguments,2);return function(){return a.apply(b,d.length?d.concat(c.call(arguments)):arguments)}},setOptions:function(a,b){a.hasOwnProperty("options")||(a.options=a.options?G.Util.create(a.options):{});
for(var c in b)a.options[c]=b[c];return a.options},isArray:Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},castArray:function(a){return this.isArray(a)?a:[a]}},G.extend=G.Util.extend,G.setOptions=G.Util.setOptions,G.Evented=G.Class.extend({on:function(a,b,c){if("object"==typeof a)for(var d in a)this._on(d,a[d],b);else{a=G.Util.splitWords(a);for(var e=0,f=a.length;f>e;e++)this._on(a[e],b,c)}return this},off:function(a,b,c){if(a)if("object"==typeof a)for(var d in a)this._off(d,a[d],b);else{a=G.Util.splitWords(a);for(var e=0,f=a.length;f>e;e++)this._off(a[e],b,c)}else delete this._events;return this},_on:function(a,b,c){var d=this._events=this._events||{},e=c&&c!==this&&G.stamp(c);if(e){var f=a+"_idx",g=a+"_len",h=d[f]=d[f]||{},i=G.stamp(b)+"_"+e;h[i]||(h[i]={fn:b,ctx:c},d[g]=(d[g]||0)+1)}else d[a]=d[a]||[],d[a].push({fn:b})},_off:function(a,b,c){var d=this._events,e=a+"_idx",f=a+"_len";if(d){if(!b)return delete d[a],delete d[e],void delete d[f];var g,h,i,j,k,l=c&&c!==this&&G.stamp(c);if(l)k=G.stamp(b)+"_"+l,g=d[e],g&&g[k]&&(j=g[k],delete g[k],d[f]--);else if(g=d[a])for(h=0,i=g.length;i>h;h++)if(g[h].fn===b){j=g[h],g.splice(h,1);break}j&&(j.fn=G.Util.falseFn)}},fire:function(a,b,c){if(!this.listens(a,c))return this;var d=G.Util.extend({},b,{type:a,target:this}),e=this._events;if(e){var f,g,h,i,j=e[a+"_idx"];if(e[a])for(h=e[a].slice(),f=0,g=h.length;g>f;f++)h[f].fn.call(this,d);for(i in j)j[i].fn.call(j[i].ctx,d)}return c&&this._propagateEvent(d),this},listens:function(a,b){var c=this._events;if(c&&(c[a]||c[a+"_len"]))return!0;if(b)for(var d in this._eventParents)if(this._eventParents[d].listens(a,b))return!0;return!1},once:function(a,b,c){if("object"==typeof a){for(var d in a)this.once(d,a[d],b);return this}var e=G.bind(function(){this.off(a,b,c).off(a,e,c)},this);return this.on(a,b,c).on(a,e,c)},addEventParent:function(a){return this._eventParents=this._eventParents||{},this._eventParents[G.stamp(a)]=a,this},removeEventParent:function(a){return this._eventParents&&delete this._eventParents[G.stamp(a)],this},_propagateEvent:function(a){for(var b in this._eventParents)this._eventParents[b].fire(a.type,G.extend({layer:a.target},a),!0)}});var proto=G.Evented.prototype;proto.addEventListener=proto.on,proto.removeEventListener=proto.clearAllEventListeners=proto.off,proto.addOneTimeEventListener=proto.once,proto.fireEvent=proto.fire,proto.hasEventListeners=proto.listens,G.Mixin={Events:proto},G.Rande=G.Class.extend({EDGE:-999,editNode:document.querySelectorAll(".g-body article")[0],isFirefox:navigator.userAgent.toLowerCase().indexOf("firefox")>-1,options:{animate:!0,imageUpload:!0,events:{change:function(a){}}},tagClassMap:{b:"bold",i:"italic",h1:"header1",h2:"header2",a:"url",blockquote:"quote"},events:{change:function(a){}},initialize:function(a,b){return G.r=this,G.setOptions(this,a),this.initToolbarLayout(),this.initPlugins(),b&&this.bind(b),this},bind:function(a){this.editableNodes=G.Util.castArray(a)||document.querySelectorAll(".g-body article"),this.addHooks()},unbind:function(){this.removeHooks(),this.removePlugins()},addToolbarButton:function(a){this.buttonsContainer.insertBefore(a,this.buttonsContainer.lastChild)},initPlugins:function(){this.plugins=this.options.plugins;for(p in this.plugins){var a=this.plugins[p];a.plugin(this)}},select:function(){this.triggerTextSelection()},addToOptions:function(a){this.optionsNode.appendChild(a)},addHooks:function(){this._setHooks(!0)},removeHooks:function(){this._setHooks(!1)},_setHooks:function(a){a=a?"addEventListener":"removeEventListener",document[a]("mousedown",this.triggerTextSelection,!1),document[a]("keydown",this.preprocessKeyDown,!1),document[a]("keyup",this.handleKeyUp,!1),window[a]("resize",this.triggerTextSelection,!1),this.urlInput[a]("blur",this.triggerUrlBlur,!1),this.urlInput[a]("keydown",this.triggerUrlSet,!1),this.options.allowImages&&(this.imageTooltip[a]("mousedown",this.triggerImageUpload,!1),this.imageInput[a]("change",this.uploadImage,!1),document[a]("mousemove",this.triggerOverlayStyling,!1));for(var b=0,c=this.editableNodes.length;c>b;b++){var d=this.editableNodes[b];d.contentEditable=!0,d[a]("mousedown",this.triggerTextSelection,!1),d[a]("mouseup",this.triggerTextSelection,!1),d[a]("keyup",this.triggerTextSelection,!1)}var e=this;this.iterateTextMenuButtons(function(b){b[a]("mousedown",function(){e.triggerTextStyling(b)},!1)})},initToolbarLayout:function(){this.toolbarContainer=document.createElement("div"),this.toolbarContainer.className="g-body",document.body.appendChild(this.toolbarContainer),this.imageTooltipTemplate=document.createElement("div"),this.imageTooltipTemplate.innerHTML="<div class='pos-abs file-label'>Insert image</div> 																				<input class='file-hidden pos-abs' type='file' id='files' name='files[]' accept='image/*' multiple/>",this.imageTooltipTemplate.className="image-tooltip hide",this.toolbarTemplate="<div class='options'> 			<span class='no-overflow'> 				<span class='ui-inputs'> 					<button class='bold'>B</button> 					<button class='italic'>i</button> 					<button class='header1'>h1</button> 					<button class='header2'>h2</button> 					<button class='quote'>&rdquo;</button> 					<button class='url useicons'>&#xe001;</button> 					<input class='url-input' type='text' placeholder='Paste or type a link'/> 				</span> 			</span> 		</div>";var a=document.createElement("div");a.className="text-menu hide",a.innerHTML=this.toolbarTemplate,0===document.querySelectorAll(".text-menu").length&&(this.toolbarContainer.appendChild(a),this.toolbarContainer.appendChild(this.imageTooltipTemplate)),this.imageInput=document.querySelectorAll(".file-label + input")[0],this.imageTooltip=document.querySelectorAll(".image-tooltip")[0],this.textMenu=document.querySelectorAll(".text-menu")[0],this.optionsNode=document.querySelectorAll(".text-menu .options")[0],this.urlInput=document.querySelectorAll(".text-menu .url-input")[0],this.uiInputs=document.querySelectorAll(".ui-inputs")[0],this.buttons=this.uiInputs.childNodes,this.buttonsContainer=this.uiInputs},handleKeyUp:function(a){var b=G.r,c=window.getSelection();c.anchorNode&&"ARTICLE"!==c.anchorNode.nodeName&&(b.triggerNodeAnalysis(a),c.isCollapsed&&b.triggerTextParse(a))},triggerOverlayStyling:function(a){this.toggleImageTooltip(a,a.target)},triggerImageUpload:function(a){var b=editNode.children,c=editNode.getBoundingClientRect();this.imageBound=this.getHorizontalBounds(b,c,a)},triggerNodeAnalysis:function(a){var b,c=window.getSelection();13===a.keyCode&&("DIV"===c.anchorNode.nodeName&&this.toggleFormatBlock("p"),b=this.getParentWithTag(c.anchorNode,"p"),b&&this.insertHorizontalRule(b))},triggerTextParse:function(){var a,b,c,d,e,f,g=window.getSelection();g.isCollapsed&&g.anchorNode&&"ARTICLE"!==g.anchorNode.nodeName&&(a=this.getTextProp(g.anchorNode),b=g.anchorNode[a],b.match(/^[-*]\s/)&&"LI"!==g.anchorNode.parentNode.nodeName&&(c=insertListOnSelection(g,a,"ul")),b.match(/^1\.\s/)&&"LI"!==g.anchorNode.parentNode.nodeName&&(c=insertListOnSelection(g,a,"ol")),d=c&&["ul","ol"].indexOf(c.nodeName.toLocaleLowerCase())>=0&&["p","div"].indexOf(c.parentNode.nodeName.toLocaleLowerCase())>=0,d&&(e=g.anchorNode,f=c.parentNode,f.parentNode.insertBefore(c,f),f.parentNode.removeChild(f),this.moveCursorToBeginningOfSelection(g,e)))},triggerTextStyling:function(a){{var b,c,d=a.className,e=window.getSelection();e.anchorNode}for(var f in this.tagClassMap)if(b=this.tagClassMap[f],c=new RegExp(b),c.test(d))switch(f){case"b":return document.execCommand(b,!1);case"i":return document.execCommand(b,!1);case"h1":case"h2":case"h3":case"blockquote":return this.toggleFormatBlock(f);case"a":return this.toggleUrlInput(),void(this.optionsNode.className="options url-mode")}},triggerUrlBlur:function(){var a=G.r,b=a.urlInput.value;return a.optionsNode.className="options",""===b?a.removeLink():(b.match("^(http://|https://|mailto:)")||(b="http://"+b),a.createLink(b),void(a.urlInput.value=""))},triggerUrlSet:function(a){var b=G.r;13===a.keyCode&&(a.preventDefault(),a.stopPropagation(),b.urlInput.blur())},triggerTextSelection:function(a){for(var b=G.r,c=window.getSelection(),d=a.target||a.srcElement,e=b.buttons,f=0;f<e.length;f++)if(e[f]==d)return b.reloadMenuState();return d==b.optionsNode?b.reloadMenuState():d.isContentEditable?c.isCollapsed?(b.hideToolbar(),b.textMenu.className="text-menu hide",void b.reloadMenuState()):(b.showToolbar(c),b.reloadMenuState(),void b.options.events.change()):(b.hideToolbar(),b.textMenu.className="text-menu hide",b.reloadMenuState(),b.options.events.change())},showToolbar:function(a){var b=a.getRangeAt(0),c=b.getBoundingClientRect();this.setTextMenuPosition(c.top-45+window.pageYOffset,(c.left+c.right)/2),this.toolbarOpen=!0},hideToolbar:function(){this.toolbarOpen&&(this.toolbarOpen=!1,this.setTextMenuPosition(this.EDGE,this.EDGE),this._fireHiddenToolbar())},_fireHiddenToolbar:function(){var a=this.plugins;for(p in a){var b=a[p];b.onToolbarHide()}},createLink:function(a){this.removeLink(),document.execCommand("createLink",!1,a)},removeLink:function(){var a=this.previouslySelectedText;a&&(window.getSelection().addRange(a),document.execCommand("unlink",!1))},getHorizontalBounds:function(a,b,c){var d,e,f,g,h,i,j,k,l=[];for(e=0,f=a.length-1;f>e;e++)g=a[e],h=a[e+1]||null,i=g.getBoundingClientRect().bottom-5,j=h.getBoundingClientRect().top,l.push({top:j,bottom:i,topElement:g,bottomElement:h,index:e+1});for(k=c.pageY-root.scrollY,e=0,f=l.length;f>e;e++)if(d=l[e],k<d.top&&k>d.bottom)return d;return null},getTextProp:function(a){var b;return b=a.nodeType===Node.TEXT_NODE?"data":this.isFirefox?"textContent":"innerText"},getFocusNode:function(){return window.getSelection().focusNode},getParent:function(a,b,c){if(null!==a)for(;a.parentNode;){if(b(a))return c(a);a=a.parentNode}},getParentWithTag:function(a,b){var c=function(a){return a.nodeName.toLowerCase()===b},d=function(a){return a};return this.getParent(a,c,d)},getParentHref:function(a){var b=function(a){return"undefined"!=typeof a.href},c=function(a){return a.href};return this.getParent(a,b,c)},hasParentWithTag:function(a,b){return!!this.getParentWithTag(a,b)},toggleFormatBlock:function(a){this.hasParentWithTag(this.getFocusNode(),a)?(document.execCommand("formatBlock",!1,"p"),document.execCommand("outdent")):document.execCommand("formatBlock",!1,a)},toggleUrlInput:function(){var a=this;setTimeout(function(){var b=a.getParentHref(a.getFocusNode());"undefined"!=typeof b&&(a.urlInput.value=b),a.previouslySelectedText=window.getSelection().getRangeAt(0),a.urlInput.focus()},150)},toggleImageTooltip:function(a){var b=editNode.children,c=editNode.getBoundingClientRect(),d=getHorizontalBounds(b,c,a);d?(this.imageTooltip.style.left=c.left-90+"px",this.imageTooltip.style.top=d.top-17+"px"):(this.imageTooltip.style.left=EDGE+"px",this.imageTooltip.style.top=EDGE+"px")},setTextMenuPosition:function(a,b){this.textMenu.style.top=a+"px",this.textMenu.style.left=b+"px",this.options.animate&&(this.textMenu.className=a===this.EDGE?"text-menu hide":"text-menu active")},insertHorizontalRule:function(a){var b,c,d;for(b=a.previousSibling,c=b;c&&c.nodeType==Node.TEXT_NODE;)c=c.previousSibling;b&&c&&("P"!==b.nodeName||b.textContent.length||"HR"===c.nodeName||(d=document.createElement("hr"),d.contentEditable=!1,a.parentNode.replaceChild(d,b)))},insertListOnSelection:function(a,b,c){var d="ol"===c?"insertOrderedList":"insertUnorderedList",e="ol"===c?3:2;return document.execCommand(this[d]),a.anchorNode[b]=a.anchorNode[b].substring(e),this.getParentWithTag(a.anchorNode,c)},insertImage:function(a){var b=document.createElement("img");b.src=a,b.style.width="200px",b.style.height="auto";var c=window.getSelection().getRangeAt(0);c.collapse(!0),c.insertNode(b)},reloadMenuState:function(){var a,b,c,d=this.getFocusNode(),e=this;this.iterateTextMenuButtons(function(f){a=f.className;for(var g in e.tagClassMap)if(b=e.tagClassMap[g],c=new RegExp(b),c.test(a)){f.className=e.hasParentWithTag(d,g)?b+" active":b;break}})},preprocessKeyDown:function(a){var b,c=G.r,d=window.getSelection(),e=c.getParentWithTag(d.anchorNode,"p");13===a.keyCode&&e&&(prevSibling=e.previousSibling,b=prevSibling&&"HR"===prevSibling.nodeName&&!e.textContent.length,b&&a.preventDefault())},iterateTextMenuButtons:function(a){var b,c,d,e=document.querySelectorAll(".text-menu button"),f=function(b){a(b)};for(b=0,c=e.length;c>b;b++)d=e[b],f(d)},moveCursorToBeginningOfSelection:function(a,b){range=document.createRange(),range.setStart(b,0),range.setEnd(b,0),a.removeAllRanges(),a.addRange(range)},uploadImage:function(){var a,b=this.files[0],c=new FileReader;c.onload=function(){return function(b){a=document.createElement("figure"),a.innerHTML='<img src="'+b.target.result+'"/>',editNode.insertBefore(a,imageBound.bottomElement)}}(b),c.readAsDataURL(b)}}),G.rande=function(a,b){return new G.Rande(b,a)},G.Attachments=G.Class.extend({name:"Attachments",initialize:function(a,b){G.setOptions(this,b),this.source=a},_initialize:function(){this.initLayout(),this.addHooks(),this.initialized=!0},plugin:function(a){this.grande=a,this._initialize()},initLayout:function(){this.button=this.createButton(),this.grande.addToolbarButton(this.button)},createButton:function(){var a=document.createElement("button");return a.className="attachment",a.innerHTML="F",a},addHooks:function(){var a=this;this.button.addEventListener("mousedown",function(b){a.toggleButton(b,a)},!1)},removeHooks:function(){var a=this;this.button.removeEventListener("mousedown",function(b){a.toggleButton(b,a)},!1)},toggleButton:function(a,b){var c=a.target;Wu.DomEvent.stop(a),c.active?(b.closePopup(),c.active=!1,c.className="attachment"):(b.openPopup(),c.active=!0,c.className="attachment active")},closePopup:function(){this.destroyPopup()},openPopup:function(){this.createPopup()},createPopup:function(){this.project=app.activeProject;{var a=this.source,b=this._popup=Wu.DomUtil.create("div","grande-sources-container");Wu.DomUtil.create("div","grande-sources-topwrap",b)}a.forEach(function(a){this._createSource(a,b)},this),this.grande.addToOptions(b)},_createSource:function(a,b){{var c=a.title,d=Wu.DomUtil.create("div","grande-sources-source",b),e=Wu.DomUtil.create("div","grande-sources-source-icon",d);Wu.DomUtil.create("div","grande-sources-source-title",d,c)}if(Wu.DomUtil.addClass(e,a.type),a.thumbnail){var f=Wu.DomUtil.create("img","grande-sources-source-thumb",d);f.src=a.thumbnail}Wu.DomEvent.on(d,"mousedown",function(){this.options.embedImage?this.embedImage(a.url):this.selectSource(a)},this)},destroyPopup:function(){this._popup&&(this._remove(this._popup),this._popup=null)},embedImage:function(a){this.grande.insertImage(a)},selectSource:function(a){var b=a.url;this.grande.createLink(b)},_remove:function(a){var b=a.parentNode;b&&b.removeChild(a)},destroy:function(){this.removeHooks()},onToolbarHide:function(){this.closePopup()}});